<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Emergency call scenarios" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-emercallex" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Emergency call scenarios</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-emercallex">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Emergency call scenarios</h1>
<div class="body conbody">
<div class="section"><h2 class="title sectiontitle">Allowing emergency call even in barred state</h2>
<p class="p">When NCC receives the following AVPs (along with other AVPs), the call is processed without
                rating, charging, or monitoring. The call is processed even when the device is in
                    <var class="keyword varname">barred</var> state.</p>
<ul class="ul">
<li class="li">
<p class="p">
<var class="keyword varname">CCR-Event</var> with the following <var class="keyword varname">IMS-Information/Service-Specific-Info</var> group AVP:</p>
<ul class="ul">
<li class="li">
<p class="p">Service-Specific-Info/Service-Specific-Type = 1007 (Service Type) </p>

</li>

<li class="li">
<p class="p">Service-Specific-Info/Service-Specific-Data =   255 (Emergency Starts)</p>

</li>

</ul>

</li>

<li class="li">
<p class="p">
<var class="keyword varname">CCR-Event</var> with the following <var class="keyword varname">Service-Specific-Info</var> group AVP</p>
<ul class="ul">
<li class="li">
<p class="p">Service-Specific-Info/Service-Specific-Type = 1007 (Service Type)</p>

</li>

<li class="li">
<p class="p">Service-Specific-Info/Service-Specific-Data = 256 (Emergency Ends)</p>

</li>

</ul>

</li>

</ul>

<p class="p">A result code <var class="keyword varname">4011 - DIAMETER_CREDIT_CONTROL_NOT_APPLICABLE</var> is returned and a CDR is generated for such calls.</p>

<div class="sectiondiv">
<p class="p"><strong class="ph b">Rule example</strong></p>

<p class="p">The following figure presents the sample rule for the emergency calls for this scenario.</p>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Sample rule for handling emergency calls</span>
                    
                    
                    <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f-emergencycustom_default.png" />
                </div>

</div>
<div class="sectiondiv">
<p class="p"><strong class="ph b">CDR example</strong></p>

<p class="p">The following figure presents the CDR for IMS emergency call start and end. The call was
                    successful in this example even when the device was in
                        <var class="keyword varname">Inactive</var> state. </p>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Sample CDR for IMS emergency call</span>
                    
                    
                    <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-imsemergencycdr_default.png" />
                </div>

</div>
</div>

<div class="section"><h2 class="title sectiontitle">Option to lift data restrictions for emergency call and send notification</h2>
<p class="p">The service provider can lift usage control (UC) restriction for data call when subscriber makes
                an emergency call. This allows the subscriber to use data service in emergency case,
                such as IM, video, along with voice call and SMS. This also includes “Emergency
                Call” notification to include the UC lift options, which indicates what call types
                are allowed to ignore UC restriction checks.</p>

<p class="p">A call is treated as emergency call in the following scenarios:</p>
<ul class="ul">
<li class="li">
<p class="p">for emergency event (CCR-E), if it is an emergency start/stop request.</p>

</li>

<li class="li">
<p class="p">for CCR-I request for session call, if the called party address is in device data <var class="keyword varname">EmergencyNumbers</var> list.</p>

</li>

</ul>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Before loading the rule logic, create device custom data <var class="keyword varname">EmergencyNumbers</var> with all the emergency numbers defined in it.</div>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule example: To identify an emergency call</span>
                
                
                <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_var_emerg_indicator_default.png" height="372" width="952" />
            </div>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule example: Logic for emergency start/stop</span>
                
                
                <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_logic_emer_startstop_default.png" height="299" width="933" />
            </div>

<p class="p">The rule action <em class="ph i">NOTIFICATION.Send-Notification</em> is used to send the notification for emergency call.</p>

<p class="p">The emergency call notification needs to include variables <var class="keyword varname">$[liftoption]</var> in
                the notification variable. The global IMS emergency lift option is defined as a rule
                variable. This is compared with the device-level emergency lift option. The one with
                lesser value is used as the final lift option using the source context
                    <em class="ph i">SPR_DEVICE.Compared-Emergency-Level ( &lt;input Level&gt; )</em>. The global
                variable for IMS emergency lift option (for example,
                    <var class="keyword varname">globalLiftOptionIMS</var>) is used as the <var class="keyword varname">&lt;input
                    Level&gt;</var> parameter.</p>

<p class="p">The notification variables <var class="keyword varname">$[liftoption]</var> takes the following values:</p>
<ul class="ul">
<li class="li">
<p class="p">ALL (lifting all call types)</p>

</li>

<li class="li">
<p class="p">DATA, VOICE, VIDEO, and ECOM</p>

</li>

<li class="li">
<p class="p">DATA, VOICE, and VIDEO</p>

</li>

<li class="li">
<p class="p">VOICE and VIDEO</p>

</li>

<li class="li">
<p class="p">SMS and MMS</p>

</li>

<li class="li">
<p class="p">NONE (lifting no call)</p>

</li>

</ul>

<p class="p">The following figure provides example of configuring rule for notification after emergency call.
                It provides two lift options, for example, <var class="keyword varname">ALL</var> and
                    <var class="keyword varname">DATA_VOICE_VIDEO_ECOM</var>. More options can be configured in a
                similar way.</p>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule example: TCP/IP notification after emergency call</span>
                
                
                <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_tcpip_notif_emercall_default.png" height="299" width="939" />
            </div>

<p class="p">If the lift option includes data call, and if device custom data <var class="keyword varname">sendRARForEmergencyCall</var> is <var class="keyword varname">true</var>, or variable <var class="keyword varname">globalSendRARForEmergencyCall</var> is <var class="keyword varname">true</var>, then the rule result includes <samp class="ph systemoutput">NOTIFICATION.Send-RAR = "SendRAR"</samp>. This action results in sending RAR to all current ongoing Gy and 5G sessions.</p>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Before loading the rule logic, the device custom data <var class="keyword varname">sendRARForEmergencyCall</var> (Boolean type) must be defined.</div>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule example: Logic for sending emergency call RAR</span>
                
                
                <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_logic_emer_rar_default.png" height="267" width="960" />
            </div>

</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>