<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="adjustBalance" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="adjust_balance" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>adjustBalance</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="adjust_balance">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">adjustBalance</h1>
<div class="body conbody">
        <p class="p">For description of EDR tags, refer to <a class="xref" href="account.html">Account</a>.</p>

    </div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_j2y_jqw_xqb"><h2 class="title topictitle2" id="ariaid-title2">EDR tags</h2>
<div class="body conbody">
            <table cellpadding="4" cellspacing="0" summary="" id="concept_j2y_jqw_xqb__table_mhj_jrc_qqb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:30.03003003003003%" /><col style="width:69.96996996996997%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d14756e49">EDR Tag</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d14756e52">Example</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">accountID</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">Account_AdjustBalance06</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">amount</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">20.00</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">accountOverageLimit</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">0.00</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">accountType</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">PRE_PAID</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">source</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">BalanceAdjustment</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">accountBalanceBefore</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">0.00</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">accountBalanceAfter</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">20.00</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">transactionId</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">10000000001<p class="p">(The input received in AdjustBalance API is
                                    generated without modification.)</p>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">shadowBalanceBefore</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">10.00000 (Specifies the shadow balance of the account before the
                                    operation.)<div class="note" id="concept_j2y_jqw_xqb__note_swn_w1j_x5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If only shadow balance
                                    before operation is null (for decrease operation) or if both
                                    shadow balance before and after operation are null (for set
                                    operation) both <em class="ph i">shadowBalanceBefore</em> and
                                        <em class="ph i">shadowBalanceAfter</em> fields are omitted. For set
                                    operation, if only shadow balance before operation is null, then
                                        <em class="ph i">shadowBalanceBefore</em> is set as 0.00000.</div>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">shadowBalanceAfter</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">9.00000 (Specifies the shadow balance of the account after the
                                operation.)</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">reason</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">overrideOverageLimit</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">10</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">partialSuccess</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">false</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e49 ">partialTransfer</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d14756e52 ">true</td>

                        </tr>

                    </tbody>
</table>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_xk3_spw_xqb"><h2 class="title topictitle2" id="ariaid-title3">EDR examples</h2>
<div class="body conbody">
            <div class="section" id="concept_xk3_spw_xqb__section_ws5_zql_tvb"><h3 class="title sectiontitle">Adjust balance with source attribute</h3>
                
                <pre class="pre codeblock" id="concept_xk3_spw_xqb__codeblock_k2m_1rl_tvb"><code>-------------------------------------
CDR length:                       441
Release ID | Version ID:          7|2
Data record format | TS number:   1|7
Release identifier extension:       0
Name                   Tag                      Data
RecordType             0         PROVISIONING_RECORD
serviceProvider        1                       MVNO1
invokedBy              1                  webService
invokedMethod          1               adjustBalance
accountID              1     Account_AdjustBalance06
amount                 1                       20.00
accountOverageLimit    1                        0.00
accountName
accountType            1                    PRE_PAID
source                 1           BalanceAdjustment
accountBalanceBefore   1                        0.00
accountBalanceAfter    1                       20.00
reason                 1                           1
transactionId          1                 10000000001
overrideOverageLimit   1                          10
partialSuccess         1                       false
result                 1                     SUCCESS
generationTimestamp    1         18/05/2021 13:27:48
meHostName             1  naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr                    
nccVersion             1                 SPS_21_6_R1
RecordTimestamp        1         18/05/2021 13:27:48</code></pre>
            </div>

            <div class="section" id="concept_xk3_spw_xqb__section_kmb_zql_tvb"><h3 class="title sectiontitle">Adjust balance with AdditionalBalanceInfo attribute</h3>
                
                <pre class="pre codeblock" id="concept_xk3_spw_xqb__codeblock_p2b_crl_tvb"><code>--------------------------------------
CDR length:                       1218
Release ID | Version ID:           7|2
Data record format | TS number:    1|7
Release identifier extension:        0
Name                      Tag                                                   Data
RecordType                0                                      PROVISIONING_RECORD
invokedBy                 1                                               webService
invokedMethod             1                                            adjustBalance
accountID                 1                                              Account3732
accountName               1                                              Account3732
amount                    1                                                    12.00
accountType               1                                                 PRE_PAID
accountOverageLimit       1                                                     0.00
accountBalanceBefore      1                                                   200.00
accountBalanceAfter       1                                                   200.00
partialSuccess            1                                                    false
source                    1                                          AccountRecharge
transactionId             1                                         1000000000000001
adjustMode                1                                                     DECR
result                    1                                                  SUCCESS
correlationID             1     X-CorrelationId:2d0fbcb6-03ae-4ad1-8a44-096232798e29
generationTimestamp       1                                      06/12/2022 11:59:19
meHostName                1  naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr                                             
nccVersion                1                                              SPS_23_0_R1
recordId                  1      20221206062919_7bc23438-08f1-4354-829b-9ecd6a25cabb
RecordTimestamp           1                                      06/12/2022 11:59:19
  RecordProperty          0                                    additionalBalanceInfo
  chargingServiceName     1                                                  SB13692
  usageType               1                                        SECONDARY_BALANCE
  usedAs                  1                                                   ADJUST
    RecordProperty        0                                               bucketInfo
    bucketName            1                                                CBkt13692
    bucketInstanceId      1                     65505d56-9ee6-4dda-91ae-3c9c05ef96da
    bucketBalanceBefore   1                                                     10.0
    bucketBalanceAfter    1                                                      0.0
  RecordProperty          0                                    additionalBalanceInfo
  chargingServiceName     1                                                  SB23692
  usageType               1                                        SECONDARY_BALANCE
  usedAs                  1                                                   ADJUST
    RecordProperty        0                                               bucketInfo
    bucketName            1                                                CBkt23692
    bucketInstanceId      1                     527d9c94-a873-4e3b-b29d-625961a1f613
    bucketBalanceBefore   1                                                      7.0
    bucketBalanceAfter    1                                                      5.0

</code></pre>
            </div>

            <div class="section" id="concept_xk3_spw_xqb__section_h4k_qpp_nyb"><h3 class="title sectiontitle">Adjust balance with partialTransfer attribute</h3>
                
                <pre class="pre codeblock" id="concept_xk3_spw_xqb__codeblock_djz_rpp_nyb"><code>--------------------------------------
CDR length:                       1371
Release ID | Version ID:           7|2
Data record format | TS number:    1|7
Release identifier extension:        0
Name                      Tag                                                  Data
RecordType                0                                     PROVISIONING_RECORD
invokedBy                 1                                              webService
invokedMethod             1                                           adjustBalance
accountID                 1                                                      A1
accountName               1                                                      A1
amount                    1                                                   -1.00
accountType               1                                               POST_PAID
accountOverageLimit       1                                           9999999999.00
accountBalanceBefore      1                                                   -2.00
accountBalanceAfter       1                                                   -3.00
partialSuccess            1                                                   false
reason                    1                                                      A2
source                    1                                         AccountRecharge
adjustMode                1                                                    DECR
result                    1                                                 SUCCESS
correlationID             1                    aa0691e5-74bc-4c55-a568-59f387e59aed
aggLastRecord             1                                                   false
aggSequenceNumber         1                                                       1
invokedByExternalMethod   1                                           transferUnits
transferAgent             1                                                  SENDER
extActivity               1                                               PROVISION
partialTransfer           1                                                    true
generationTimestamp       1                                     15/08/2023 07:06:13
meHostName                1                                                     ME1
nccVersion                1                                             SPS_23_8_R1
recordId                  1     20230815070613_74f9f130-3e85-463c-ba2d-0617a7aa470d
RecordTimestamp           1                                     15/08/2023 07:06:13
  RecordProperty          0                                          additionalInfo
  key                     1                                               taxamount
  value                   1                                                     1.0
  RecordProperty          0                                          additionalInfo
  key                     1                                                 purpose
  value                   1                                                Transfer
  RecordProperty          0                                          additionalInfo
  key                     1                                                deviceId
  value                   1                                                      D1
  RecordProperty          0                                          additionalInfo
  key                     1                                      deviceIdentityType
  value                   1                                                  MSISDN
  RecordProperty          0                                          additionalInfo
  key                     1                                     deviceIdentityValue
  value                   1                                                11111111
  RecordProperty          0                                          additionalInfo
  key                     1                                           destAccountId
  value                   1                                                      A2
  RecordProperty          0                                          additionalInfo
  key                     1                                            destDeviceId
  value                   1                                                      D2
  RecordProperty          0                                          additionalInfo
  key                     1                                          transferAmount
  value                   1                                                     1.0
  RecordProperty          0                                          additionalInfo
  key                     1                                       transferUnitsType
  value                   1                                                    Byte
  RecordProperty          0                                          additionalInfo
  key                     1                                   KindTransferUnitsType
  value                   1                                                  VOLUME
</code></pre>
            </div>

        </div>
</div>
<div class="footer"><hr /><p>CDR/EDR Reference • P556766-DN1000055014-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>