<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Session audit CDRs" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="d1e28860" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Session audit CDRs</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="d1e28860">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Session audit CDRs</h1>
<div class="body conbody">
    <p class="p">The session audit CDRs are generated for Gy/N40/IMS interface and SMS/MMS calls also if used
      ECUR interface.</p>

    <p class="p">The IMS Session Audit CDRs also contain rating information of the IMS calls. Operators use
      these CDRs in billing mediation systems for billing processing.</p>

  </div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="d1e13965"><h2 class="title topictitle2" id="ariaid-title2">Record event results for session audit CDRs</h2>
<div class="body conbody">
      <div class="section" id="d1e13965__section_fqv_t1v_23b">
        <p class="p">This section provides information about record event results and cause for
          successful/unsuccessful audit session.</p>

        <table cellpadding="4" cellspacing="0" summary="" id="d1e13965__table_hqv_t1v_23b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Record event results for session audit CDRs</span></caption><colgroup><col style="width:14.705882352941178%" /><col style="width:85.29411764705883%" /></colgroup><thead class="thead" style="text-align:left;">
              <tr class="row">
                <th class="entry cellrowborder" style="vertical-align:top;" id="d23407e56">Record Event Result</th>

                <th class="entry cellrowborder" style="vertical-align:top;" id="d23407e59">Description</th>

              </tr>

            </thead>
<tbody class="tbody">
              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">DIAMETER_SUCCESS</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">When session is deleted successfully through session audit.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">300</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when Gy/N40 session is cleared on unknown session
                  audit for feature Proactive clearing of stale Diameter/Nchf_ConvergedCharging
                  sessions. Refer to <em class="ph i">Charging User Guide</em> for more details.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">301</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when there is failure in clearing Gy/N40 session on
                  unknowm session audit for feature proactive clearing of stale
                  Diameter/Nchf_ConvergedCharging sessions. Refer to <em class="ph i">Charging User Guide</em> for
                  more details.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">302</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated for Gy/N40 session clear EDR when device is deleted
                  via delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">303</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when there is failure in Gy/N40 session clear EDR
                  when device is deleted via delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">304</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated for IMS session clear when device is deleted via
                  delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">305</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when there is failure in IMS session clear when
                  device is deleted via delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">306</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated for Sy session clear when device is deleted via
                  delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">307</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when there is failure in Sy session clear when device
                  is deleted via delete profile API.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">308</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on subscriber profile deletion for Gy success.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">309</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on subscriber profile deletion for Gy failure.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">310</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on change in device identities for Gy success.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">311</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on change in device identities for Gy failure.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">312</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on change in change profile identities for Gy success.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">313</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">Audit session on change in change profile identities for Gy failure.</td>

              </tr>

              <tr class="row">
                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e56 ">314</td>

                <td class="entry cellrowborder" style="vertical-align:top;" headers="d23407e59 ">This value is generated when IMS session is cleared on unknowm session audit
                  for feature proactive clearing of stale Diameter/Nchf_ConvergedCharging sessions.
                  Refer to <em class="ph i">Charging User Guide</em> for more details.</td>

              </tr>

            </tbody>
</table>

      </div>

    </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_zbg_bfv_23b"><h2 class="title topictitle2" id="ariaid-title3">CDR examples</h2>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title4" id="concept_g2l_kby_cmb"><h2 class="title topictitle2" id="ariaid-title4">Audit per IMS session</h2>
<div class="body conbody">
      <p class="p">IMS Audit CDR is generated only when the application preference <strong class="ph b">Include Final Usage In
          BCR EDRs</strong> is set to <var class="keyword varname">LAST_DATA_CALL</var> and BCR occurrs. The IMS session
        audit CDRs also contain rating information of the IMS call. This information is generated
        only if <em class="ph i">Enable-Single-CDR</em> is configured in the rule.</p>

      <pre class="pre codeblock"><code>--------------------------------------
CDR length:                       4517
Release ID | Version ID:           7|2
Data record format | TS number:    1|7
Release identifier extension:        0
Name                                  Tag                                   Data
RecordType                            0                        OCSChargingRecord
serviceProvider                       1                                    MVNO1
incomplete-CDR-Indication             1                                        1
devicePartitionId                     1                                        1
recordClosureTime                     1                      11/09/2020 12:25:59
rATType                               1                                        6
sessionSequenceNumber                 1                                        2
resultCode                            1                                     2001
roleOfNode                            1                         Originating-Role
changeCondition                       1                                        0
generationTimestamp                   1                      11/09/2020 12:25:59
deviceId                              1                                D11-80002
serviceContextId                      1                           32260@3gpp.org
origUserLocationInfo                  1                        40587400000006011
userLocationInformation               1                        40587400000006011
dayOfWeek                             1                                   Friday
callingPartyAddress                   1                                999999999
mediaName                             1                                    audio
singleCDRTriggerEvent                 1                            AUDIT_REQUEST
requestType                           1                           UPDATE_REQUEST
sessionStartTime                      1                      11/09/2020 12:23:25
sessionId                             1                             80002;100069
recordOpeningTime                     1                      11/09/2020 12:23:25
deviceSiteId                          1                                        4
roamingIndicator                      1                                     HOME
imsChargingIdentifier                 1                      0.274.34-1431350.81
serviceIdentifier                     1                                      121
callAnswerTime                        1                      11/09/2020 12:23:25
accountId                             1                               AccD180002
aprTransaction                        1                                        0
calledPartyAddress                    1                                111111111
deviceState                           1                                   Active
singleCDREnabled                      1                                     true
recordEventResult                     1                         DIAMETER_SUCCESS
recordSequenceNumber                  1                                        1
RecordTimestamp                       1                      11/09/2020 06:55:59
  RecordProperty                      0                     listOfSubscriptionID
    RecordProperty                    0                           subscriptionId
    subscriptionIdType                1                                        1
    subscriptionIdData                1                               8000200000
    RecordProperty                    0                           subscriptionId
    subscriptionIdType                1                                        0
    subscriptionIdData                1                               8000200000
  RecordProperty                      0                        supplServiceInfos
  RecordProperty                      0                           lifeCycleState
  accountLifeCycleState               1                                   Active
  deviceLifeCycleState                1                                   Active
    RecordProperty                    0                    subscriptionLifeCycle
    subscriptionState                 1                                   Active
  RecordProperty                      0                               listOfMscc
    RecordProperty                    0                                     mscc
    recordEventType                   1                                      IMS
    firstDataStart                    1                      11/09/2020 12:23:25
    ratingGroup                       1                                        8
    subRecordEventType                1                                      MOC
    resultCode                        1                                     2001
    ttcDrivenBy                       1                                  ACCOUNT
    recordEventResult                 1                                       15
    serviceIdentifier                 1                                      121
    usageType                         1                                     TIME
    localSequenceNumber               1                                        1
      RecordProperty                  0                                counterID
        RecordProperty                0                                counterID
        counterID                     1                                 ABY80002
        counterUnitType               1                                   Second
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterType                   1                             MULTI_BUNDLE
        subscriptionId                1     efcc2222-49e1-4e67-8258-097ea0e09a04
        RecordProperty                0                                counterID
        counterID                     1                                  C280002
        counterUnitType               1                                    Money
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterType                   1                                   DEVICE
        RecordProperty                0                                counterID
        counterID                     1                                  C180002
        counterUnitType               1                                   Second
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterType                   1                                   DEVICE
        RecordProperty                0                                counterID
        counterID                     1                                  C480002
        counterUnitType               1                                    Money
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterType                   1                             SUBSCRIPTION
        RecordProperty                0                                counterID
        counterID                     1                                  C380002
        counterUnitType               1                                   Second
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterType                   1                             SUBSCRIPTION
      RecordProperty                  0                               deviceInfo
        RecordProperty                0                         subscriptionInfo
        subscriptionId                1     efcc2222-49e1-4e67-8258-097ea0e09a04
        subscriptionState             1                                   Active
        bundleName                    1                                Bun680002
        accountID                     1                               AccD180002
        subscriptionStartDateTime     1                      11/09/2020 12:23:40
        subscriptionEndDateTime       1                      11/09/2020 12:25:40
          RecordProperty              0                              counterInfo
          counterName                 1                                  C380002
          counterKey                  1     efcc2222-49e1-4e67-8258-097ea0e09a04
          counterType                 1                             SUBSCRIPTION
          counterUnitType             1                                   Second
          counterKindOfUnit           1                                     TIME
          counterValueBefore          1                                        0
          counterValueAfter           1                                        0
          CounterUpdatedValueBR       1                                       81
          RecordProperty              0                              counterInfo
          counterName                 1                                  C480002
          counterKey                  1     efcc2222-49e1-4e67-8258-097ea0e09a04
          counterType                 1                             SUBSCRIPTION
          counterUnitType             1                                    Money
          counterKindOfUnit           1                                    MONEY
          counterValueBefore          1                                        0
          counterValueAfter           1                                        0
          CounterUpdatedValueBR       1                                       81
          RecordProperty              0                      chargingServiceInfo
          chargingServiceName         1                                 CS680002
          chargingServiceType         1                                     TIME
          chargingServicePriority     1                                    80002
          chargingServiceCategory     1                          DefaultCategory
            RecordProperty            0                              accountInfo
            accountID                 1                               AccD180002
            accountType               1                                 PRE_PAID
            accountState              1                                   Active
            accountBalanceBefore      1                                  1000.00
            accountBalanceAfter       1                                   878.85
            accountBalanceCommitted   1                                   121.15
            accountOveragelimit       1                                     0.00
            rateId                    1                               Rate580002
            tariffID                  1             CS680002_TariffMainpass80002
        RecordProperty                0                              counterInfo
        counterName                   1                                 ABY80002
        counterKey                    1                                D11-80002
        counterType                   1                             MULTI_BUNDLE
        counterUnitType               1                                   Second
        counterKindOfUnit             1                                     TIME
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        counterPolicySignalState      1                                      -99
        CounterUpdatedValueBR         1                                       81
        subscriptionId                1     efcc2222-49e1-4e67-8258-097ea0e09a04
        RecordProperty                0                              counterInfo
        counterName                   1                                  C280002
        counterKey                    1                                D11-80002
        counterType                   1                                   DEVICE
        counterUnitType               1                                    Money
        counterKindOfUnit             1                                    MONEY
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        CounterUpdatedValueBR         1                                       81
        RecordProperty                0                              counterInfo
        counterName                   1                                  C180002
        counterKey                    1                                D11-80002
        counterType                   1                                   DEVICE
        counterUnitType               1                                   Second
        counterKindOfUnit             1                                     TIME
        counterValueBefore            1                                        0
        counterValueAfter             1                                        0
        CounterUpdatedValueBR         1                                       81</code></pre>
    </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title5" id="concept_jtb_3by_cmb"><h2 class="title topictitle2" id="ariaid-title5">Audit per SMS session</h2>
<div class="body conbody">
      <pre class="pre codeblock"><code>-------------------------------------
CDR length:                       467
Release ID | Version ID:          7|2
Data record format | TS number:   1|7
Release identifier extension:       0
Name                   Tag                                                  Data
RecordType             0                                       OCSChargingRecord
recordEventType        1                                          GySessionAudit
sessionId              1                          192.168.1.11:3890;7583593714;3
deviceId               1                                                 Device1
deviceName             1                                                 Device1
ocsHost                1                                                 TOPCPID
generationTimestamp    1                                     28/02/2023 16:56:47
serviceContextId       1                                          32274@3gpp.org
recordEventResult      1                                        DIAMETER_SUCCESS
recordSequenceNumber   1                                                       0
recordId               1     20230228112647_f61c47b0-f1c8-467e-89e2-e8ddebe2d89c
meHostName             1  naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr                                                    
nccVersion             1                                             SPS_23_2_R1
RecordTimestamp        1                                     28/02/2023 16:56:47</code></pre>
    </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title6" id="concept_qpp_2by_cmb"><h2 class="title topictitle2" id="ariaid-title6">Audit per MMS session</h2>
<div class="body conbody">
      <pre class="pre codeblock"><code>-------------------------------------
CDR length:                       467
Release ID | Version ID:          7|2
Data record format | TS number:   1|7
Release identifier extension:       0
Name                   Tag                                                  Data
RecordType             0                                       OCSChargingRecord
recordEventType        1                                          GySessionAudit
sessionId              1                          192.168.1.11:3890;7584052585;6
deviceId               1                                                 Device1
deviceName             1                                                 Device1
ocsHost                1                                                 TOPCPID
generationTimestamp    1                                     28/02/2023 17:04:26
serviceContextId       1                                          32270@3gpp.org
recordEventResult      1                                        DIAMETER_SUCCESS
recordSequenceNumber   1                                                       0
recordId               1     20230228113426_365fbc50-ea91-4295-9cd5-6975e7797910
meHostName             1  naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr                                                  
nccVersion             1                                             SPS_23_2_R1
RecordTimestamp        1                                     28/02/2023 17:04:26</code></pre>
    </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title7" id="concept_gdx_hs2_dmb"><h2 class="title topictitle2" id="ariaid-title7">Session clear</h2>
<div class="body conbody">
      <p class="p">Session clear CDRs are generated for Gy/N40 sessions when device is deleted via Delete
        profile API. Sample CDRs for session clear are provided in this section. The different
        values for recordEventResult tag for success/failure scenarios for various cases are
        mentioned in <a class="xref" href="#d1e13965__table_hqv_t1v_23b">Record event results for session audit CDRs</a>.</p>

    </div>
<div class="topic concept nested2" aria-labelledby="ariaid-title8" id="concept_cyt_ks2_dmb"><h3 class="title topictitle3" id="ariaid-title8">Success</h3>
<div class="body conbody">
        <pre class="pre codeblock"><code>-------------------------------------
CDR length:                       244
Release ID | Version ID:          7|2
Data record format | TS number:   1|2
Release identifier extension:       1
Name                   Tag                           Data
RecordType             0                OCSChargingRecord
serviceProvider        1                            MVNO1
recordEventType        1                     SessionClear
sessionId              1                  70958;call01;GY
deviceId               1                         D1-70958
ocsHost                1     N-20HEPF11SEG2.nsn-intra.net
recordEventResult      1                              302
recordSequenceNumber   1                                0
RecordTimestamp        1              24/06/2020 14:50:15</code></pre>
      </div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title9" id="concept_f3g_ms2_dmb"><h3 class="title topictitle3" id="ariaid-title9">Failure</h3>
<div class="body conbody">
        <pre class="pre codeblock"><code>-------------------------------------
CDR length:                       244
Release ID | Version ID:          7|2
Data record format | TS number:   1|2
Release identifier extension:       1
Name                   Tag                           Data
RecordType             0                OCSChargingRecord
serviceProvider        1                            MVNO1
recordEventType        1                     SessionClear
sessionId              1                  70958;call01;GY
deviceId               1                         D1-70958
ocsHost                1     N-20HEPF11SEG2.nsn-intra.net
recordEventResult      1                              303
recordSequenceNumber   1                                0
RecordTimestamp        1              24/06/2020 14:50:15</code></pre>
      </div>
</div>
</div>
<div class="footer"><hr /><p>CDR/EDR Reference • P556766-DN1000055014-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>