<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="db-prepare-rewind" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="dbpreparerewind_tool" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>db-prepare-rewind</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="dbpreparerewind_tool">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">db-prepare-rewind</h1>
<div class="body conbody">
        <div class="section" id="dbpreparerewind_tool__section_ohm_xnh_1qb"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">The db-prepare-rewind tool disables forwarder, removes the primary namespace of the
                local system or given namespace, and generally prepares the specified <span class="ph">NCC</span> for the actions of db-rewind before that tool is
                run. When run, the local system is treated as the source, and will only proceed if
                the remote system (specified by either id or name) exists in the topology file
                    <code class="ph codeph">/opt/tpa/conf/topology/SpsTopologyConfiguration.yaml</code>. The
                namespace used must also be common to both the remote system and local system.</p>

            <p class="p">This tool may be used on all <span class="ph">NCC</span> systems.</p>

        </div>

        <div class="section" id="dbpreparerewind_tool__section_qdf_ynh_1qb"><h2 class="title sectiontitle">Syntax</h2>
            
            <pre class="pre codeblock"><code>/opt/tpa/bin/db-prepare-rewind -s &lt;remote system&gt; [-t ?] [-t &lt;new_throughput_value&gt;] [-n &lt;namespace&gt;] [-v] [-f]</code></pre>
            <table cellpadding="4" cellspacing="0" summary="" id="dbpreparerewind_tool__table_grl_rjq_nlb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:16.666666666666664%" /><col style="width:50%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d12462e68">Option</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d12462e71">Description</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d12462e74">Option arguments</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">No arguments</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">Displays usage or help information.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-s &lt;remote system&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">This flag is mandatory. Identify the target system for the rewind
                                process from the local system as the source, as it appears in the
                                topology data.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 ">System ID or name</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-h or -?</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">Displays usage or help information.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-t ?</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">
                                <p class="p">To get the current value of <code class="ph codeph">max-throughput</code>, when
                                    used</p>

                                <ul class="ul" id="dbpreparerewind_tool__ul_qy4_kr2_4qb">
                                    <li class="li">With -n &lt;namespace&gt;</li>

                                </ul>

                                <p class="p">Get the current value of <code class="ph codeph">max-throughput</code>
                                    configured for the provided namespace between the local system
                                    (where tool is run) and remote system (provided by <code class="ph codeph">-s
                                        &lt;remote system&gt;</code>).</p>

                                <ul class="ul" id="dbpreparerewind_tool__ul_ry4_kr2_4qb">
                                    <li class="li">Without -n &lt;namespace&gt;</li>

                                </ul>

                                <p class="p">Get the current value of <code class="ph codeph">max-throughput</code>
                                    configured for all the common namespaces between the local
                                    system (where tool is run) and remote system (provided by
                                        <code class="ph codeph">-s &lt;remote system&gt;</code>).</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-t &lt;new_throughput_value&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">
                                <p class="p">To set the current value of <code class="ph codeph">max-throughput</code>, when
                                    used</p>

                                <ul class="ul" id="dbpreparerewind_tool__ul_sbl_4r2_4qb">
                                    <li class="li">With -n &lt;namespace&gt;</li>

                                </ul>

                                <p class="p">Set a &lt;new_throughput_value&gt; in
                                        <code class="ph codeph">max-throughput</code> for the provided namespace
                                    between the local system (where tool is run) and remote system
                                    (provided by <code class="ph codeph">-s &lt;remote system&gt;</code>).</p>

                                <ul class="ul" id="dbpreparerewind_tool__ul_tbl_4r2_4qb">
                                    <li class="li">Without -n &lt;namespace&gt;</li>

                                </ul>

                                <p class="p">Set a &lt;new_throughput_value&gt; in
                                        <code class="ph codeph">max-throughput</code> for all the common
                                    namespaces between the local system (where tool is run) and
                                    remote system (provided by <code class="ph codeph">-s &lt;remote
                                        system&gt;</code>).</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-n &lt;namespace&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">Namespace to be rewound.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 ">Values can be:<ul class="ul" id="dbpreparerewind_tool__ul_if1_m4h_1qb">
                                    <li class="li"><code class="ph codeph">dsc</code></li>

                                    <li class="li"><code class="ph codeph">dscglobal</code></li>

                                    <li class="li"><code class="ph codeph">spspd&lt;N&gt;</code>, where <code class="ph codeph">&lt;N&gt;</code>
                                        is a number</li>

                                </ul>
When input for <code class="ph codeph">-n</code> is not provided, the primary
                                partitioned namespace <code class="ph codeph">spspd&lt;N&gt;</code> will be fetched
                                on the local system by default.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-v</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">Display the script version.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e68 "><code class="ph codeph">-f</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e71 ">Disable forwarder from the local system towards the target. </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d12462e74 ">Remote system forwarder to disable</td>

                        </tr>

                    </tbody>
</table>

        </div>

        <div class="section" id="dbpreparerewind_tool__section_tph_y4h_1qb"><h2 class="title sectiontitle">Examples</h2>
            
            <p class="p">This example shows the tool run with options <code class="ph codeph">-s &lt;remote system&gt; -t
                    ?</code>, with <code class="ph codeph">&lt;remote system&gt;</code> as
                <code class="ph codeph">me6</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="dbpreparerewind_tool__codeblock_kc1_wr2_4qb"><code>05:24  INFO: Site name 'me6' exists with site id '6'.
05:24  INFO: Common namespaces between me6 and me5 are : ['dscglobal', 'spspd5', 'spspd6']
05:24  INFO: Getting max-throughput for namespace dscglobal between 'me5' and 'me6'.
05:24  INFO: max-throughput=10000
05:24  INFO: Getting max-throughput for namespace spspd5 between 'me5' and 'me6'.
05:25  INFO: max-throughput=10000
05:25  INFO: Getting max-throughput for namespace spspd6 between 'me5' and 'me6'.
05:25  INFO: max-throughput=10000</code></pre>
            </div>

            <p class="p">This example shows the tool run with options <code class="ph codeph">-s &lt;remote system&gt; -n
                    &lt;namespace&gt; -t ?</code>, with <code class="ph codeph">&lt;remote system&gt;</code> as
                    <code class="ph codeph">me6</code> and <code class="ph codeph">&lt;namespace&gt;</code> as
                    <code class="ph codeph">dscglobal</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="dbpreparerewind_tool__codeblock_xlv_1s2_4qb"><code>05:26  INFO: Site name 'me6' exists with site id '6'.
05:26  INFO: Namespace 'dscglobal' is common between sites 'me5' and 'me6'.
05:26  INFO: Getting max-throughput for namespace dscglobal between 'me5' and 'me6'.
05:26  INFO: max-throughput=10000</code></pre>
            </div>

            <p class="p">This example shows the tool run with options <code class="ph codeph">-s &lt;remote system&gt; -t
                    &lt;new_throughput_value&gt;</code>, with <code class="ph codeph">&lt;remote system&gt;</code> as
                    <code class="ph codeph">me6</code> and <code class="ph codeph">&lt;new_throughput_value&gt;</code> as
                    <code class="ph codeph">5000</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="dbpreparerewind_tool__codeblock_uj5_bs2_4qb"><code>05:29  INFO: Site name 'me6' exists with site id '6'.
05:29  INFO: Number of aerospike nodes: 4
05:29  INFO: Common namespaces between me6 and me5 are : ['dscglobal', 'spspd5', 'spspd6']
05:29  INFO: Setting max-throughput for namespace dscglobal between 'me5' and 'me6'.
05:29  INFO: Max-throughput for namespace 'dscglobal' between 'me5' and 'me6' is set to 5000 successfully.
05:29  INFO: Setting max-throughput for namespace spspd5 between 'me5' and 'me6'.
05:29  INFO: Max-throughput for namespace 'spspd5' between 'me5' and 'me6' is set to 5000 successfully.
05:29  INFO: Setting max-throughput for namespace spspd6 between 'me5' and 'me6'.
05:29  INFO: Max-throughput for namespace 'spspd6' between 'me5' and 'me6' is set to 5000 successfully.</code></pre>
            </div>

            <p class="p">This example shows the tool run with options <code class="ph codeph">-s &lt;system-id or system-name&gt;
                    -n &lt;namespace&gt; -t &lt;new_throughput_value&gt;</code>, with <code class="ph codeph">&lt;remote
                    system&gt;</code> as <code class="ph codeph">me6</code>, <code class="ph codeph">&lt;namespace&gt;</code> as
                    <code class="ph codeph">dscglobal</code>, and <code class="ph codeph">&lt;new_throughput_value&gt;</code> as
                    <code class="ph codeph">10000</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="dbpreparerewind_tool__codeblock_t4x_gs2_4qb"><code>05:32 INFO: Site name 'me6' exists with site id '6'.
05:32 INFO: Namespace 'dscglobal' is common between sites 'me5' and 'me6'.
05:32 INFO: Number of aerospike nodes: 4
05:32 INFO: Setting max-throughput for namespace dscglobal between 'me5' and 'me6'.
05:32 INFO: Max-throughput for namespace 'dscglobal' between 'me5' and 'me6' is set to 10000 successfully.
</code></pre>
            </div>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>