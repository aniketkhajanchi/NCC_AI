<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Introduction" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-cn01-tczza-d1e988" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Introduction</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-cn01-tczza-d1e988">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Introduction</h1>
<div class="body conbody">
        <p class="p">The Connectivity (previously Diameter/HTTP Configuration) application organizes message
            manipulation functionality into application plugins. Each application plugin addresses a
            specific message manipulation scenario that enables in-house implementation of functions
            to quickly and easily address generic message manipulation, as well as specific routing
            use cases. By providing the capability to configure and sequence customized application
            plugins, the routing profile offers the flexibility to tailor a wide range of Diameter
            routing cases for specific and precise scenarios. The following figure illustrates how
            the plugins may appear in NCC at a high level:</p>

        <div class="fig fignone" id="id9yz-09126-cn01-tczza-d1e988__fig_qrd_jrc_qxb"><span class="figcap"><span class="fig--title-label">Figure: </span>Application plugins in NCC</span>
            
            <a href="../images/appplugins1_default.gif" class="image"><img class="image break scalefit" id="id9yz-09126-cn01-tczza-d1e988__image_rrd_jrc_qxb" src="../images/appplugins1_default.gif" /></a>
        </div>

        <p class="p">Application plugins are automatically enabled for fresh installations. A newly installed
            NCC offers capabilities for the following tasks:</p>

        <ul class="ul" id="id9yz-09126-cn01-tczza-d1e988__ul_srd_jrc_qxb">
            <li class="li">Acts as a Diameter Routing Agent (DRA), providing high speed, low latency routing of
                Diameter messages to the correct elements in the network.</li>

            <li class="li">Validates and filters messages based on AVPs.</li>

            <li class="li">Performs shedding of Diameter messages in overload situations.</li>

            <li class="li">Validates incoming messages.</li>

            <li class="li">Creates an allowed list of configured devices or subscribers.</li>

            <li class="li">Routes messages to specific destinations based on a pattern in the destination
                name.</li>

            <li class="li">De-prioritizes degraded routes and re-route to better performing routes.</li>

            <li class="li">Balances routing across a set of configured pools.</li>

            <li class="li">Protects downstream peers and destinations against overload.</li>

            <li class="li">Provides Diameter message tracing functionality.</li>

            <li class="li">Provides internal NCC site routing for Diameter messages.</li>

        </ul>

        <div class="p">The diameter request sequence is as follows:<ul class="ul" id="id9yz-09126-cn01-tczza-d1e988__ul_xsy_515_h5b">
                <li class="li">Throttling</li>

                <li class="li">Ingress</li>

                <li class="li">Overload Protection</li>

                <li class="li">Tracing</li>

                <li class="li">Heartbeat</li>

                <li class="li">Message Validation</li>

                <li class="li">Rule Engine</li>

                <li class="li">4G Canary Routing</li>

                <li class="li">Site Routing</li>

                <li class="li">Diameter to HTTP plugin</li>

                <li class="li">smartrouter, ReTransmit plugin</li>

                <li class="li">PCRF plugin</li>

                <li class="li">SPOCS plugin:</li>

            </ul>
</div>

        <div class="p">The diameter response sequence is as follows:<ul class="ul" id="id9yz-09126-cn01-tczza-d1e988__ul_ehl_3g5_h5b">
                <li class="li">Site Routing</li>

                <li class="li">Tracing</li>

                <li class="li">ReTransmit Plugin</li>

                <li class="li">Rule Engine</li>

            </ul>
</div>

        <div class="p">The http request sequence is set to the following:<ul class="ul" id="id9yz-09126-cn01-tczza-d1e988__ul_gnd_pzt_h5b">
                <li class="li">Rest plugin</li>

                <li class="li">Oauth token plugin</li>

                <li class="li">HTTP message manipulation plugin</li>

                <li class="li">5G Canary Routing plugin</li>

                <li class="li">HTTP site routing plugin</li>

                <li class="li">HTTP to diameter plugin</li>

                <li class="li">NRF plugin</li>

                <li class="li">PCRF plugin</li>

                <li class="li">SPOCS plugin</li>

            </ul>
</div>

        <div class="p">The response sequence is set to the following:<ul class="ul" id="id9yz-09126-cn01-tczza-d1e988__ul_gj2_vzt_h5b">
                <li class="li">Self healing plugin</li>

                <li class="li">HTTP message manipulation plugin</li>

            </ul>
</div>

        <div class="note" id="id9yz-09126-cn01-tczza-d1e988__note_trd_jrc_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The <em class="ph i">Message Tracing Plugin</em> is not enabled by
            default.</div>

        <ol class="ol" id="id9yz-09126-cn01-tczza-d1e988__ol_jbd_4wl_15b">
            <li class="li">To enable NCC to route Diameter messages, configure Diameter peers, routes, and
                application plugins using the Service Manager (SM) GUI.</li>

            <li class="li">As the product is installed, it is not suggested to change the default plug-in
                sequence. You can check default plug-in sequence in charging pod under the
                    <em class="ph i">/opt/tpa/conf/sac/tpa.properties</em> file.</li>

            <li class="li">Site Routing plug-in is used to route request to home site irrespective of a 4G/5G
                call.</li>

            <li class="li">For 4G/5G Initial request, the plug-in will check the device for home site using the
                subscription identifiers present in the request and route the request towards Home
                ME.</li>

            <li class="li">For Update/Terminate request, on the basis of Session Id, it will try to find the
                device from database to route the request towards Home ME. If session details are
                not found, then the plug-in tries to search for Home ME for MSISDN/IMSI, if
                available in the request and then, routes the request.<p class="p"><em class="ph i">(As for the
                        update/Terminate request MSISDN/IMSI is not mandatory.)</em></p>
</li>

        </ol>

        <div class="section" id="id9yz-09126-cn01-tczza-d1e988__section_wny_c1t_h5b"><h2 class="title sectiontitle">Modifying plugin sequence</h2>
            
            <p class="p">Operators can modify the diameter plugin sequence during installation. The
                    <em class="ph i">4G-Canary-Routing</em> and <em class="ph i">Site-Routing</em> plugins can be placed before
                the <em class="ph i">Rule Engine</em> plugin.</p>

            <p class="p">The <em class="ph i">Rule Engine Before Routing Plugins</em> flag is used to control the
                modification of the diameter plugin sequence.</p>

            <p class="p">It is also available in the input-generator excel sheet, ME, IG and EOC tabs.
                Operators can choose to switch the flag in the excel sheet, generate the overrides,
                and perform a helm-upgrade. The helm upgrade does not cause any restarts.</p>

            <p class="p">The helm-upgrade switches a flag in the <em class="ph i">runtime-config</em> configmap which is
                mounted on all NCC pods. The charging pods detect the change dynamically and trigger
                a listener which changes the plugin sequence in the database and starts using the
                updated plugin sequence.</p>

        </div>

<div class="section"><h2 class="title sectiontitle">Connectivity provisioning</h2>
<p class="p">The initial view for each tab in the SM GUI is a list of configured objects for that area. From the list page, you can create a new object, or perform an action (edit, distribute, clone, or delete) an existing one using the buttons on the right side.</p>

<p class="p">After you make an NCC configuration change using the SM, you must send the configuration to NCC
                IGs or MEs in the network using the <strong class="ph b">Publish</strong> button on the list form for the
                change to take effect on NCC. It opens a form where you can choose one or more
                available configurations from one list to a remote item in another list.</p>

<p class="p">For profiles, the typical provisioning flow is:</p>
<ol class="ol">
<li class="li">Create the profile.</li>

<li class="li">Save the profile.</li>

<li class="li">Create a configuration referencing the profile.</li>

<li class="li">Send the configuration to the ME using the <strong class="ph b">Publish</strong> button.</li>

</ol>

<p class="p">Actions appear as you hover the cursor over each line of configured items in the main windows of each menu item. Select one of the following actions as they appear and as applicable:</p>

            <table cellpadding="4" cellspacing="0" summary="" id="id9yz-09126-cn01-tczza-d1e988__table_dkv_rrn_dvb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Actions</span></caption><colgroup><col style="width:16.341829085457274%" /><col style="width:14.992503748125937%" /><col style="width:68.66566716641678%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d22915e302">Icon</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d22915e305">Action</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d22915e308">Description</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e302 "><img class="image" id="id9yz-09126-cn01-tczza-d1e988__image_dr5_35n_dvb" src="../images/icon_details.png" />
                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e305 ">Details</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e308 ">To view the details of the existing configuration.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e302 "><img class="image" id="id9yz-09126-cn01-tczza-d1e988__image_mst_55n_dvb" src="../images/icon_edit.PNG" />
                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e305 ">Edit</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e308 ">To modify the existing configuration. <p class="p">Some entities cannot be
                                    configured after they are activated or distributed.
                                    Configuration that is created as a profile cannot be modified
                                    after they have been distributed. Objects such as routes are
                                    created individually and can be edited.</p>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e302 "><img class="image" id="id9yz-09126-cn01-tczza-d1e988__image_ell_v5n_dvb" src="../images/icon_duplicate.PNG" /></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e305 ">Duplicate</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e308 ">To create a replica of the existing configuration. <p class="p">When you
                                    click this button for an object, a new configuration is created
                                    with identical settings pre-populated and opened for editing.
                                    Fields that are used as a primary identifier, such as
                                    origin-host for a peer or the profile name for any profile, are
                                    not copied to the new configuration. Cloning is supported for
                                    all profile and standalone objects.</p>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e302 "><img class="image" id="id9yz-09126-cn01-tczza-d1e988__image_pdl_k5n_dvb" src="../images/icon_del.png" /></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e305 ">Delete</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e308 ">To delete the existing configuration.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e302 "><img class="image" id="id9yz-09126-cn01-tczza-d1e988__image_nzf_w5n_dvb" src="../images/icon_publish.PNG" /></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e305 ">Publish</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d22915e308 ">To publish the existing configuration.</td>

                        </tr>

                    </tbody>
</table>

            <div class="sectiondiv">
                <p class="p"><strong class="ph b">Provisioning for emergency services</strong></p>

                <p class="p">Using the SM message filters, you can give emergency services related requests
                    priority, even when the system is in a overload state or throttling requests.
                    For example, any request matching the <em class="ph i">Emergency APN</em> AVP could be excluded
                    from throttling. More information about emergency services is available in the
                        <em class="ph i">Global Configuration Guide</em>.</p>

            </div>
</div>

<div class="section"><h2 class="title sectiontitle">Profile-based provisioning</h2>
<p class="p">The Service Manager supports provisioning configuration profiles that group a set of configuration parameters that apply to a feature. The profile can then be distributed and applied to multiple managed entities at the same time. For example, the same configuration can be applied to a group of Diameter peers.</p>

<p class="p">NCC supports profiles for configuring:</p>
<ul class="ul">
<li class="li">Diameter peer connection</li>

<li class="li">Routing</li>

<li class="li">Throttling</li>

<li class="li">System overload protection</li>

<li class="li">Downstream overload protection</li>

<li class="li">Diameter rule system versions</li>

<li class="li">Message Tracing Plugin</li>

</ul>

<p class="p">After being created, a profile must be distributed to an NCC site and activated before it can be
                used by that NCC site. Profiles have an associated state of
                <var class="keyword varname">Draft</var>, <var class="keyword varname">Release</var>, or <var class="keyword varname">Active</var>.
                While being created, a profile is in <var class="keyword varname">Draft</var> state. When it is
                distributed to an NCC, it moves to <var class="keyword varname">Release</var> state. When the
                profile is activated on NCC, it moves to the <var class="keyword varname">Active</var> state.</p>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If a profile is in <var class="keyword varname">Active</var> state, then while it cannot be edited, it can be
                re-distributed. A profile in <var class="keyword varname">Release</var> state can be edited and
                re-distributed. </div>

            <p class="p">A profile is activated on NCC either via assignment of that profile to an NCC
                Diameter peer or to NCC itself at the system level using a configuration object, for
                example a routing configuration for the routing profile.</p>

</div>

</div>
<div class="footer"><hr /><p>Diameter/HTTP Configuration Guide • P556766-DN1000054969-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>