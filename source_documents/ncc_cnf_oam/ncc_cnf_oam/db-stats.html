<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="db-stats" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="db-stats" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>db-stats</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="db-stats">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">db-stats</h1>
<div class="body conbody">
        <div class="section" id="db-stats__section_lnw_l1j_nlb"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">This command displays Aerospike database statistics, including the number of records,
                memory usage, disk usage, local cluster data migration, and cross system data
                replication.</p>

            <p class="p">There is a summary view that would be a typical starting point. There are also more
                verbose views available for drilling further into the per-node statistics.</p>

            <p class="p">This tool can be executed on the admincli pod at any time.</p>

        </div>

        <div class="section" id="db-stats__section_es3_nbj_nlb"><h2 class="title sectiontitle">Syntax</h2>
            
            <div class="p">
                <pre class="pre codeblock"><code>db-stats  -s &lt;set&gt; [-i] [-c] [-v records] [-j] [-o &lt;dir/file&gt;] [-t &lt;timeout in milliseconds&gt;]
db-stats [-v memory|migrate|repl|all] [-j] [-o &lt;dir/file&gt;] [-t &lt;timeout in milliseconds&gt;]
db-stats -l [-j] [-o &lt;dir/file&gt;] [-t &lt;timeout in milliseconds&gt;]</code></pre>
            </div>

            <div class="p">
                <table cellpadding="4" cellspacing="0" summary="" id="db-stats__table_jsw_zbj_nlb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d72174e65">Option</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d72174e68">Description</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">No arguments</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Displays usage/help information.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-h or -?</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Displays usage/help information.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-s &lt;set&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Specifies the set (or table) to display. Alternatively, using
                                    set <code class="ph codeph">all</code> displays statistics for all
                                    sets.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-i</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Include a count of total inactive records
                                    (tombstoned).</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-c</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Include the configuration data sets, in addition to the
                                    service-related sets. This option is applicable only when all
                                    sets are specified. In an IG system, this option must be on to
                                    show service-related sets. When on, both configuration data sets
                                    and service-related data sets are shown.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-l</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Lists Session Counts. The operation may take a while to
                                    complete.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-j</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Output the results in JSON format.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-o &lt;dir/file&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Specifies the output directory and filename for results. This
                                    is written in append mode to enable a periodically-scheduled
                                    running of this command (for example,  daily) to form a
                                    historical view. For the current directory, use
                                        <code class="ph codeph">./&lt;file&gt;</code></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-v &lt;stat_type&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">
                                    <p class="p">Verbose mode for a given stat type, showing stats for each
                                        node in the database cluster.</p>

                                    <p class="p">Note: For large database clusters, the verbose output may be
                                        quite long.</p>

                                    <div class="p">Stat type may be:<ul class="ul" id="db-stats__ul_yz3_dgj_nlb">
                                            <li class="li"><code class="ph codeph">records</code>: Record counts. When this
                                                stat type is used, the -s &lt;set&gt; is also
                                                required.</li>

                                            <li class="li"><code class="ph codeph">memory</code>: Memory and disk usage.</li>

                                            <li class="li"><code class="ph codeph">migrate</code>: Local cluster data
                                                migration.</li>

                                            <li class="li"><code class="ph codeph">repl</code>: Cross site data
                                                replication.</li>

                                            <li class="li"><code class="ph codeph">all</code>: All of the above stat types,
                                                for -s all.</li>

                                        </ul>
</div>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e65 "><code class="ph codeph">-t &lt;timeout&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d72174e68 ">Specifies the socket timeout in milliseconds. It is used for
                                        <code class="ph codeph">asInfo</code> command. <p class="p">Default:
                                    2000</p>
</td>

                            </tr>

                        </tbody>
</table>

            </div>

        </div>

        <div class="section" id="db-stats__section_yzj_nrj_nlb"><h2 class="title sectiontitle">Example: Normal default db-stats (summary mode)</h2>
            
            <p class="p">This example shows the default summary view of the database statistics. If any stats
                look unusual, another db-stats command can be run in verbose mode for the given
                stats type. Here, the system on which the tool is run is hosting
                    <code class="ph codeph">spspd4</code>, <code class="ph codeph">spspd5</code>, and <code class="ph codeph">spspd6</code> as
                primary, secondary, and tertiary partitions, respectively.</p>

            <div class="p">
                <pre class="pre codeblock"><code>Date: Wed May 19 12:27:57 IST 2021
db-stats -s all		 2021-05-19 12:28:02

DB CLUSTER INFO
-------------------------
Total DB nodes:         4
DB nodes responding:    4

ACTIVE RECORDS SUMMARY
----------------------
Set                        Total   spspd4   spspd5   spspd6
-----------------------------------------------------------
AccountBalance_account         0        0        0        0
Device_owner                   0        0        0        0
Device_subscriptions           0        0        0        0
DeviceCustomData_device        5        5        0        0
DynamicData                    5        5        0        0
GyClientSession                0        0        0        0
InfrequentlyChangingData       5        5        0        0
NotificationTracker            0        0        0        0
PendingTransactionMap          0        0        0        0
..
..
DB MEMORY AND DISK
--------------------
NameSpace                     Total Mem (MB)   Free Mem (%)   Total Disk (MB)   Free Disk (%)
---------------------------------------------------------------------------------------------
dsclocal      	Min reported   340                        98             2,040              99
              	Max reported   340                        98             2,040              99
spspd6        	Min reported   100                        99               600             100
              	Max reported   100                        99               600             100
dscglobal     	Min reported   340                        99             2,040              99
              	Max reported   340                        99             2,040              99
dsc           	Min reported   340                        99             2,040              99
              	Max reported   340                        99             2,040              99
spspd5        	Min reported   100                        99               600             100
              	Max reported   100                        99               600             100
spspd1        	Min reported   100                        99               600              99
              	Max reported   100                        99               600              99
spsundologs   	Min reported   10                        100                 0               0
              	Max reported   10                        100                 0               0
..
..
</code></pre>
            </div>

        </div>

        <div class="section" id="db-stats__section_jzn_syq_cmb"><h2 class="title sectiontitle">Example: Include inactive record counts</h2>
            
            <div class="p">
                <pre class="pre codeblock"><code>db-stats -s all -i
Date: Thu Oct 29 17:40:46 UTC 2020
db-stats -s all -i		 2020-10-29 17:40:49 


DB CLUSTER INFO
-------------------------
Total DB nodes:         4
DB nodes responding:    4

ACTIVE RECORDS SUMMARY
----------------------
Set                        Total   spspd1
-----------------------------------------
GyClientSession                0        0
InfrequentlyChangingData       0        0
PendingTransactionMap          0        0
SessionContainer               0        0
SiteSyncIdMapping              1        1
TEMEntity                      1        1
TEMEntityPayload               1        1

Set (in namespace: dscglobal)   Total
-------------------------------------
CEGroup                             0
CEGroupState                        0
CESubscriber                        0
CESubscriberRelations               0
CESubscriberState                   0
DiameterIdentity                    1
DiameterPeer                        0

Set (in namespace: spsundologs)   Total
---------------------------------------
TxMetadata                            0


INACTIVE (TOMBSTONE) RECORDS SUMMARY
------------------------------------
Set                        Total   spspd1
-----------------------------------------
GyClientSession                0        0
InfrequentlyChangingData       0        0
PendingTransactionMap          0        0
SessionContainer               0        0
SiteSyncIdMapping              0        0
TEMEntity                      0        0
TEMEntityPayload               0        0

Set (in namespace: dscglobal)   Total
-------------------------------------
CEGroup                             0
CEGroupState                        0
CESubscriber                        0
CESubscriberRelations               0
CESubscriberState                   0
DiameterIdentity                    0
DiameterPeer                        0

Set (in namespace: spsundologs)   Total
---------------------------------------
TxMetadata                            0


DB MEMORY AND DISK
--------------------
NameSpace                     Total Mem (MB)   Free Mem (%)   Total Disk (MB)   Free Disk (%)
---------------------------------------------------------------------------------------------
dsclocal      	Min reported   400                        99             2,400              99
              	Max reported   400                        99             2,400              99
dscglobal     	Min reported   320                        99             1,920             100
              	Max reported   320                        99             1,920             100
dsc           	Min reported   200                        98             1,200              99
              	Max reported   200                        98             1,200              99
spspd1        	Min reported   480                        99             2,880              99
              	Max reported   480                        99             2,880              99
spsundologs   	Min reported   200                       100                 0               0
              	Max reported   200                       100                 0               0


LOCAL CLUSTER DATA MIGRATION 
------------------------------
Migration in progress   NO


CROSS SITE DATA REPLICATION
-----------------------------
N/A, no cross data center replication has been configured
</code></pre>
            </div>

        </div>

        <div class="section" id="db-stats__section_rkc_5yq_cmb"><h2 class="title sectiontitle">Example: Include the local system/configuration data</h2>
            
            <div class="p">
                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The -c option must be included in the “db-stats -s all -c” command to make the
                    information viewable.</div>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                    <div class="p">This example uses the -c
                        flag.<pre class="pre codeblock"><code>Date: Thu Oct 29 17:40:49 UTC 2020
db-stats -s all -c		 2020-10-29 17:40:52 


DB CLUSTER INFO
-------------------------
Total DB nodes:         4
DB nodes responding:    4

ACTIVE RECORDS SUMMARY
----------------------
Set                        Total   spspd1
-----------------------------------------
GyClientSession                0        0
InfrequentlyChangingData       0        0
PendingTransactionMap          0        0
SessionContainer               0        0
SiteSyncIdMapping              1        1
TEMEntity                      1        1
TEMEntityPayload               1        1

Set (in namespace: dscglobal)   Total
-------------------------------------
CEGroup                             0
CEGroupState                        0
CESubscriber                        0
CESubscriberRelations               0
CESubscriberState                   0
DiameterIdentity                    1
DiameterPeer                        0

Set (in namespace: spsundologs)   Total
---------------------------------------
TxMetadata                            0

Set (in namespace: dsc)               Total
-------------------------------------------
AppRegistration                           0
AppleServerRegistration                   0
AuditBatchAssignment                      0
AuditScheduler                            0
CampaignCounterExtension                  0
CampaignCounterPool                       0
CampaignSubscriberCount                   0
ChLogCategory                             0
ChRuleComponent                           0
ComMetric                                 0
CommonCountableEvent                      0
CommonCountableEventTotal                 0
CounterInstance                           0
CreditRequestProfile                      1
CustomAcknowledgement                     0
CustomAudience                            0
CustomAudienceError                       0
CustomAudienceProvisioningStatus          0
DDMIndexedStrKey                          0
DeviceRegistration                        0
DiamRouteDeprioritization                 0
NASCluster                                0
NASProfile                                0
NotifAppData                              0
NotificationJobs                          0
NotificationTracker                       0
OCSDiameterPeer                           0
PnDEvtConsump                             0
RadiusHostCluster                         0
SmAPConfigurationForPeersGroup            0
SmAPIHandlerPolicy                        0
SmAccount                                 0
SmAggregateView                           0
SmAppPreference                          10
SmAppleServerRegistration                 0
SmArmingPolicy                            0
SmBackgroundTaskStatus                    0
SmBillCycleCalendar                       0
SmBucket                                  0
SmBundle                                  0
SmCDRMapping                              1
SmCEGroup                                 0
SmCEGroupState                            0
SmCEPropertyFile                          6
SmCESubscriber                            0
SmCESubscriberState                       0
SmCHFInfo                                 0
SmCampaign                                0
SmCampaignSelectionRule                   0
SmCap                                     0
SmCategoryOrder                           1
SmChargingRules                           1
SmChargingService                         0
SmChargingStep                            0
SmComplexMapDefinition                    0
SmComplexMapEntry                         0
SmCounter                                 3
SmCustomData                              1
SmDevice                                  0
SmDiamPeerAddrGrpCfg                      3
SmDiameterPeerConfig                      0
SmDiameterPeerWhiteList                   1
SmDiameterRules                           2
SmDiscount                                0
SmDownstreamOverloadConfig                0
SmDownstreamOverloadProfile               0
SmESMCustomData                           0
SmESMTaskItems                            0
SmESMTemplate                             0
SmEmailServer                             0
SmExecutionFlow                           0
SmExtSystemRef                            0
SmExternalBalanceManager                  0
SmExternalSystem                          0
SmGlobalList                              0
SmGoogleServer                            0
SmGroup                                   0
SmHomeNetworkInfo                         0
SmHostDestinationRouteConfig              0
SmKafkaServer                             0
SmLifeCycle                               7
SmMEGroup                                 0
SmManagedElement                          1
SmMessageValidationConfig                 0
SmNFDiscoveryQuery                        0
SmNFProfile                               0
SmNFSelector                              0
SmNFService                               0
SmNFSubscription                          0
SmNRFServer                               0
SmNotificationLanguage                    1
SmNotificationProfile                     2
SmNotificationTemplate                    4
SmOperator                                1
SmOverloadProtectionConfig                1
SmOverloadSheddingProfile                 0
SmPCFInfo                                 0
SmPeerConnectionProfile                   0
SmPeerGroup                               0
SmPnDRules                                1
SmPolicyRules                             1
SmPricePlan                               0
SmPricePlanMap                            0
SmPrivateProfile                          0
SmRSExternalSystem                        0
SmRSRules                                 1
SmRadiusServer                            0
SmRate                                    0
SmReloadStatus                            0
SmReportService                           3
SmRestServer                              0
SmRetryConfig                             0
SmRole                                    1
SmRouteQualityProfile                     0
SmRoutingConfig                           0
SmRoutingPluginConfig                     0
SmRoutingProfile                          0
SmService                                 0
SmServiceCategory                         0
SmServiceOfferSelectionRule               0
SmServiceTag                              0
SmServiceThresholdPolicy                  0
SmSiteRoutingProfile                      0
SmSlicingProfile                          0
SmSmppServer                              0
SmSoapServer                              0
SmSubscriberEntityCount                   0
SmTCPServer                               0
SmTaxation                                0
SmTcpInboundServerConfig                  0
SmTcpIpOutboundServer                     0
SmThresholdProfile                        3
SmThresholdProfileGroup                   0
SmThrottlingConfig                        0
SmThrottlingProfile                       0
SmTracingProfile                          0
SmTrigger                                 0
SmTriggerMap                              0
SmTriggerPricePlanMapKeys                 2
SmUCService                               0
SmUnit                                   12
SmUnknownSubscriberTemplate               0
SmUsageControlService                     0
SmUser                                    0
SmWhiteList                               0
SocialCampaignError                       0
SocialCampaignProvisioningStatusPar       0
SpsHomeNetworkInfo                        1
SpsRoamingAgreements                      1
SpsRoamingPartners                        1
SubscriberDevice                          0
SubscriberUser                            0
TcpConfiguration                          0
TcpCustomMessageSequence                  0
ToolsConfig                               1
TurboBoostSessionPar                      0
WhiteListPricePlan                        0
WhiteListSubscriber                       0
ZoningAndRoamingMapping                   0

Set (in namespace: dsclocal)            Total
---------------------------------------------
APConfigurationForPeersGroup                0
APIPolicy                                   0
AccountPolicy                               0
AggregateView                               0
AndroidServer                               0
AppleServer                                 0
ArmingPolicy                                0
BillCycleCalendar                           0
Bucket                                      0
Bundle                                      0
CDRMapping                                  1
CEPropertyFile                              6
CHFInfo                                     0
Campaign                                    0
CampaignSelectionRule                       0
CampaignTemplate                            0
CampaignTrigger                             0
CategoryOrder                               1
ChargingRuleSystemVersion                   1
ChargingService                             0
ChargingStep                                0
CommonCountableEventConfigContainer         1
CommonCpuUsageThresholdsProfile             1
CommonOverloadConfig                        1
Counter                                     3
CustomDataDictionary                        0
DBClientMonitorRecord                      16
DDMGBStrKeyProvision                        0
DDMGlblVarCfg                               1
DDMLBConfig                                 1
DDMPluginsCfgCont                           2
DDMRuleSystemVersion                        2
DbChgNotifSubs                              1
DdmappsDownstreamOverloadConfig             1
DdmappsDownstreamOverloadProfile            0
DdmappsMsgValidationConfig                  1
DdmappsOverloadProtectionConfig             1
DdmappsOverloadSheddingProfile              0
DdmappsRoutingConfig                        1
DdmappsRoutingProfile                       0
DdmappsThrottlingConfig                     1
DdmappsThrottlingProfile                    0
DdmappsTracingProfile                       0
DestMonitorConfig                           0
DiamClientCfg                               4
DiamPeerAddrGrpCfg                          1
DiamPeerCfg                                 1
DiamPeerConnectionProfile                   0
DiamPeerStatus                            789
DiamRouteCfg                                1
DiamRouteProfile                            1
DiameterConfig                              1
DiameterLatencyThresholdsProfile            1
DiameterMessageCountThresholdsProfile       1
Discount                                    0
EmailServer                                 0
EntityCommonTemplate                        0
EventListener                               5
ExecutionFlow                               0
ExtSystemRef                                0
ExternalSystem                              0
GlobalList                                  0
HostRouteCfg                                1
HttpPluginsCfgCont                          2
Job                                         0
KafkaNotificationServer                     0
LifeCycle                                   7
LifeCycleRuleSystemVersion                  1
LifeCycleState                             16
LifeCycleTransition                        24
MediaIdMSISDN                               0
NFDiscoveryQuery                            0
NFProfile                                   0
NFRegStatus                                 0
NFSelector                                  0
NFService                                   0
NFSubStatus                                 0
NFSubscription                              0
NRFServer                                   0
NotificationLanguage                        1
NotificationProfile                         2
NotificationTemplate                        4
PCFInfo                                     0
PCRFRuleSystemVersion                       1
PeerGroup                                   0
PnDEventConfig                              0
PnDRuleSystemVersion                        1
PricePlan                                   0
PricePlanMapPricePlan                       0
PricePlanMapping                            0
PrivateProfile                              0
RSRuleSystemVersion                         1
RadiusServerCfg                             0
Rate                                        0
Report                                      3
RestServer                                  0
RetryConfig                                 0
Service                                     0
ServiceCategory                             0
ServiceOfferSelectionRule                   0
ServiceTag                                  0
ServiceThresholdPolicy                      0
SitesForcedInService                        1
SlicingProfile                              0
SmMEStatus                                  1
SmPnDEventConfig                            0
SmppServer                                  0
SoapServer                                  0
TCPInboundServerConfig                      0
TCPServer                                   0
TPASystem                                   1
TPAUser                                     1
TPAUserRole                                 1
TRScheProg                                  1
Taxation                                    0
TcpIpOutbound                               0
ThresholdProfileGroup                       0
TimePeriod                                  0
TimedNotifications                          0
TimedNotificationsBucket                    0
Trigger                                     0
TriggerMapTrigger                           0
TriggerMapping                              0
TriggerPricePlanMapKeys                     2
TriggerScheduler                            0
TypeConverter                               7
UCService                                   0
UnitType                                   12
UsageControlService                         0
WLArmingData                                0
WhiteList                                   0


DB MEMORY AND DISK
--------------------
NameSpace                     Total Mem (MB)   Free Mem (%)   Total Disk (MB)   Free Disk (%)
---------------------------------------------------------------------------------------------
dsclocal      	Min reported   400                        99             2,400              99
              	Max reported   400                        99             2,400              99
dscglobal     	Min reported   320                        99             1,920              99
              	Max reported   320                        99             1,920              99
dsc           	Min reported   200                        98             1,200              99
              	Max reported   200                        98             1,200              99
spspd1        	Min reported   480                        99             2,880             100
              	Max reported   480                        99             2,880             100
spsundologs   	Min reported   200                       100                 0               0
              	Max reported   200                       100                 0               0


LOCAL CLUSTER DATA MIGRATION 
------------------------------
Migration in progress   NO


CROSS SITE DATA REPLICATION
-----------------------------
N/A, no cross data center replication has been configured
</code></pre></div>

                </div>

            </div>

        </div>

        <div class="section" id="db-stats__section_gwt_1zq_cmb"><h2 class="title sectiontitle">Example: Verbose mode for “records” stat type, for all sets</h2>
            
            <div class="p">This example shows a verbose view of the total records on each database node. The
                record counts are for all data sets in the “dscglobal” namespace and the various
                “spspd” namespaces.<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <code class="ph codeph">db-stats -v records -s all -c</code> is not
                    supported by the db-stats tool where the ‘c’ option is used to list local
                    configuration data
                records.</div>
<pre class="pre codeblock"><code>db-stats -v records -s all		 2020-10-29 17:40:54 


DB CLUSTER INFO
-------------------------
Total DB nodes:         4
DB nodes responding:    4

ACTIVE RECORDS SUMMARY FOR SET:  all


Grp   Node                                                             Total   dscglobal   spsundologs   spspd(all)
-------------------------------------------------------------------------------------------------------------------
2     ig-aerospike-0.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
1     ig-aerospike-3.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
1     ig-aerospike-1.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
2     ig-aerospike-2.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
-------------------------------------------------------------------------------------------------------------------
      Total                                                            0               0             0            0


network-status
Software Version: SPS_20_9_R1 (SPS_20_9_I150)
Date: Thu Oct 29 17:40:54 UTC 2020

Local Status:
Component [SM] Service Status [IN_SERVICE]
Component [ME] Service Status [IN_SERVICE]


</code></pre></div>

        </div>

        <div class="section" id="db-stats__section_qly_dzq_cmb"><h2 class="title sectiontitle">Example: Verbose mode for records stat type, for a specific set in dscglobal
                namespace</h2>
            
            <div class="p">This example shows a verbose view of the total records on each database node. The
                record counts are for one specific data set in the “spspd” namespaces. There can be
                from 1 to 5 of the spspd namespaces, depending on the network deployment
                configuration.<pre class="pre codeblock"><code>db-stats -v records -s clubDynamic

DB CLUSTER INFO
-------------------------
Total DB nodes:         4
DB nodes responding:    4

ACTIVE RECORDS SUMMARY FOR SET: clubDynamic
Grp   Node                                                             Total   dscglobal   spsundologs   spspd(all)
-------------------------------------------------------------------------------------------------------------------
2     ig-aerospike-0.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
1     ig-aerospike-3.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
1     ig-aerospike-1.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
2     ig-aerospike-2.ig-aerospike-service.sps-btel.svc.cluster.local   0               0             0            0
-------------------------------------------------------------------------------------------------------------------
      Total                                                            0               0             0            0


network-status
Software Version: SPS_21_0_R1 (SPS_21_0_I82)
Date: Thu Oct 29 17:40:54 UTC 2020

Local Status:
Component [SM] Service Status [IN_SERVICE]
Component [ME] Service Status [IN_SERVICE]</code></pre></div>

        </div>

        <div class="section" id="db-stats__section_j1f_xbb_wnb"><h2 class="title sectiontitle">Example output overview</h2>
            
            <div class="p">This list explains the output of db-stats:<ul class="ul" id="db-stats__ul_fns_jgj_nlb">
                    <li class="li"><code class="ph codeph">Record count summary:</code> Every record appears in the system
                        two times (replication factor is two). The total unique record counts shown
                        take this into account, and divides the total record counts by the
                        replication factor to display a total unique record count.</li>

                    <li class="li">
                        <p class="p"><code class="ph codeph">Namespace:</code> The record count summary has column headings
                            for the namespace of the various data sets.</p>

                        <div class="p">Namespaces have these meanings:<ul class="ul" id="db-stats__ul_mwd_ngj_nlb">
                                <li class="li"><code class="ph codeph">spspd&lt;id&gt;:</code> This namespace contains the <span class="ph">NCC</span> ME partitioned data that is
                                    replicated to one other <span class="ph">NCC</span> ME
                                    subsystem in the network. Each namespace is replicated to a
                                    different <span class="ph">NCC</span> system. In case the
                                    system is hosting multiple partitions, the partitioned namespace
                                    will be ordered as primary, secondary, and tertiary.</li>

                                <li class="li"><code class="ph codeph">dscglobal:</code> Data in this namespace is replicated
                                    to all other <span class="ph">NCC</span> ME subsystems in
                                    the network. This namespace includes routing/mapping data for
                                    locating the Home <span class="ph">NCC</span> ME for any
                                    given record.</li>

                                <li class="li"><code class="ph codeph">dsclocal:</code> Data in this namespace is configured
                                    locally on this <span class="ph">NCC</span> and is not
                                    replicated to any other <span class="ph">NCC</span>
                                    sites.</li>

                                <li class="li"><code class="ph codeph">sps:</code> Data in this namespace is configured on
                                    the SM subsystem and pushed to <span class="ph">NCC</span>
                                    ME subsystems. It is not replicated to any other <span class="ph">NCC</span> systems. </li>

                            </ul>
</div>

                    </li>

                    <li class="li"><code class="ph codeph">Unknown:</code> If a database node does not respond to the
                        statistics query, its status is displayed as Unknown. When this happens, the
                        unique record count totals are only approximate.</li>

                    <li class="li"><code class="ph codeph">Grp:</code> Database nodes are grouped into two groups, with one
                        copy of each record existing in Group 1 and the other copy in Group 2.</li>

                    <li class="li"><code class="ph codeph">Data migration:</code> When a database node cluster changes (for
                        example, a database node fails, or a database node recovers, or a database
                        node is grown into the system), the database may initiate automatic
                        migration of replicated partitions amongst the database nodes in this local
                        system to maintain the replication factor and the balance across nodes.
                        During this migration period, the unique record count totals are only
                        approximate and are likely underestimated.</li>

                    <li class="li"><code class="ph codeph">Data migration, Xmit:</code> Total number of partitions pending to
                        be sent out to others from this node. Will be 0 in a normal steady
                        state.</li>

                    <li class="li"><code class="ph codeph">Data migration, Rcv:</code> Total number of partitions being
                        received from other nodes at this moment. Will be 0 in a normal steady
                        state.</li>

                    <li class="li"><code class="ph codeph">Total Unique Records:</code> The number of unique records, which
                        in a normal system in steady state, is equal to the total records divided by
                        the replication factor. (For example, if there are 1,000 total records and
                        the replication factor is 2, then the actual number of unique records is
                        500, with there being 2 copies of each record).</li>

                    <li class="li"><code class="ph codeph">Active Records:</code> The number of unique active records. Active
                        records are the only ones that are visible and accessible to provisioning
                        and application processing. (Active records are those that have not been
                        recently deleted and therefore do not have any temporary tombstone records
                        remaining in the database).</li>

                    <li class="li"><code class="ph codeph">Inactive Records:</code> The number of unique inactive records.
                        These are records which have been deleted but for which a tombstone remains
                        in the system.</li>

                    <li class="li">
                        <p class="p"><code class="ph codeph">Cross site data replication:</code> This is the replication of
                            data across <span class="ph">NCC</span> systems in the network
                            deployment. Various metrics are reported for this replication,
                            including:</p>

                        <div class="p"><code class="ph codeph">Metrics per remote data center:</code><ul class="ul" id="db-stats__ul_rss_brj_nlb">
                                <li class="li"><code class="ph codeph">State of the remote DC:</code> Values can include UP,
                                    DOWN, INACTIVE, or WINDOW_SHIP.</li>

                                <li class="li"><code class="ph codeph">In flight:</code> Number of records that are in flight
                                    (which have been shipped but for which a response from the
                                    remote DC has not yet been received).</li>

                                <li class="li"><code class="ph codeph">Ship ok (K):</code> Number of records that have been
                                    successfully shipped, in thousands.</li>

                                <li class="li"><code class="ph codeph">Ship err dest:</code> Number of errors from the remote
                                    destination cluster(s) while shipping records for this DC.
                                    Errors include out-of-space, key-busy, and so on.</li>

                                <li class="li"><code class="ph codeph">Ship err src:</code> Number of client layer errors
                                    while shipping records for this DC. Errors include timeout, bad
                                    network fd, and so on.</li>

                                <li class="li"><code class="ph codeph">Ship (MB):</code> Number of Megabytes successfully
                                    shipped.</li>

                                <li class="li"><code class="ph codeph">Time lag:</code> Time lag for this specific DC. The
                                    timelag represents the time (in seconds) it took the latest
                                    successfully shipped record from the moment it was first written
                                    at the source until it was successfully shipped to the
                                    destination cluster. Another way of saying this is the
                                    difference between the current time and the times stamp of the
                                    record which was last successfully shipped. When having multiple
                                    destination DCs, this represents the maximum time lag across all
                                    those remote DCs. Under normal operations, though, the timelag
                                    for each DC will be the same, given that the database ships
                                    records in lock-step. The timelag at each DC would be different
                                    when a DC is down or in the CLUSTER_WINDOW_ SHIP state.</li>

                                <li class="li"><code class="ph codeph">Avg latency:</code> Moving average latency in
                                    milliseconds to ship a record to remote <span class="ph">NCC</span> systems.</li>

                            </ul>
</div>

                    </li>

                </ul>

            </div>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>