<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Transaction and rollback in the NCC Gy interface" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-cn01-tczza-d1e17861" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Transaction and rollback in the NCC Gy interface</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-cn01-tczza-d1e17861">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Transaction and rollback in the NCC Gy interface</h1>
<div class="body conbody">
                                <p class="p">NCC uses the transaction manager service to facilitate resource
      access. In NCC module, SPOCSPlugin receives the Diameter request and passes on this message to
      CommandDispatcher for processing. All the tasks are executed in a single thread based on
      request type. If the request type is GY, then the task begins in same thread else thread pool
      is used. After processing the request, rollback conditions must be checked, which can be
      either transaction timeout or error scenarios. If the transaction mark is rollback, then
      transaction rollback is executed. Otherwise, the transaction is committed.</p>

                                <p class="p">Rollback can be handled for following cases:</p>

                                <ul class="ul" id="id9yz-09126-cn01-tczza-d1e17861__ul_wrw_snn_qxb">
                                                <li class="li">
                                                  <p class="p">
                                                  <span class="ph uicontrol">Transaction timeout</span>: The
                                                  UserTransaction interface is used to begin
                                                  transaction. It provides a method to set timeout
                                                  value in user transaction considered to be 10
                                                  milliseconds less than the request timeout. If the
                                                  request process time is more than the transaction
                                                  timeout, then the Diameter stack sends out the
                                                  response as
                                                  <var class="keyword varname">DIAMETER_TOO_BUSY</var>.</p>

                                                </li>

                                                <li class="li">
                                                  <p class="p">
                                                  <span class="ph uicontrol">Error scenarios</span>: In case of
                                                  transaction rollback due to the failure scenarios,
                                                  rollback is done only for 5xx response received
                                                  from application. In such cases, CDR is generated
                                                  per the error scenario and CCA is constructed
                                                  correctly. </p>

                                                </li>

                                                <li class="li">
                                                  <p class="p">
                                                  <span class="ph uicontrol">Exception while committing or
                                                  rollback</span>: If an exception occurs
                                                  during rollback and commit transaction, then the
                                                  call control sends a response
                                                  <var class="keyword varname">DIAMETER_UNABLE_TO_COMPLY</var> in
                                                  CCA. CDR is generated as error and MSCC AVP is
                                                  removed from CCA.</p>

                                                </li>

                                </ul>

</div>
<div class="footer"><hr /><p>Diameter/HTTP Configuration Guide • P556766-DN1000054969-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>