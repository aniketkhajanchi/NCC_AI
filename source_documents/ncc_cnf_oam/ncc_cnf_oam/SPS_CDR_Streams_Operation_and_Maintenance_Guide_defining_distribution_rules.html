<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Defining distribution rules" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Defining distribution rules</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Defining distribution rules</h1>
<div class="body conbody">
        <p class="p">To create or modify distribution rules, update these lookup tables: </p>

        <ul class="ul" id="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__ul_otg_2wn_nnb">
            <li class="li">Distr Rules: Defines how distribution splitting is done. For default values of the
                optional fields, see <a class="xref" href="SPS_CDR_Streams_Operation_and_Maintenance_Guide_default_distribution_rules.html#SPS_CDR_Streams_Operation_and_Maintenance_Guide_default_distribution_rules">Default distribution rules</a>.</li>

            <li class="li">Outputs: Details where and how to send output.</li>

            <li class="li">Output Options: Defines additional options for outputs.</li>

        </ul>

        <table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Columns in ‘Distr Rules’ lookup table</span></caption><colgroup><col style="width:16.666666666666664%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:16.666666666666664%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e63">Column name</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e66">Description</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e69">Valid value</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e72">Optional</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e63 ">Rule Priority</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e66 ">All rules must have a unique numeric value so that records matching
                            multiple rules will be evaluated deterministically.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e69 ">
                            <p class="p">Unique integer value.</p>

                            <p class="p">A lower value indicates a higher priority. Rules are evaluated in
                                priority order.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e72 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e63 ">Rule Criteria</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e66 ">List of criteria, all of which must be true for the record to match
                            this file group.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e69 ">Comma-separated list of unique Criteria IDs as defined in the 'Split
                            Criteria' lookup table.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e72 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e63 ">Rule Outputs</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e66 ">Output details for this rule.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e69 ">Comma-separated list of unique Output IDs as defined in the 'Outputs'
                            lookup table.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e72 ">Yes - if no outputs are defined, no output is written. Also, if a
                            dash (-) is used in the column, all of the files that follow this rule
                            are discarded. </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e63 ">Rule Disabled</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e66 ">
                            <p class="p">Defines how a distribution rule is handled.</p>

                            <p class="p">If set to 'Y', the rule is ignored, and no records are checked
                                against it.</p>

                            <p class="p">If set to 'N', the rule is used for evaluation normally.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e69 ">Y, N</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e72 ">No - the default value is N.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e63 ">Description</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e66 ">Free-form text field used to describe the file group. Not used for
                            data processing purposes.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e69 ">Free text.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e72 ">Yes</td>

                    </tr>

                </tbody>
</table>

        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
            <p class="p">Because Charging Gateway Function does not support empty values, they must be
                specified using the dash (-) character instead.</p>

        </div>

        <table cellpadding="4" cellspacing="0" summary="" id="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__table_wpx_4pn_nnb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Columns in 'Outputs' lookup table</span></caption><colgroup><col style="width:16.666666666666664%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:16.666666666666664%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e198">Column name</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e201">Description</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e204">Valid value</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e207">Optional</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Output ID</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">The ID for this output (reference this in 'Distr Rules' lookup
                            table).</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">Any unique string.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Output Type</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">The type of this output. Based on this value, outputs can be disabled
                            by type. </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 "> FILE, KAFKA</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Output Stream</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">
                            <p class="p">Defines which output stream(s) should handle this output.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">KAFKA_OUTPUT, FILE_OUTPUT</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Destination</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">Destination for output (for example, target directory or Kafka
                            topic).</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">
                            <p class="p">For example:</p>

                            <p class="p"> "Sub1/Type1" for file output</p>

                            <p class="p">"test_topic" for Kafka output</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Records Per Batch</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">
                            <p class="p">Maximum number of records per output batch. A new batch is created
                                for the output stream to process when the maximum number is reached
                                or when Seconds Per Batch is reached.</p>

                            <p class="p">For file output this corresponds directly to the maximum number of
                                records per output file.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">Any positive integer (&gt;=1)</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Seconds Per Batch</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">Maximum wait time (seconds) before creating a new output batch for
                            the output stream to process.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">Any positive integer (&gt;=1)</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Failure Directory</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">
                            <p class="p">Output directory for failure log (used if normal output fails).</p>

                            <p class="p">The configured directory is used by the Log distributor stream to
                                store the failure logs to the given location.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">
                            <p class="p">For example:</p>

                            <p class="p"> "Sub1/Type1_fail" </p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Failure Identifier</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">
                            <p class="p">Output identifier for failure log (used if normal output fails).</p>

                            <p class="p">The configured output identifier is used by the Log distributor
                                stream to store the failure logs with the given suffix.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">.cdr</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e198 ">Options</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e201 ">Additional options for output (See <a class="xref" href="#SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__table_o5c_qpn_nnb">Columns in 'Output Options' lookup table</a>).</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e204 ">Comma-separated list of unique Option IDs as defined in the 'Output
                            Options' lookup table. </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e207 ">Yes</td>

                    </tr>

                </tbody>
</table>

        <table cellpadding="4" cellspacing="0" summary="" id="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__table_o5c_qpn_nnb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Columns in 'Output Options' lookup table</span></caption><colgroup><col style="width:16.666666666666664%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:16.666666666666664%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e414">Column name</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e417">Description</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e420">Valid value</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e423">Optional</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e414 ">Option ID</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e417 ">The ID for this Output option (reference this in 'Outputs' lookup
                            table.)</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e420 ">Any unique string.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e423 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e414 ">Key</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e417 ">The key for this option.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e420 "><p class="p">Depending on the output type. </p>
See <a class="xref" href="#SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__table_pcl_fmb_qnb">Supported options for file output</a>. <p class="p">There are no supported options for Kafka output
                                currently.</p>
</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e423 ">No</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e414 ">Value</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e417 ">The value for this option.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e420 ">Any free string.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e423 ">No</td>

                    </tr>

                </tbody>
</table>

        <table cellpadding="4" cellspacing="0" summary="" id="SPS_CDR_Streams_Operation_and_Maintenance_Guide_defining_distribution_rules__table_pcl_fmb_qnb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Supported options for file output</span></caption><colgroup><col style="width:25%" /><col style="width:50%" /><col style="width:25%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e504">Key</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e507">Description</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d73818e510">Value</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e504 ">outputIdentifier</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e507 ">Used in forming output file names.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e510 ">
                            <p class="p">Any string value.</p>

                            <p class="p">Example: .EDR.LFC</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e504 ">sequenceId</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e507 ">File groups with the same Sequence ID share the file sequence
                            numbering.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d73818e510 ">Any string value.</td>

                    </tr>

                </tbody>
</table>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>