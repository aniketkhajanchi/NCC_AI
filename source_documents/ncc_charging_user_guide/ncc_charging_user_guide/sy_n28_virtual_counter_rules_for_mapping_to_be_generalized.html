<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Generalized Sy-N28 virtual counter/rules for mapping" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Generalized Sy-N28 virtual counter/rules for mapping</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Generalized Sy-N28 virtual counter/rules for mapping</h1>
<div class="body conbody">
        <div class="section" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__section_th3_mmz_svb">
            <p class="p">The Support Virtual PC sends an SNR based on various conditions and configuration
                where the customer needs to have a de-associated definition of the virtual policy
                counters with one bundle and one lifecycle. </p>

            <p class="p">This feature is applicable to:</p>

            <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_uvw_55h_tvb">
                <li class="li">Bundle subscriptions / BOU bundles, multiple subscriptions</li>

                <li class="li">The LC operations like removal, renew, subscription is supported (configurable)
                    to send the correct PC name and status or multiple PC names and statuses</li>

                <li class="li">The virtual PC must be available for subscription counters/buckets including
                    multi-bundles to reach a defined limit or on exhaustion</li>

                <li class="li">Multi-SIM is supported: There need to be a primary and secondary MSISDN/IMSI, a
                    maximum of 2 parallel Sy/Gy sessions for the service provider.</li>

            </ul>

            <div class="note" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__note_b2n_p2p_tvb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> It is important to minimize the creation of one lifecycle
                per product (bundle), only to send different PC names and status in SNR.</div>

            <p class="p"><strong class="ph b">General Configuration</strong></p>

            <div class="fig fignone" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__fig_kwl_pd2_5vb"><span class="figcap"><span class="fig--title-label">Figure: </span>VPC Configuration</span>
                
                <a href="../images/vpc_gen_config.png" class="image"><img class="image break scalefit" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__image_r5s_rj2_tvb" src="../images/vpc_gen_config.png" /></a>
            </div>

            <p class="p">Following points are to be considered during the configuration:</p>

            <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_qd5_n22_5vb">
                <li class="li">Complex map configured for respective policy counter VPC</li>

                <li class="li">Threshold with send SNR action</li>

                <li class="li">Application preference flags</li>

            </ul>

            <p class="p">The operator configures a dedicated PLC for 46 bundles. They can use existing
                functionality of complex map. For example, when the specific bundle addition/renewal
                occurs, the related vPC and its status can be fetched from the table given
                below:</p>

            <table cellpadding="4" cellspacing="0" summary="" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__table_h5s_vd2_5vb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d62324e96">Bundle ID</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d62324e99">Bucket ID/Counter ID</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d62324e102">vPC</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC11</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC12</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC21</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC22</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">…</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">...</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">...</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 45</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC451</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e96 ">Bundle 46</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e99 ">ID 2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62324e102 ">vPC452</td>

                        </tr>

                    </tbody>
</table>

            <div class="div"><strong class="ph b">Flow and Configuration</strong><ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_ptq_qfp_tvb">
                    <li class="li">The operator should configure a TPG with an SNR action reading <em class="ph i">VPC</em>
                        from the complex map.</li>

                    <li class="li">NCC executes the associated TPG whenever bundle is subscribed or renew,
                        that is, threshold is executed and the SNR is sent accordingly, based on the
                        resource values. </li>

                </ul>
<p class="p"><strong class="ph b">Threshold of the TPG</strong>: SY.SendSNR with loading the value of virtual
                    policy counter as per resource ID from the complex map.</p>
<ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_lwr_tpj_5vb">
                    <li class="li">
                        <p class="p">Operator needs to configure a TPG with SNR action reading <em class="ph i">VPC</em> from
                            complex map.</p>

                        <p class="p">For example:</p>

                    </li>

                    <li class="li">
                        <table cellpadding="4" cellspacing="0" summary="" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__simpletable_srn_wgq_5vb" class="simpletable simpletableborder"><col style="width:50%" /><col style="width:50%" /><thead><tr class="sthead">
                                <th style="vertical-align:bottom;text-align:left;" id="d62324e235" class="stentry">If...</th>

                                <th style="vertical-align:bottom;text-align:left;" id="d62324e238" class="stentry">Then...</th>

                            </tr>
</thead><tbody><tr class="strow">
                                <td style="vertical-align:top;" headers="d62324e235" class="stentry"> The bundle is subscribed with a threshold '0', is executed
                                    and based on the resource ID.</td>

                                <td style="vertical-align:top;" headers="d62324e238" class="stentry">Value of the policy counter is 0</td>

                            </tr>
<tr class="strow">
                                <td style="vertical-align:top;" headers="d62324e235" class="stentry">The usage reaches 1 GB </td>

                                <td style="vertical-align:top;" headers="d62324e238" class="stentry">Value of policy counter is 5</td>

                            </tr>
</tbody></table>

                        <div class="note" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__note_xz3_zfq_5vb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Threshold 0 must be configured in TPG, and in
                            the <em class="ph i">threshold 0 action</em>
                            <var class="keyword varname">THRESHOLD.Threshold-Trigger-Type=ThresholdTriggerType_PROVISION</var>
                            is to be present with SY.Send-SNR action.</div>

                    </li>

                </ul>
<a href="../images/vpc_tpgbucket.jpg" class="image"><img class="image break scalefit" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__image_mwp_qn2_tvb" src="../images/vpc_tpgbucket.jpg" /></a></div>
            <div class="div">
                <a href="../images/vpc_rules.jpg" class="image"><img class="image break scalefit" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__image_cz1_jr2_tvb" src="../images/vpc_rules.jpg" /></a>
            </div>
            <div class="div"><strong class="ph b">Application Preferences Configuration</strong></div>
            <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_bsf_dmj_gxb">
                <li class="li">Virtual Policy Counter Support = BUCKET_COUNTER</li>

                <li class="li">Default Signalling State Value = -99</li>

                <li class="li">Default Signalling State in SLA(initial) = false</li>

                <li class="li">Removed Signalling State Value = 5 </li>

                <li class="li">Default Concurrent Execution Delay for SNR = 0</li>

            </ul>

            <div class="div">
                <p class="p"><strong class="ph b">Removed signaling state value</strong></p>

                <p class="p">This feature is enabled when subscription goes to final state, then signaling
                    state sent to Policy.</p>

                <p class="p">when subscription goes to final state, we will send the SNR having value
                    configured in this application preference.</p>

                <div class="note" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__note_p5f_kvh_tvb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                    <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ol_ekm_kvh_tvb">
                        <li class="li">
                            <p class="p">If there are multiple pairs for signaling state in Send-SNR action,
                                then as per the existing Bundle description for Bundle, only first
                                pair is considered.</p>

                            <p class="p">If the VPC name has a dynamic configuration, then only first pair is
                                considered and others are ignored.</p>

                        </li>

                        <li class="li"> With this feature, a flexibility to dynamically configure the VPC name
                            is obtained. But VPC states value needs to be entered in the Send-SNR
                            action rule. <p class="p">VPC state values are being fetched by the NCC login
                                which are as configured by the operator in the Send-SNR rule action.
                                </p>
<p class="p">The VPC values are not randomly picked from complex map/any
                                other means but are configured manually by the operator in rule
                                action.</p>
</li>

                    </ul>

                </div>

            </div>
        </div>

        <div class="section" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__section_ukz_hh2_5vb"><h2 class="title sectiontitle">Bundle subscription, renewal or removal</h2>
            
            <p class="p">The operator intends to minimize the creation of 1 life cycle per product (bundle),
                only for sending different PC names together and its status in SNR as applicable for
                LC operations on the bundles subscribed by the subscriber (like removal, renew,
                addition).</p>

            <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_ozz_jh2_5vb">
                <li class="li">
                    <p class="p">NCC supports through configuration to send the correct PC name and status
                        or multiple PC names and status in SNR.</p>

                </li>

                <li class="li">The device can subscribe to multiple bundles and each bundle can have same PLC /
                    ELC or different ELC /PLC from each other.</li>

                <li class="li">When bundle or bundles are:<ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_pzz_jh2_5vb">
                        <li class="li">Subscribed - NCC sends SNR with all the VPC belonginsg to all bundles
                            with its state</li>

                        <li class="li">Removal - NCC to send SNR with VPC belongings to bundle, which and when
                            it is being removed. (moved to final state)</li>

                        <li class="li">Renewed - NCC to send SNR with VPC belongings to bundle which and when
                            it is being renewed. (moved to final state)</li>

                    </ul>
<div class="note" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__note_jwz_kkq_5vb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If the operator configures the global
                        configuration with a common status removal <em class="ph i">state</em> then the device
                        bundles when removed that is, moved to final state receives SNR with the
                        signalling state value defined in global configuration that is, <em class="ph i">Removed
                            Signalling State Value</em>.</div>
</li>

            </ul>

        </div>

        <div class="section" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__section_g35_wcl_5vb"><h2 class="title sectiontitle">BOU Bundle Subscription send SNR with multiple policy counter status
                configuration setup</h2>
            
            <div class="p">
                <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_ikc_xcl_5vb">
                    <li class="li">Device D1 is subscribed to a bundle as base plan that is, Base Bundle.</li>

                    <li class="li">Sy ongoing session and consumption is already existing or being done from
                        the base bundle as Base Bundle.</li>

                    <li class="li">Bundle2 (Service_BOU) is configured with ELC1 and PLC1 as BOU bundle which
                        is activated once subscriber is in Roaming.<ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_jkc_xcl_5vb">
                            <li class="li">BOU_Bucket with limit of 5 GB has threshold TPG_BOU_Bucket attached
                                to it associated to VPC11.</li>

                            <li class="li">BOU1_Counter with scope as subscription counter has threshold
                                TPG_BOU_Counter attached to it and is associated to VPC12.</li>

                        </ul>
</li>

                    <li class="li">Service_BOU has one charging logic that is, BOU_CL1 and one Periodical
                        Lifecycle, PLC_BOU_Subscription.</li>

                </ul>

            </div>

        </div>

        <div class="section" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__section_ycl_hdl_5vb"><h2 class="title sectiontitle">Multi-SIM subscriber to send SNR with multiple Policy counter status</h2>
            
            <p class="p"><strong class="ph b">Configuration Setup</strong></p>

            <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_nwq_hdl_5vb">
                <li class="li">Device D1 has 2 MSISDN and 2 IMSI configured to its ID.</li>

                <li class="li">Device D1 with:</li>

                <li class="li">
                    <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_psw_rhl_5vb">
                        <li class="li">MSISDN1 – 1111111112 and IMSI1 404119478800001</li>

                        <li class="li">MSISDN2 – 1111111113 and IMSI2 404119478800002</li>

                    </ul>

                </li>

                <li class="li">No Sy ongoing session and consumption might be already existing or being done
                    from the bundle. </li>

                <li class="li">Bundle1 is configured with ELC1 and PLC1 with resources as:</li>

                <li class="li">
                    <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_omn_3kl_5vb">
                        <li class="li">Bucket1 associated to VPC11</li>

                        <li class="li">Counter1 associated to VPC12 - counter has a hoard-stop limit at 10
                            GB</li>

                    </ul>

                </li>

                <li class="li">Bucket1 with a limit of 10000 bytes has a threshold Multi-Sim-TH1 attached to it
                    and associated to VPC11.</li>

                <li class="li">Counter1 with scope as subscription counter has threshold Counter-TPG2 attached
                    to it, associated to VPC12 - counter has a hard-stop limit at 100%
                    consumption.</li>

                <li class="li">Bundle2 is configured with ELC1 and PLC1 with resources as:</li>

                <li class="li">
                    <ul class="ul" id="sy_n28_virtual_counter_rules_for_mapping_to_be_generalized__ul_slp_lkl_5vb">
                        <li class="li">Bucket2 associated to VPC21</li>

                        <li class="li">Counter2 associated to VPC22- counter has a hoard-stop limit at 15
                            GB</li>

                    </ul>

                </li>

                <li class="li">Bucket2 with limit of 10000 bytes has a threshold Multi-Sim-TH1 attached to it
                    and associated to VPC21</li>

                <li class="li">Counter2 with scope as subscription counter has threshold Counter-TPG2 attached
                    to it , associated to VPC22 - counter has a hard-stop limit at 100%
                    consumption.</li>

                <li class="li">Default notification is <em class="ph i">profile</em> to device and add user to device so that
                    the email is triggered when threshold is reached.</li>

            </ul>

        </div>

    </div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>