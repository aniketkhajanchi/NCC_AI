<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Count delta usage for duplicate Diameter CCR-U/T CC-Request-Numbers" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="count_delta_usage_for_duplicate_diameter_ccr_u_t_cc_request_numbers" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Count delta usage for duplicate Diameter CCR-U/T CC-Request-Numbers</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="count_delta_usage_for_duplicate_diameter_ccr_u_t_cc_request_numbers">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Count delta usage for duplicate Diameter CCR-U/T CC-Request-Numbers</h1>
<div class="body conbody">
        <div class="section" id="count_delta_usage_for_duplicate_diameter_ccr_u_t_cc_request_numbers__section_mkz_chr_t4b"><h2 class="title sectiontitle">Normal update request flow</h2>
            
            <ol class="ol" id="count_delta_usage_for_duplicate_diameter_ccr_u_t_cc_request_numbers__ol_qs5_wkr_t4b">
                <li class="li">When this feature is configured, the CC-Request-Number AVP value received in
                    incoming request is compared with the previous request's CC-Request-Number
                    received in CCR-U/CCR-T. In case the incoming CC-Request-Number is same as the
                    previous request's CC-Request-Number, then the request is considered as
                        <strong class="ph b">duplicate</strong> request.</li>

                <li class="li">For a duplicate request, the <strong class="ph b">Delta</strong> (any additional usage reported) is
                    computed and CHF considers this delta for rating as new usage reported by the
                    network.</li>

                <li class="li">It is assumed that the usage reported in duplicate request is greater than or
                    equal to the usage provided in the previous request, which infers that delta
                    computed is always greater than or equal to Zero (0).</li>

                <li class="li">In duplicate request, CDR is not generated, only if delta is zero(0).<div class="p">In
                        duplicate request, a custom tag <strong class="ph b">DUPLICATE_REQUEST</strong> is added in call
                        metrics. Possible values for this custom tag is as follows,<ol class="ol" type="a" id="count_delta_usage_for_duplicate_diameter_ccr_u_t_cc_request_numbers__ol_znr_p1p_z4b">
                            <li class="li"><em class="ph i">WITH_ADDITIONAL_USAGE</em></li>

                            <li class="li"><em class="ph i">WITHOUT_ADDITIONAL_USAGE</em></li>

                        </ol>
</div>
</li>

                <li class="li">This feature also works with following request type as well,
                        <em class="ph i">NewCallStartInUpdateAndTerminate</em>, <em class="ph i">AP</em>, and <em class="ph i">TTC Request</em>.
                        <p class="p">For any kind of session termination either from CCR-T or Audit (VT
                        expire), the session is marked as inactive and is retained till the
                        configured <em class="ph i">Time to Live for Terminated Sessions (Seconds)</em> value gets
                        expired. Session marked inactive can only be activated again when the
                        corresponding CCR-U is received.</p>
</li>

            </ol>

        </div>

    </div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_iry_cvr_t4b"><h2 class="title topictitle2" id="ariaid-title2">Additional information</h2>
<div class="body conbody">
            <ul class="ul" id="concept_iry_cvr_t4b__ul_aqf_vms_x5b">
                <li class="li">Configure application preference <em class="ph i">Time to Live for Terminated Sessions
                        (Seconds)</em> in such way that too many sessions are not collected or stored
                    in database, as it may lead to database performance issues.</li>

                <li class="li">In case of duplicate TTC Requests for which additional usage is reported. Only
                    additional usage from only AFTER USU is considered for rating. but CDR is
                    generated for both BEFORE with Zero Usage and AFTER with additional usage (if
                    any), similar to as generated in normal TTC requests.</li>

                <li class="li">If a session is terminated normally due to receiving a CCR-T from the network,
                    then the CHF must reduce the amount of storage required for the session (that
                    is, it no longer needs to store reported usage or reactivate the session) to the
                    minimum needed for successfully identifying a duplicate release transaction for
                    the same session.</li>

            </ul>

        </div>
</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>