<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Notification over TCP/IP network" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-notiftcp" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Notification over TCP/IP network</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-notiftcp">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Notification over TCP/IP network</h1>
<div class="body conbody">
        <div class="section">
            <p class="p">Notifications can be sent to the operator back-office systems over the TCP/IP
                interface for further processing.</p>

            <p class="p">To send such notifications, thresholds can be defined. A threshold is a limit applied
                on a bucket or counter consumption, and an associated set of actions taken upon
                crossing that limit. A limit applied by the top-level group to device on its
                hierarchy resources. It restricts the usage beyond a particular value.</p>

            <div class="p">A threshold along with the threshold rules can be defined based on which the
                Notification Server executes the associated actions. Notification Server can send
                notifications for the conditions shown in this figure. These conditions are
                applicable to threshold.<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>TCP/IP notification</span>
                    
                    <img class="image break" id="id9yz-09126-ug01-pczza-sp1-notiftcp__image_bq4_45l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-tcpnotification_default.png" />
                </div>
</div>

            <p class="p">For information on configuring the Notification Server to send notification over the
                TCP/IP network, see the <cite class="cite">Notification template variables</cite> section in the
                    <cite class="cite">Notification Service (NS) User Guide</cite>.</p>

        </div>

    </div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_grh_3vl_r4b"><h2 class="title topictitle2" id="ariaid-title2">Configuration</h2>
<div class="body conbody">
            <div class="section" id="concept_grh_3vl_r4b__section_sjn_kvl_r4b"><h3 class="title sectiontitle">Recommendations for feature configuration</h3>
                
                <p class="p">Following points are considered while configuring the TCP/IP notification
                    feature:</p>

                <ul class="ul" id="concept_grh_3vl_r4b__ul_tjn_kvl_r4b">
                    <li class="li">
                        <p class="p">Define a single notification action, such as a notification sent to a
                            subscriber over SMS, MMS, email, or TCP/IP notification to a network
                            node.</p>

                    </li>

                    <li class="li">
                        <p class="p">If multiple thresholds are configured within the same tariff plan, then
                            only one threshold action sends the notification to the subscriber;
                            whereas, the other action sends notification to a network node.</p>

                    </li>

                    <li class="li">
                        <p class="p">The TCP/IP notifications are not applicable for IEC calls.</p>

                    </li>

                    <li class="li">
                        <p class="p">The bucket notification is sent only when a resource consumption is done
                            from bucket. For counters, a notification is sent irrespective of
                            whether the counter is incremented through resource consumption of main
                            balance, <em class="ph i">No-Charge</em>, or bucket.</p>

                    </li>

                    <li class="li">
                        <p class="p">The <span class="ph uicontrol">Dynamic Notification Custom</span> flag enables or
                            disables the TCP/IP notification with dynamic variables for bundle or
                            subscription renewal or reset, and resource usage.</p>

                    </li>

                    <li class="li">
                        <p class="p">The recursive thresholds must not be applied for end of limit cases of
                            threshold for counter or bucket.</p>

                    </li>

                    <li class="li">
                        <p class="p">Dynamic milestones are not considered to compute the counter end time and
                            ULI.</p>

                    </li>

                    <li class="li">
                        <p class="p">If ULI is defined in the counter, then the <var class="keyword varname">Percentage</var>,
                                <var class="keyword varname">Absolute from Start</var>, <var class="keyword varname">Absolute from
                                End</var> can also be attached to the counter. However, if ULI
                            is not defined, then thresholds for <var class="keyword varname">Absolute from
                                Start</var> is attached to counter.</p>

                    </li>

                    <li class="li">Usage limit is mandatory for <var class="keyword varname">Absolute from
                            End</var> threshold type in counter. In usage limit
                            <var class="keyword varname">Absolute from End</var> threshold, the highest threshold is
                        crossed first followed by the second highest and lowest threshold value at
                        last. On crossing the threshold, the corresponding actions are executed. See
                            <a class="xref" href="abe_tpg_uli.html">ABE TPG for ULI</a> for more details.</li>

                    <li class="li">Overage limit is mandatory for <var class="keyword varname">Absolute from
                            End</var> threshold type in counter. In overage <var class="keyword varname">Absolute
                            from End</var> threshold, the highest threshold is crossed first
                        followed by the second highest and lowest threshold value at last. On
                        crossing the threshold, the corresponding actions are executed. After the
                        overage limit is crossed, the crossing of thresholds start again from end
                        and this continues without any limit. <a class="xref" href="abe_tpg_oli.html">ABE TPG for OLI</a> for
                        more details. </li>

                    <li class="li">In Usage Control, the overage limit and overage
                        thresholds are supported using two parameters namely <strong class="ph b">Overage Limit</strong>
                        and <strong class="ph b">Overage Threshold Profile Group IDs</strong>.</li>

                    <li class="li">
                        <p class="p">The <var class="keyword varname">Absolute from Start</var> threshold type has a
                            preference over the <var class="keyword varname">Percentage</var> and <var class="keyword varname">Absolute
                                from End</var> threshold types while calculating the value of
                            the <span class="ph uicontrol">Spending Limit Threshold Value</span>. Also, the
                                <var class="keyword varname">Percentage</var> type threshold has preference over the
                                <var class="keyword varname">Absolute from End</var> threshold type while
                            calculating the value of the <span class="ph uicontrol">Spending Limit Threshold
                                Value</span>.</p>

                    </li>

                    <li class="li">
                        <p class="p">There is only a single stop or reject in a cap on counter at the end,
                            which means it is recommended not to configure
                                <samp class="ph systemoutput">Notification-Stop</samp> or
                                <samp class="ph systemoutput">Reject</samp> on a counter in between other
                            caps on counter.</p>

                    </li>

                    <li class="li">Cap is not applicable for <var class="keyword varname">Absolute from End</var> threshold
                        type.</li>

                    <li class="li">
                        <p class="p">Class of service and <em class="ph i">Billing Account Id</em> can be defined either in
                            custom data dictionary or its value is picked from the device context.
                            The priority of value in custom data is higher than the value from the
                            device context.</p>

                    </li>

                    <li class="li">
                        <p class="p">If charging is done from bucket, then two bucket notifications are sent
                            with subsequent sequence number as commit is done twice in database. It
                            is in sync with the existing functionality of bucket.</p>

                    </li>

                    <li class="li">
                        <p class="p">For resource usage on CCR-U/T feature, UNI is hard-coded in rules based
                            on the kind of unit received from network. Therefore, for a counter or
                            bucket of money type, UNI value is still BYTE. </p>

                    </li>

                </ul>

            </div>

            <div class="section" id="concept_grh_3vl_r4b__section_jvv_jvl_r4b"><h3 class="title sectiontitle">Configuring notification variables - SM GUI and custom dictionary</h3>
                
                <p class="p">The notification variable names are defined using one of the following ways:</p>

                <ul class="ul" id="concept_grh_3vl_r4b__ul_kvv_jvl_r4b">
                    <li class="li">
                        <p class="p">Define notification variable names in rules within the absolute or
                            percentage threshold profiles in the SM GUI. For more information, see
                            the <a class="xref" href="#concept_grh_3vl_r4b__SMGUI">Configuring notification variables using SM GUI</a>.</p>

                    </li>

                    <li class="li">
                        <p class="p">Define notification variable names in rules for post processing of
                            CCR-U/T through SM GUI.</p>

                    </li>

                    <li class="li">
                        <p class="p">Define notification variable names in
                                <span class="ph filepath">ChargingCustomRuleAttributeDictionary.xml</span>
                            custom dictionary file located at
                            <span class="ph filepath">/opt/tpa/conf/sac</span>. The defined notification
                            variable names are then loaded in the absolute or percentage threshold
                            profiles of SM GUI. For more information, see the <a class="xref" href="#concept_grh_3vl_r4b__Customdictionary">Configuring notification variables using custom dictionary</a>.</p>

                    </li>

                </ul>

            </div>

            <div class="section" id="concept_grh_3vl_r4b__SMGUI"><h3 class="title sectiontitle">Configuring notification variables using SM GUI</h3>
                
                <p class="p">Perform the following steps to configure the notification variables using SM
                    GUI:</p>

                <ol class="ol" id="concept_grh_3vl_r4b__ol_rpj_jvl_r4b">
                    <li class="li">Log into the new GUI and select <span class="ph uicontrol">Charging → ☰ →
                            </span><strong class="ph b">Threshold profiles</strong>.</li>

                    <li class="li">Create a new threshold or edit an existing threshold.</li>

                    <li class="li">The notification variables can be defined in rules within the following
                        threshold profiles:<ul class="ul" id="concept_grh_3vl_r4b__ul_spj_jvl_r4b">
                            <li class="li">
                                <p class="p">
                                    <em class="ph i">Percentage</em> threshold</p>

                            </li>

                            <li class="li">
                                <p class="p">
                                    <em class="ph i">Absolute from start</em> threshold</p>

                            </li>

                            <li class="li">
                                <p class="p">
                                    <em class="ph i">Absolute from end</em> threshold</p>

                            </li>

                            <li class="li">
                                <p class="p">
                                    <em class="ph i">Absolute from zero</em> threshold</p>

                            </li>

                        </ul>
</li>

                </ol>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The <em class="ph i">Absolute from zero</em> threshold profile is visible only when the
                        <em class="ph i">KindOfUnit</em> is set as <var class="keyword varname">Money</var>.</div>

            </div>

            <div class="section" id="concept_grh_3vl_r4b__Customdictionary"><h3 class="title sectiontitle">Configuring notification variables using custom dictionary</h3>
                
                <p class="p">The notification variables can be defined in the
                        <span class="ph filepath">ChargingCustomRuleAttributeDictionary.xml</span> custom
                    dictionary file located at <span class="ph filepath">/opt/tpa/conf/sac</span>. Once the
                    notification variables are defined in the custom dictionary, the associated
                    threshold profile in the SM GUI is populated with that notification variable
                    configuration.</p>

                <div class="p">Following is an example of defining notification variables using custom
                        dictionary:<div class="fig fignone" id="concept_grh_3vl_r4b__fig_azy_3vl_r4b">
                        <pre class="pre codeblock"><code>&lt;attributeDictionary xmlns="ruleAttributeDictionary"&gt;

    &lt;attribute name="Billing-Account-Id" valueType="StringValueType"&gt;
        &lt;sourceContext type="RATING_POSTPROCESSING"
                       objectAccessExpr="getBillingAccId()"&gt;
            &lt;ruleSet&gt;RATING_POST_PROCESSING&lt;/ruleSet&gt;
        &lt;/sourceContext&gt;
        &lt;domain name="CHARGING"/&gt;
    &lt;/attribute&gt;
   
&lt;attribute name="Bucket-Or-Counter-Def-Name" valueType="StringValueType"&gt;
        &lt;sourceContext type="THRESHOLD_PROFILE"
                       objectAccessExpr="getBucketOrCounterName()"&gt;
            &lt;ruleSet&gt;THRESHOLD&lt;/ruleSet&gt;
        &lt;/sourceContext&gt;
        &lt;domain name="CHARGING"/&gt;
    &lt;/attribute&gt;

&lt;attribute name="Notification-Event"
               valueType="StringValueType"&gt;
        &lt;sourceContext type="CALL_COMMON"
                       objectAccessExpr="getNotifEventType()"&gt;
            &lt;ruleSet&gt;THRESHOLD&lt;/ruleSet&gt;
            &lt;ruleSet&gt;GY_POST_PROCESSING&lt;/ruleSet&gt;
            &lt;ruleSet&gt;RATING_POST_PROCESSING&lt;/ruleSet&gt;
        &lt;/sourceContext&gt;
        &lt;domain name="CHARGING"/&gt;
    &lt;/attribute&gt;
    &lt;/attributeDictionary&gt;
</code></pre>
                    </div>
</div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_ivr_w5l_r4b"><h2 class="title topictitle2" id="ariaid-title3">Bucket or counter is about to end</h2>
<div class="body conbody">
            <div class="section" id="concept_ivr_w5l_r4b__section_lmt_gvl_r4b">
                <p class="p">Notification over TCP/IP network can be sent when a bucket or counter is about to
                    end. Multiple levels of threshold can be defined for a bucket or counter using
                    the notification variables over the TCP/IP interface. The header fields are
                    included in every TCP/IP notification. The dynamic notification variables with
                    notification action can be configured in the threshold rule on the SM GUI. </p>

                <p class="p">The TCP/IP notification sent to a network node to indicate that a bucket or
                    counter is about to end consists of the mandatory header fields mentioned in
                        <a class="xref" href="#concept_yfj_wsl_r4b__Headerfields">Header fields for sending TCP/IP notification</a> and the
                    following notification variables defined in rules. </p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The variable names in the notification are configurable. The same variable
                    name must be used in the Notification template in Notification Server as defined
                    in threshold in Charging. For further details on NS configuration, see the
                        <cite class="cite">Notification Service (NS) User Guide</cite>.</div>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_ivr_w5l_r4b__table_mmt_gvl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for bucket about to end case</span></caption><colgroup><col style="width:11.925708699902247%" /><col style="width:26.68621700879765%" /><col style="width:38.90518084066471%" /><col style="width:9.775171065493646%" /><col style="width:12.70772238514174%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e428">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e434">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e440">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e446">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e452">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">APNRTRACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">BillingAccountID</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">SPR_DEVICE.BillingAccountID</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">SUBSCRIPTION.Account-Id</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">COS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">
                                    <p class="p">This variable indicates the name of the charging service.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">Segment</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> = <var class="keyword varname">SPR_DEVICE.Segment</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the bucket ID for which the threshold
                                    value is defined that triggers a notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Bucket-Def-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">PCT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">
                                    <p class="p">This variable indicates the threshold percentage value. You
                                        can define multiple threshold percentages in a single
                                        threshold profile group and the parameters TH0, TH1 and so
                                        on to store the percentage values. For example, you can
                                        create 50% and 20% thresholds, then NCC considers it as
                                        TH0=50% and TH1=20% and this can be passed in the
                                        notification variable as follows:</p>

                                    <p class="p">NOTIFICATION.Notification-Variable (“PCT”,
                                        THRESHOLD_PROFILE.Threshold-Percentage (“TH0”),
                                        “TCPIP_Notification_TemplateALTNEA”) </p>

                                    <p class="p">NOTIFICATION.Notification-Variable (“PCT”,
                                        THRESHOLD_PROFILE.Threshold-Percentage (“TH1”),
                                        “TCPIP_Notification_TemplateALTNEA”)</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">PCT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Threshold-Percentage</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">Big Decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">
                                    <p class="p">This variable indicates the notification event ID.</p>

                                    <p class="p">It can be any of these values - <var class="keyword varname">ALTNEA</var>,
                                            <var class="keyword varname">ALTNEA1</var>, or
                                            <var class="keyword varname">ALTNEA2</var> used for notification.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">“ALTNEA”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. The operator ensures
                                        that the value of this variable matches the unit type of the
                                        bucket.</p>

                                    <p class="p">The supported values are - TIM for time, BYT for volume, MON
                                        for money, UNI for unit.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">“Money”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the time when the notification is
                                    generated for a bucket. It refers to the last three digits or
                                    milliseconds of the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp-Millis</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">BAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable is the remaining value of the bucket after
                                    committing the used quantities reported in USU. During the
                                    configuration of notification variable for a threshold profile,
                                    the BAL parameter is mapped to the current value of the
                                    bucket.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">BAL</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Bucket-Balance-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the amount used towards the threshold
                                    in bucket and is the current consumption towards bucket.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">USE</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Current-Used-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e428 ">LNG</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e434 ">This variable indicates the language of notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e440 ">
                                    <em class="ph i">LNG</em> = <var class="keyword varname">"ENGLISH"</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e446 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e452 ">Optional</td>

                            </tr>

                        </tbody>
</table>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_ivr_w5l_r4b__table_nmt_gvl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for counter about to end case</span></caption><colgroup><col /><col /><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e855">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e861">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e867">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e873">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e879">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">APNRTRACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call or device.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">BillingAccountID</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">SPR_DEVICE.BillingAccountID</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> = <var class="keyword varname">SUBSCRIPTION.AccountID</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">COS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable indicates the name of the charging service used
                                        in the call or device.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">Segment</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> = <var class="keyword varname">SPR_DEVICE.Segment</var>
                                    </p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the Counter name for which the
                                    threshold value is defined that triggers a notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Def-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">CRT/IT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable gives the last reset time of the counter
                                    instance.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">CRT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Reset-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">CUT/JT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable gives the value when a counter instance was
                                    updated by create, read, update, or delete operation, or BCR,
                                    that is, <em class="ph i">Last Admin Update</em> or <em class="ph i">Billing Cycle
                                        Timestamp</em>.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">CUT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Update-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e855 "> PCT</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable indicates the threshold percentage value and
                                        follows one of the given criteria:</p>

                                    <ul class="ul" id="concept_ivr_w5l_r4b__ul_omt_gvl_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit and overage limit are not used, then
                                                counters can have threshold types, such as
                                                  <var class="keyword varname">Absolute from start</var>. To
                                                calculate the percentage of the absolute limit, the
                                                maximum limit value of counter is the one, which has
                                                a threshold defined with
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action.</p>

                                            <p class="p">For example, there are two <var class="keyword varname">Absolute from
                                                  start</var> type thresholds of 900 MB and 1000
                                                MB defined with
                                                  <samp class="ph systemoutput">Notification-Send</samp> and
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action
                                                respectively. In this case, the threshold percentage
                                                is calculated as 90% and 100%. If the
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action are not
                                                configured, then PCT is set to <var class="keyword varname">0</var>.
                                                If the
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action are
                                                configured at multiple thresholds on same counter,
                                                then first one is considered for maximum value of
                                                counter.</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit or overage limit is provided in a
                                                counter and <var class="keyword varname">Percentage</var> type
                                                threshold is being executed, then this variable is
                                                mapped to the percentage threshold value.
                                                </p>

                                            <p class="p">For example, if a threshold is applied at 90%, then
                                                this variable is set to <var class="keyword varname">90</var>. For
                                                absolute type thresholds, this variable value
                                                remains <var class="keyword varname">0</var>.</p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <ul class="ul" id="concept_ivr_w5l_r4b__ul_pmt_gvl_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit and overage limit are not used:</p>

                                            <p class="p">
                                                <em class="ph i">PCT</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Threshold-Percentage</var>
                                            </p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit or overage limit is provided in a
                                                counter and <var class="keyword varname">Percentage</var> type
                                                threshold is being executed:</p>

                                            <p class="p">
                                                <em class="ph i">PCT</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Counter-Threshold-Percentage
                                                  (“&lt;ThresholdName”&gt;)</var>
                                            </p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e873 "> Big Decimal</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e879 "> Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable indicates the notification event ID.</p>

                                    <p class="p">It can be any of these values - <var class="keyword varname">ALTNEA</var>,
                                            <var class="keyword varname">ALTNEA1</var>, or
                                            <var class="keyword varname">ALTNEA2</var> used for notification. </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">“ALTNEA”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. It can be in TIM or BYT. The
                                        operator ensures that the value of this variable
                                        matches the unit type of the counter.</p>

                                    <p class="p">A dedicated UNI string value can be used for money and unit
                                        also. It can be configured as per need such as MON can be
                                        used for Money.</p>

                                    <p class="p">The supported values are - TIM for time, BYT for volume, MON
                                        for money, UNI for unit.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">“Money”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the time when the notification is
                                    generated for a counter. It refers to the last three digits or
                                    milliseconds of the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp-Millis</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">TST</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable is defined as hard-coded string value, such as
                                        hard-stop or soft-stop.</p>

                                    <p class="p">OR</p>

                                    <p class="p">This variable can also be mapped to the
                                            <span class="ph uicontrol">Action-Type</span> parameter to give
                                        actions configured in threshold.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <p class="p">
                                        <em class="ph i">TST</em> = <var class="keyword varname">"Hard Stop"</var>
                                    </p>

                                    <p class="p">OR</p>

                                    <p class="p">
                                        <em class="ph i">TST</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Action-Type("&lt;ThresholdName&gt;")</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">BAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">
                                    <p class="p">This variable is the remaining allowance to next threshold in
                                        decimal. </p>

                                    <p class="p">Example: A counter has two thresholds defined at 50% (250
                                        bytes) and 80% (400 bytes). Consider that 50% of threshold
                                        is crossed and the used value stored in counter is 300
                                        bytes. A CCR-U request arrives with USU = 50 bytes. In this
                                        case, BAL = 50 bytes and USE = 350 bytes.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">BAL</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Current-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the amount used towards the threshold
                                    in counter.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">USE</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Current-Used-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e855 ">LNG</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e861 ">This variable indicates the language of notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e867 ">
                                    <em class="ph i">LNG</em> = <var class="keyword varname">"ENGLISH"</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e873 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e879 ">Optional</td>

                            </tr>

                        </tbody>
</table>

            </div>

            <div class="section" id="concept_ivr_w5l_r4b__section_iqc_dvl_r4b"><h3 class="title sectiontitle">Example 1: Bucket is about to end</h3>
                
                <p class="p">Bob has an iPhone associated with a data bucket of 500 MB. A threshold is defined
                    at 200 MB. When the bucket value reaches the defined threshold of 200 MB, a
                    notification is sent to Bob. The <var class="keyword varname">Send-Notification</var> action
                    variable is defined for 200 MB. For this example, configure the following
                    entities:</p>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_ivr_w5l_r4b__table_n1v_dvl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:39.0625%" /><col style="width:60.9375%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1486">
                                    <p class="p">Entity</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1492">
                                    <p class="p">Task</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Notification server</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Configure the TCP/IP server. Multiple TCP/IP servers can be
                                    defined.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Notification template</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Define the text to be sent to Bob.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Notification preferences</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create a notification profile.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Thresholds</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create a threshold and define the notification variables
                                    along with the threshold rules.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Charging services</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create a charging service with 500 MB data bucket.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Device</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create a device and associate it with device lifecycle, set
                                    the notification profile, and add the bundle subscription.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Account</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create an account and associate it with the account
                                    lifecycle.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Bundles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create a bundle and associate it with the charging service.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1486 ">Lifecycles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1492 ">Create the lifecycles for device, account, bundle.</td>

                            </tr>

                        </tbody>
</table>

                <p class="p">The following figure shows the threshold rule defined in the SM GUI
                        (<span class="ph uicontrol">Charging → ☰ → Threshold profiles</span>):</p>

                <div class="fig fignone" id="concept_ivr_w5l_r4b__fig_o1v_dvl_r4b">
                    <img class="image break" id="concept_ivr_w5l_r4b__image_p1v_dvl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-bucketend_th1_default.png" height="221" width="603" />
                </div>

            </div>

            <div class="section" id="concept_ivr_w5l_r4b__section_n1q_z5l_r4b"><h3 class="title sectiontitle">Example 2: Counter is about to end</h3>
                
                <p class="p">Bob has an iPhone associated with a subscription counter and data bucket of 1 GB
                    and subscribed with a device subscription. The counter accumulates the bucket
                    resources consumed. Threshold is defined at 200 MB, 500 MB, 700 MB on counter
                    along with notification variables in the threshold rule. Notification is sent
                    when the counter value reaches the thresholds defined, that is, notification is
                    sent at 200 MB, 500 MB, 700 MB. <var class="keyword varname">Send-Notification</var> action
                    variable is defined for 200 MB, 500 MB, 700 MB. For this example, configure the
                    following entities:</p>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_ivr_w5l_r4b__table_o2t_1vl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:40.98360655737705%" /><col style="width:59.01639344262295%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1622">
                                    <p class="p">Entity</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1628">
                                    <p class="p">Task</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Notification server</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Configure the TCP/IP server. Multiple TCP/IP servers can be
                                    defined.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Notification template</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Define the text to be sent to Bob.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Notification preferences</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create a notification profile.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Thresholds</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create a threshold and define the notification variables
                                    along with the threshold rules.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Charging services</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create a charging service with 1 GB data bucket, and usage
                                    counter.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Device</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create a device and associate it with device lifecycle, set
                                    the notification profile, and add the bundle subscription.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Account</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create an account and associate it with the account
                                    lifecycle.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Bundles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create a bundle and associate it with the charging service.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1622 ">Lifecycles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1628 ">Create the lifecycles for device, account, bundle.</td>

                            </tr>

                        </tbody>
</table>

                <p class="p">The following figure shows the threshold rules for multiple levels of thresholds
                    defined in the SM GUI (<span class="ph uicontrol">Charging → ☰ → Threshold
                    profiles</span>):</p>

                <p class="p">Notification at 200 MB:</p>

                <div class="fig fignone" id="concept_ivr_w5l_r4b__fig_p2t_1vl_r4b">
                    <img class="image break" id="concept_ivr_w5l_r4b__image_q2t_1vl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-countermultiple1_default.png" height="278" width="584" />
                </div>

                <p class="p">Notification at 500 MB:</p>

                <div class="fig fignone" id="concept_ivr_w5l_r4b__fig_r2t_1vl_r4b">
                    <img class="image break" id="concept_ivr_w5l_r4b__image_s2t_1vl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-countermultiple2_default.png" height="278" width="586" />
                </div>

                <p class="p">Notification at 700 MB:</p>

                <div class="fig fignone" id="concept_ivr_w5l_r4b__fig_t2t_1vl_r4b">
                    <img class="image break" id="concept_ivr_w5l_r4b__image_u2t_1vl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-countermultiple3_default.png" height="287" width="585" />
                </div>

            </div>

            <div class="section" id="concept_ivr_w5l_r4b__section_qth_x5l_r4b"><h3 class="title sectiontitle">Example 3: Cap at multiple levels</h3>
                
                <p class="p">The following figure shows the notification variables for multi-level cap:</p>

                <div class="fig fignone" id="concept_ivr_w5l_r4b__fig_lyf_y5l_r4b">
                    <img class="image break" id="concept_ivr_w5l_r4b__image_myf_y5l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-cap_multilevel_default.png" height="353" width="896" />
                </div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title4" id="concept_kk2_m5l_r4b"><h2 class="title topictitle2" id="ariaid-title4">Bucket or counter limit is reached</h2>
<div class="body conbody">
            <div class="section" id="concept_kk2_m5l_r4b__section_lmt_m5l_r4b">
                <p class="p">Notification can be sent for a bucket or counter when the limit defined is
                    reached or at the end of CCR-U/T request. Whenever a consumption is done from
                    bucket, a notification is sent to the NS with the notification variables (listed
                    in the following table). A counter can accumulate the consumption of bucket
                    resources. A counter limit can be set and on reaching this limit, a notification
                    can be sent. The dynamic notification variables with notification action can be
                    configured in the threshold rule on the SM GUI. </p>

                <p class="p">Multiple notifications can be sent if multiple buckets or counters are used in a
                    call. If two buckets and two counters are used while processing single MSCC,
                    then four notifications are sent for that MSCC. </p>

                <p class="p">The TCP/IP notification sent to a network node to indicate that a bucket or
                    counter limit is reached consists of the mandatory header fields mentioned in
                        <a class="xref" href="#concept_yfj_wsl_r4b__Headerfields">Header fields for sending TCP/IP notification</a> and the
                    following notification variables defined in rules. </p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The variable names in the notification are configurable. The same variable
                    name must be used in the Notification template in Notification Server as defined
                    in threshold in Charging. For further details on NS configuration, see the
                        <cite class="cite">NOKIA Converged Charging Notification Service (NS) User
                    Guide</cite>.</div>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_kk2_m5l_r4b__table_mmt_m5l_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for bucket limit reached case</span></caption><colgroup><col style="width:11.422413793103448%" /><col style="width:39.79885057471264%" /><col style="width:31.106321839080458%" /><col style="width:7.183908045977011%" /><col style="width:10.488505747126435%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1817">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1823">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1829">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1835">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e1841">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">APNRTRACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">BillingAccountID</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">SPR_DEVICE.BillingAccountID</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> = <var class="keyword varname">SUBSCRIPTION.AccountID</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">COS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">This variable indicates the name of the charging service.</p>

                                    <p class="p">For example, <var class="keyword varname">ChargingService1</var>.</p>

                                    <p class="p">It can also be mapped to a custom data with name such as
                                            <span class="ph uicontrol">Segment</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> = <var class="keyword varname">SPR_DEVICE.Segment</var>
                                    </p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the bucket ID for which the threshold
                                    value is defined that triggers a notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Bucket-Def-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">PCT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">This variable indicates the threshold percentage value.</p>

                                    <p class="p">For absolute threshold, the <em class="ph i">Percentage of absolute
                                            limit</em> is calculated and mentioned in the <em class="ph i">PCT</em>
                                        variable. This means if the threshold level is set to
                                            <var class="keyword varname">900 and the bucket initial value is 1000, then
                                            it is 90 percent in the notification</var>, then PCT
                                        is set to 100 percent.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">PCT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Threshold-Percentage</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Big Decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the notification event ID and
                                        <var class="keyword varname">ALTLMT</var> is set as the variable
                                    value.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">“ALTLMT"</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the unit of remaining allowance and
                                    configured as a string value. The operator ensures that
                                    the value of this variable matches the unit type of the
                                    bucket.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">“Money”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the time when the notification is
                                    generated for a bucket. It refers to the last three digits or
                                    milliseconds of the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp-Millis</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e1817 "> ULI</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">This variable indicates the value of maximum limit consumed
                                        from a bucket balance.</p>

                                    <p class="p">It is the value of the threshold reached in a CCR-U/T. If a
                                        threshold is not reached, then its value is zero.</p>

                                    <p class="p">If multiple thresholds are crossed in a single request, the
                                        value of the maximum threshold being crossed is included in
                                        ULI. In case of percentage threshold, the % value is
                                        translated into absolute value and included in ULI. </p>

                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">ULI</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Bucket-End-Value</var>
                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e1835 "> Long</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e1841 "> Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">Currently, NCC does not support overage on bucket. Therefore,
                                        this parameter always has Bucket Initial Value. </p>

                                    <p class="p">Do not configure CAP and threshold together. If configured,
                                        then the latest one is considered.</p>

                                    <div class="p">
                                        <div class="note" id="concept_kk2_m5l_r4b__note_yjv_gkx_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div>  This variable value is
                                            automatically generated by NCC and not specified by the
                                            operator.</div>

                                    </div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">OLI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">
                                    <p class="p">This variable indicates the overage allowance limit.</p>

                                    <p class="p">Since overage is not supported by NCC, the <em class="ph i">OLI</em>
                                        parameter is always set to <var class="keyword varname">zero</var>.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">OLI</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Overage-Allowance</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">BAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variables is the remaining value of the bucket after
                                    committing the used quantities reported in USU. During the
                                    configuration of notification variable for a threshold profile,
                                    the BAL parameter is mapped to the current value of the
                                    bucket.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">BAL</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Bucket-Balance-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the amount used towards the threshold
                                    in bucket and has the bucket initial value.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">USE</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Current-Used-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1817 ">LNG</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1823 ">This variable indicates the language of notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1829 ">
                                    <em class="ph i">LNG</em> = <var class="keyword varname">"ENGLISH"</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1835 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e1841 ">Optional</td>

                            </tr>

                        </tbody>
</table>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_kk2_m5l_r4b__table_nmt_m5l_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for counter limit reached case</span></caption><colgroup><col style="width:11.462728551336147%" /><col style="width:38.9592123769339%" /><col style="width:31.71589310829817%" /><col style="width:7.032348804500704%" /><col style="width:10.829817158931084%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e2331">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e2337">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e2343">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e2349">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e2355">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">APNRTRACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call.</p>

                                    <p class="p">It can also be mapped to a custom data with name, such as
                                            <span class="ph uicontrol">BillingAccountID</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">SPR_DEVICE.BillingAccountID</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> = <var class="keyword varname">SUBSCRIPTION.AccountID</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">COC</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable provides a count of the ongoing overage block
                                    as overage limit keep on repeating multiple times.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">COC</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Overage-Count</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Integer</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">COS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable indicates the name of the charging service.</p>

                                    <p class="p">It can also be mapped to a custom data with name, such as
                                            <span class="ph uicontrol">Segment</span> defined in the
                                        device.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> = <var class="keyword varname">SPR_DEVICE.Segment</var>
                                    </p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">COU</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable gives the overage usage in currently ongoing
                                    overage block.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">COU</em> = <var class="keyword varname">THRESHOLD_PROFILE.
                                        Current-Overage-Usage</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Big decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the counter name for which the
                                    threshold value is defined that triggers a notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Def-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">CRT/IT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable gives the last reset time of the counter
                                    instance.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">CRT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Reset-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">CUT/JT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable gives the value when a counter instance was
                                    updated by create, read, update, or delete operation, or BCR,
                                    that is, <em class="ph i">Last Admin Update</em> or <em class="ph i">Billing Cycle
                                        Timestamp</em>.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">CUT</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Update-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 "> PCT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable indicates the threshold percentage value and
                                        follows one of the given criteria:</p>

                                    <ul class="ul" id="concept_kk2_m5l_r4b__ul_omt_m5l_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit and overage limit are not used, then
                                                counters can only have threshold types, such as
                                                  <var class="keyword varname">Absolute from start</var>. To
                                                calculate the percentage of the absolute limit, the
                                                maximum limit value of counter is the one, which has
                                                a threshold defined with
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action.</p>

                                            <p class="p">For example, there are two <var class="keyword varname">Absolute from
                                                  start</var> type thresholds of 900 MB and 1000
                                                MB defined with
                                                  <samp class="ph systemoutput">Notification-Send</samp> and
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action
                                                respectively. In this case, the threshold percentage
                                                is calculated as 90% and 100%. If the
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action are not
                                                configured, then PCT is set to <var class="keyword varname">0</var>.
                                                If the
                                                  <samp class="ph systemoutput">Notification-Stop</samp> or
                                                  <samp class="ph systemoutput">Reject</samp> action are
                                                configured at multiple thresholds on same counter,
                                                then first one is considered for maximum value of
                                                counter.</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit or overage limit is provided in a
                                                counter and <var class="keyword varname">Percentage</var> type
                                                threshold is being executed, then this variable is
                                                mapped to the percentage threshold value.</p>

                                            <p class="p">For example, if a threshold is applied at 90%, then
                                                this variable is set to <var class="keyword varname">90</var>. For
                                                absolute type thresholds, this variable value
                                                remains <var class="keyword varname">0</var>.</p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <ul class="ul" id="concept_kk2_m5l_r4b__ul_pmt_m5l_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit and overage limit are not used:</p>

                                            <p class="p">
                                                <em class="ph i">PCT</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Threshold-Percentage</var>
                                            </p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit or overage limit is provided in a
                                                counter and <var class="keyword varname">Percentage</var> type
                                                threshold is being executed:</p>

                                            <p class="p">
                                                <em class="ph i">PCT</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Counter-Threshold-Percentage
                                                  (“&lt;ThresholdName”&gt;)</var>
                                            </p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 "> Big Decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 "> Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable indicates the notification event ID.</p>

                                    <p class="p">In this case, it is ALTLMT.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">“ALTLMT”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. The operator ensures
                                        that the value of this variable matches the unit type of the
                                        counter.</p>

                                    <p class="p">A dedicated UNI string value can be used for money and unit
                                        also. It can be configured as per need such as MON can be
                                        used for Money.</p>

                                    <p class="p">The supported values are - TIM for time, BYT for volume, MON
                                        for money, UNI for unit.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">“Money”</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the time when the notification is
                                    generated for a counter. It refers to the last three digits or
                                    milliseconds of the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Notification-Generation-Timestamp-Millis</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">TOU</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable gives the total usage in overage blocks.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">TOU</em> = <var class="keyword varname">THRESHOLD_PROFILE.
                                        Total-Overage-Usage</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Big decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">TST</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable is defined as hard-coded string value, such as
                                        hard-stop or soft-stop.</p>

                                    <p class="p">OR</p>

                                    <p class="p">This variable is mapped to <span class="ph uicontrol">Action-Type</span>
                                        parameter to configure actions in threshold.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <p class="p">
                                        <em class="ph i">TST</em> = <var class="keyword varname">"Hard Stop"</var>
                                    </p>

                                    <p class="p">OR</p>

                                    <p class="p">
                                        <em class="ph i">TST</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Action-Type("&lt;ThresholdName&gt;")</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">ULI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">If usage limit on a counter is not defined, then this
                                        variable indicates the maximum limit value, which can be
                                        stored in a counter. This is an absolute value of counter
                                        threshold corresponding to the
                                            <samp class="ph systemoutput">Notification-Stop</samp> or
                                            <samp class="ph systemoutput">Reject</samp> action.</p>

                                    <p class="p">However, if usage limit on a counter is defined, then this
                                        variable is also mapped to the prorated usage limit in the
                                        counter instance.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <ul class="ul" id="concept_kk2_m5l_r4b__ul_qmt_m5l_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit on a counter is not defined:</p>

                                            <p class="p">
                                                <em class="ph i">ULI</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Counter-End-Value</var>
                                            </p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit on a counter is defined:</p>

                                            <p class="p">
                                                <em class="ph i">ULI</em> =
                                                  <var class="keyword varname">THRESHOLD_PROFILE.Counter-Usage-Limit</var>
                                            </p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Big decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">OLI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the overage limit in the counter
                                    instances.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">OLI</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Overage-Limit</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Big decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">BAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">
                                    <p class="p">This variable is the remaining allowance to next threshold in
                                        decimal. </p>

                                    <p class="p">In this notification, this parameter is set to 0 value.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">BAL</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Counter-Current-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the amount used towards the threshold
                                    in counter.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">USE</em> =
                                        <var class="keyword varname">THRESHOLD_PROFILE.Current-Used-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2331 ">LNG</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2337 ">This variable indicates the language of notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2343 ">
                                    <em class="ph i">LNG</em> = <var class="keyword varname">"ENGLISH"</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2349 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e2355 ">Optional</td>

                            </tr>

                        </tbody>
</table>

                <p class="p">If multiple overage block are being consumed in a single call, then notification
                    parameter has the current value, count, and overage usage as per the overage
                    block (current or previous) for which threshold is being executed.</p>

                <p class="p">
                    <strong class="ph b">For example:</strong>
                </p>

                <p class="p">If <em class="ph i">Usage Limit</em> = <var class="keyword varname">10 GB</var> and <em class="ph i">Overage Limit</em> =
                        <var class="keyword varname">1 GB</var> with threshold notification on 50% and 100% usage;
                    and counter current value changes from <var class="keyword varname">10 GB</var> to <var class="keyword varname">12.5
                        GB</var>. In this case, the threshold notification has three
                    notifications:</p>

                <ul class="ul" id="concept_kk2_m5l_r4b__ol_rmt_m5l_r4b">
                    <li class="li">On 100% consumption of first overage block (previous), such as on 11 GB
                        usage, with <em class="ph i">Counter-Current-Value</em> = <var class="keyword varname">11 GB</var>,
                            <em class="ph i">Current-Overage-Usage</em> = <var class="keyword varname">1 GB</var>,
                            <em class="ph i">Total-Overage-Usage</em> = <var class="keyword varname">1 GB</var>, and
                            <em class="ph i">Counter-Overage-Count</em> = <var class="keyword varname">1</var>.</li>

                    <li class="li">On 100% consumption of second overage block (previous), which is 12 GB
                        usage, with <em class="ph i">Counter-Current-Value</em> = <var class="keyword varname">12 GB</var>,
                            <em class="ph i">Current-Overage-Usage</em> = <var class="keyword varname">1 GB</var>,
                            <em class="ph i">Total-Overage-Usage</em> = <var class="keyword varname">2 GB</var>, and
                            <em class="ph i">Counter-Overage-Count</em> = <var class="keyword varname">2</var>
                    </li>

                    <li class="li">On 50% consumption of third overage block (current), which means on 12.5 GB
                        usage, with <em class="ph i">Counter-Current-Value</em> = <var class="keyword varname">12.5 GB</var>,
                            <em class="ph i">Current-Overage-Usage</em> = <var class="keyword varname">0.5 GB</var>,
                            <em class="ph i">Total-Overage-Usage</em> = <var class="keyword varname">2.5 GB</var>, and
                            <em class="ph i">Counter-Overage-Count</em> = <var class="keyword varname">3</var>
                    </li>

                </ul>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If a threshold is created from the SM GUI interface, then the threshold name
                    for different profile types follow a predefined nomenclature, as described
                        below:<ul class="ul" id="concept_kk2_m5l_r4b__ul_smt_m5l_r4b">
                        <li class="li">
                            <p class="p">For <var class="keyword varname">Percentage</var> type threshold:</p>

                            <p class="p">
                                <var class="keyword varname">ThresholdPercent1</var>,
                                    <var class="keyword varname">ThresholdPercent2</var>,....</p>

                        </li>

                        <li class="li">
                            <p class="p">For <var class="keyword varname">Absolute from start</var> type threshold:</p>

                            <p class="p">
                                <var class="keyword varname">ThresholdAbsStart1</var>,
                                    <var class="keyword varname">ThresholdAbsStart2</var>,...</p>

                        </li>

                        <li class="li">
                            <p class="p">For <var class="keyword varname">Absolute from end</var> type threshold:</p>

                            <p class="p">
                                <var class="keyword varname">ThresholdAbsEndCount1</var>,
                                    <var class="keyword varname">ThresholdAbsEndCount1</var>,...</p>

                        </li>

                        <li class="li">
                            <p class="p">For <var class="keyword varname">Absolute from zero</var> type threshold:</p>

                            <p class="p">
                                <var class="keyword varname">ThresholdAbsZeroCount1</var>,
                                    <var class="keyword varname">ThresholdAbsZeroCount2</var>,...</p>

                        </li>

                    </ul>
<p class="p">For example, if two <var class="keyword varname">Percentage</var> type thresholds are
                        defined, then first <var class="keyword varname">Percentage</var> threshold has threshold
                        name = <var class="keyword varname">ThresholdPercent1</var> and second threshold name =
                            <var class="keyword varname">ThresholdPercent2</var>.</p>
</div>

                <p class="p">This same name is given in source context with argument as &lt;ThresholdName&gt;,
                    such as <em class="ph i">Action-Type</em> and <em class="ph i">Counter-Threshold-Percentage</em>.</p>

                <div class="fig fignone" id="concept_kk2_m5l_r4b__fig_tmt_m5l_r4b">
                    <img class="image break" id="concept_kk2_m5l_r4b__image_umt_m5l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-example_snapshot_default.png" height="133" width="739" />
                </div>

            </div>

            <div class="section" id="concept_kk2_m5l_r4b__section_p43_s5l_r4b"><h3 class="title sectiontitle">Example: Bucket limit is reached</h3>
                
                <p class="p">Bob has an iPhone associated with a data bucket of 10 GB. An absolute threshold
                    is defined to send notification when the bucket limit is reached, that is, the
                    bucket content is exhausted. A data call is made and the data bucket is
                    completely used up. In this case, a notification is sent to Bob with details on
                    the data bucket consumption. For this example, configure the following
                    entities:</p>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_kk2_m5l_r4b__table_vmt_m5l_r4b" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:22.675736961451246%" /><col style="width:77.32426303854876%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3337">
                                    <p class="p">Entity</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3343">
                                    <p class="p">Task</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Notification server</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Configure the TCP/IP server. Multiple TCP/IP servers can be
                                    defined.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Notification template</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Define the text to be sent to Bob.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Notification preferences</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create a notification profile.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Thresholds</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create a threshold and define the notification variables
                                    along with the threshold rules.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Charging services</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create a charging service with 10 GB data bucket.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Device</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create a device and associate it with device lifecycle, set
                                    the notification profile, and add the bundle subscription.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Account</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create an account and associate it with the account
                                    lifecycle.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Bundles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create a bundle and associate it with the charging service.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3337 ">Lifecycles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3343 ">Create the lifecycles for device, account, bundle.</td>

                            </tr>

                        </tbody>
</table>

                <div class="p">The following figure shows the threshold rule defined in the SM GUI
                        (<span class="ph uicontrol">Charging → ☰ → Threshold profiles</span>):<div class="fig fignone" id="concept_kk2_m5l_r4b__fig_wmt_m5l_r4b">
                        <img class="image break" id="concept_kk2_m5l_r4b__image_xmt_m5l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-bucketend_limit_default.png" height="243" width="767" />
                    </div>
</div>

                <p class="p">The following figure shows the threshold rule defined in the SM GUI for the
                    notification sent on counter limit reached scenario:</p>

                <div class="fig fignone" id="concept_kk2_m5l_r4b__fig_ymt_m5l_r4b">
                    <img class="image break" id="concept_kk2_m5l_r4b__image_zmt_m5l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-counterlimit_default.png" height="241" width="621" />
                </div>

                <p class="p">The following figure shows the threshold rule defined in the SM GUI for the
                    notification sent on cap limit reached scenario:</p>

                <div class="fig fignone" id="concept_kk2_m5l_r4b__fig_ant_m5l_r4b">
                    <img class="image break" id="concept_kk2_m5l_r4b__image_bnt_m5l_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-cap_limitreached_default.png" height="277" width="724" />
                </div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title5" id="concept_r5k_5tl_r4b"><h2 class="title topictitle2" id="ariaid-title5">Resource usage on each CCR-Update/Terminate</h2>
<div class="body conbody">
            <div class="section" id="concept_r5k_5tl_r4b__section_xnr_5tl_r4b"><p class="p">Notification can be sent to the NS server for a
                    bucket or counter as follows:</p>
<ul class="ul" id="concept_r5k_5tl_r4b__ul_ynr_5tl_r4b">
                    <li class="li">
                        <p class="p">Whenever a consumption is done from the bucket, at the end of update and
                            terminate request, a notification is sent with dynamic variables.</p>

                    </li>

                    <li class="li">
                        <p class="p">Whenever a counter value is updated, at the end of update and terminate
                            request, a notification is sent with dynamic variables.</p>

                    </li>

                </ul>
An additional logic is supported to check the
                    <strong class="ph b">Report Reason</strong> in the Usage messages for update request and terminate
                request. The value of the AVP is used to determine if the Update notification is
                sent. This is applicable to both 4G and 5G calls. Following is the rule example for
                4G and 5G calls:<p class="p">4G call:</p>
<a href="../images/4g_call.png" class="image"><img class="image break scalefit" id="concept_r5k_5tl_r4b__image_j1v_3lq_vqb" src="../images/4g_call.png" /></a><p class="p">5G call:</p>
<a href="../images/5g_call.png" class="image"><img class="image break scalefit" id="concept_r5k_5tl_r4b__image_cfr_jlq_vqb" src="../images/5g_call.png" /></a><div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <p class="p">Configure the following condition in the rule to avoid CCR-Initial
                        notification:</p>

                    <p class="p">
                        <samp class="ph systemoutput">if RATING_POSTPROCESSING.Discount-Id present</samp>
                    </p>
</div>
<p class="p">The TCP/IP notification sent to a network node to indicate that a bucket
                    is consumed consists of the mandatory header fields mentioned in <a class="xref" href="#concept_yfj_wsl_r4b__Headerfields">Header fields for sending TCP/IP notification</a> and the following
                    notification variables:</p>
<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For further details on NS configuration, see the <cite class="cite">NOKIA Converged
                            Charging Notification Service (NS) User Guide</cite>.</div>
<table cellpadding="4" cellspacing="0" summary="" id="concept_r5k_5tl_r4b__table_znr_5tl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for bucket consumption at each
                        CCR-U/T</span></caption><colgroup><col style="width:10.56533827618165%" /><col style="width:38.368860055607044%" /><col style="width:31.32530120481928%" /><col style="width:9.267840593141798%" /><col style="width:10.472659870250231%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3541">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3547">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3553">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3559">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e3565">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">ACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call.</p>

                                    <p class="p">Create a custom data dictionary with Id as
                                            <span class="ph uicontrol">BillingAccountID</span> and content type
                                        as <span class="ph uicontrol">DEVICE</span>. Attach custom data in
                                        device with key as <span class="ph uicontrol">BillingAccountID</span>.
                                        Priority of custom data is higher.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">RATING_POSTPROCESSING.Billing-Account-Id</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> = <var class="keyword varname">SUBSCRIPTION.AccountID</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">APNTRCOS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">
                                    <p class="p">This variable indicates the name of the charging service.</p>

                                    <p class="p">Create a custom data dictionary with Id as
                                            <span class="ph uicontrol">Segment</span> and content type as
                                            <span class="ph uicontrol">DEVICE</span>. Attach custom data in
                                        device with key as <span class="ph uicontrol">Segment</span>. Priority
                                        of custom data is higher.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">RATING_POSTPROCESSING.Class-Of-Service</var>
                                    </p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">BUNDLE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the name of the bundle.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">BUNDLE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Bundle-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the discount ID. It is the ID of the
                                    bucket for which notification is sent.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Discount-Id</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">CIDABYUSE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the bucket value. If there is a
                                    carry-over bucket used in the call, the value of CV is the sum
                                    of main bucket value and carry-over bucket value.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">CIDABYUSE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Current-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">BigDecimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">CRT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the bucket reset timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">CRT</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Reset-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">CUT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the timestamp of either last Billing
                                    Cycle Reset (BCR) or any HLAPI/Admin change to buckets. It has
                                    the value when bucket was updated by any method such as CRUD
                                    operation or BCR.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">CUT</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Last-Billing-Cycle-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the notification event.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">CALL_COMMON.Notification-Event</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the time when the notification is
                                    generated for a bucket. It refers to the last three digits or
                                    milliseconds of the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Unix-Timestamp-Ms</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Unix-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e3541 "> TOS</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e3547 "> This variable indicates the type of service. It
                                    can have values like DIAM, SMSC.</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">TOS</em> = <var class="keyword varname">DIAM</var>
                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e3559 "> String</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e3565 "> Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">
                                    <p class="p">Following is the list of different values for TOS:</p>

                                    <ul class="ul" id="concept_r5k_5tl_r4b__ul_a4r_5tl_r4b">
                                        <li class="li">
                                            <p class="p">VOIC: Voice call</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">SMSC: Short message</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">MMSC: Multimedia message</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">PACK: Data transport</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">BREW: Brew service</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">ADMN: Audit</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">IMOM: IMOM call</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">DIAM: Diameter</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">USSD: Unstructured Supplementary Service Data</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">VDEO: VoLTE video call</p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">TYPE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the resource type for which
                                    notification is being triggered. For bucket consumption, this is
                                    set as <var class="keyword varname">BUCKET</var>.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">TYPE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Resource-Type</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">ULI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">
                                    <p class="p">This variable indicates the spending limit threshold.</p>

                                    <p class="p">This is the absolute value of Threshold/CAP (even if they are
                                        defined in percentage), which is reached during the
                                        processing of CCR-U/T. If no threshold/CAP is reached, this
                                        parameter is sent as 0.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">ULI</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Last-Crossed-Threshold-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">BigDecimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. The operator ensures
                                        that the value of this variable matches the unit type of the
                                        bucket. </p>

                                    <p class="p">Specify values such as MON, TIM, BYT.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">MON</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3541 ">USU</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3547 ">This variable indicates the reported units in CCR from
                                    CCR-U/T.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3553 ">
                                    <em class="ph i">USU</em> = <var class="keyword varname">CALL_COMMON.Used-Service-Units</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3559 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e3565 ">Optional</td>

                            </tr>

                        </tbody>
</table>
<table cellpadding="4" cellspacing="0" summary="" id="concept_r5k_5tl_r4b__table_b4r_5tl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for counter consumption at each
                        CCR-U/T</span></caption><colgroup><col style="width:10.93189964157706%" /><col style="width:31.630824372759854%" /><col style="width:38.08243727598566%" /><col style="width:8.960573476702509%" /><col style="width:10.39426523297491%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4138">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4144">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4150">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4156">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4162">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">ACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">
                                    <p class="p">This variable indicates the account ID of the subscription
                                        used in the call.</p>

                                    <p class="p">Create a custom data dictionary with Id as
                                            <span class="ph uicontrol">BillingAccountID</span> and content type
                                        as <span class="ph uicontrol">DEVICE</span>. Attach custom data in
                                        device with key as <span class="ph uicontrol">BillingAccountID</span>.
                                        Priority of custom data is higher.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> =
                                            <var class="keyword varname">RATING_POSTPROCESSING.BillingAccountID</var>
                                    </p>

                                    <p class="p">Or</p>

                                    <p class="p">
                                        <em class="ph i">APNRTRACT</em> = <var class="keyword varname">SUBSCRIPTION.AccountID</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">APNTRCOS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">
                                    <p class="p">This variable indicates the name of the charging service.</p>

                                    <p class="p">Create a custom data dictionary with Id as
                                            <span class="ph uicontrol">Segment</span> and content type as
                                            <span class="ph uicontrol">DEVICE</span>. Attach custom data in
                                        device with key as <span class="ph uicontrol">Segment</span>. Priority
                                        of custom data is higher.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">RATING_POSTPROCESSING.Class-Of-Service</var>
                                    </p>

                                    <p class="p">
                                        <em class="ph i">COS</em> =
                                            <var class="keyword varname">THRESHOLD_PROFILE.Charging-Service</var>
                                    </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">BUNDLE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the name of the bundle.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">BUNDLE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Bundle-Name</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the discount ID. It is the ID of the
                                    counter for which notification is sent.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">CID</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Discount-Id</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">CIDABYUSE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the counter value.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">CIDABYUSE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Current-Value</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">COC</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable provides a count of the ongoing overage block
                                    as the overage limit blocks keep on repeating multiple
                                    times.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">COC</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Counter-Overage-Count</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Integer</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">CRT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the counter reset timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">CRT</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Reset-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">CUT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the timestamp of either last Billing
                                    Cycle Reset (BCR) or any HLAPI/Admin change to buckets. It has
                                    the value when counter was updated by any method such as CRUD
                                    operation or BCR.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">CUT</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Last-Billing-Cycle-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the notification event.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">EVT</em> = <var class="keyword varname">CALL_COMMON.Notification-Event</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">MDN</em> = <var class="keyword varname">SPR_DEVICE.E164</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">OLI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the overage limit in the counter
                                    instances.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">OLI</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Counter-Overage-Limit</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Big decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the time when the notification is
                                    generated. It refers to the last three digits or milliseconds of
                                    the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">T</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Unix-Timestamp-Ms</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">TIM</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Unix-Timestamp</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e4138 "> TOS</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e4144 "> This variable indicates the type of service. It
                                    can have values like DIAM, SMSC.</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">TOS</em> = <var class="keyword varname">DIAM</var>
                                </td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e4156 "> String</td>

                                <td class="entry cell-norowborder" style="vertical-align:top;" headers="d32217e4162 "> Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">
                                    <p class="p">Following is the list of different values for TOS:</p>

                                    <ul class="ul" id="concept_r5k_5tl_r4b__ul_c4r_5tl_r4b">
                                        <li class="li">
                                            <p class="p">VOIC: Voice call</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">SMSC: Short message</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">MMSC: Multimedia message</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">PACK: Data transport</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">BREW: Brew service</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">ADMN: Audit</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">IMOM: IMOM call</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">DIAM: Diameter</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">USSD: Unstructured Supplementary Service Data</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">VDEO: VoLTE video call</p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 "> </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">TYPE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the resource type for which
                                    notification is being triggered. For counter consumption, this
                                    is set as <var class="keyword varname">COUNTER</var>.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">TYPE</em> =
                                        <var class="keyword varname">RATING_POSTPROCESSING.Resource-Type</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">ULI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">
                                    <p class="p">This variable indicates the spending limit threshold. It is
                                        absolute value of threshold or cap. If no threshold or cap
                                        is reached, then this variable is sent as
                                            <var class="keyword varname">0</var>.</p>

                                    <p class="p">OR</p>

                                    <p class="p">If usage limit is defined, then this variable can also be
                                        mapped to the prorated usage limit in the counter
                                        instance.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <ul class="ul" id="concept_r5k_5tl_r4b__ul_d4r_5tl_r4b">
                                        <li class="li">
                                            <p class="p">If usage limit is not defined:</p>

                                            <p class="p">
                                                <em class="ph i">ULI</em> =
                                                  <var class="keyword varname">RATING_POSTPROCESSING.Last-Crossed-Threshold-Value</var>
                                            </p>

                                        </li>

                                        <li class="li">
                                            <p class="p">If usage limit is defined:</p>

                                            <p class="p">
                                                <em class="ph i">ULI</em> = <var class="keyword varname">RATING_
                                                  POSTPROCESSING.Counter-Usage-Limit</var>
                                            </p>

                                        </li>

                                    </ul>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">BigDecimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. The operator ensures
                                        that the value of this variable matches the unit type of the
                                        counter. </p>

                                    <p class="p">Specify values such as MON, TIM, BYT.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">UNI</em> = <var class="keyword varname">MON</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4138 ">USU</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4144 ">This variable indicates the reported units in CCR from
                                    CCR-U/T.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4150 ">
                                    <em class="ph i">USU</em> = <var class="keyword varname">CALL_COMMON.Used-Service-Units</var>
                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4156 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4162 ">Optional</td>

                            </tr>

                        </tbody>
</table>
</div>

            <div class="section" id="concept_r5k_5tl_r4b__section_dvm_xtl_r4b"><h3 class="title sectiontitle">Example: Notification at end of CCR-U/T for bucket and counter</h3>
                
                <p class="p">A notification is sent on counter usage at the end of each CCR-U/T request.
                    Consider that a subscription is attached to a device and the device has two
                    custom data as - <em class="ph i">BillingAccountID</em> = Account1, Segment = CS1. The
                    subscription is of bundle with only one charging service (CS1). The charging
                    service has one data bucket with initial value 1000000000. A counter (C1) is
                    attached to a device and the counter is of volume type with Counter Type =
                    USAGE, <em class="ph i">CounterScope</em> = ALL, <em class="ph i">CounterConsumptionType</em> = ALL. The
                    counter has threshold profile group with thresholds - Threshold1 = 10 from
                    absolute start, Threshold2 = 20 from absolute start. </p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For counters, absolute from end and percentage thresholds are allowed. For
                    configuration of absolute from end threshold, refer to section <a class="xref" href="abe_tpg_uli.html">ABE TPG for ULI</a>).</div>

                <p class="p">
                    <span class="ph uicontrol">Initial call with RSU = 15</span>
                </p>

                <p class="p">A data call is initiated with RSU = 15. Reservation is done from bucket and
                    current value = 999999985 and Unused value = 1000000000. The call is updated
                    with USU = 15 and RSU = 10. The bucket is committed and the current value =
                    999999975 and unused value = 999999985. The counter (C1) is applicable and is
                    incremented to 15. Threshold is processed and Threshold1 is crossed. Two
                    notifications are sent in update. One for bucket and another for counter.</p>

                <p class="p">Following is the content of notification sent after update call:</p>

                <div class="fig fignone" id="concept_r5k_5tl_r4b__fig_e4r_5tl_r4b">
                    <pre class="pre codeblock"><code>MSGID=TNWCRTAT5:1:18:18010:48446:@1458318061:1#RETRY1;APNRTRCOSCS1MDN1234568789
ACTAccount1TOSPACKEVTCCRU 
CIDB1USE00000000015.000000ULI000000000000000000UNIBYTTIM1458318061T752USU15.
000000CRT0CUT14581158</code></pre>
                </div>

                <div class="fig fignone" id="concept_r5k_5tl_r4b__fig_f4r_5tl_r4b">
                    <pre class="pre codeblock"><code>MSGID=TNWCRTAT5:1:18:18010:48446:@1458318061:1#RETRY2;APNRTRCOSCS1MDN1234568789
ACTAccount1TOSPACKEVTCCRU 
CIDC1USE00000000015.000000ULI000000000000000010UNIBYTTIM1458318061T752USU15.
000000CRT0CUT14581158</code></pre>
                </div>

                <p class="p">
                    <span class="ph uicontrol">Terminate with USU = 10</span>
                </p>

                <p class="p">A terminate request with USU = 10 is sent. The bucket is committed and current
                    value = 999999975 and unused value = 999999975. The counter (C1) is applicable
                    and is incremented to 25. The threshold (Threshold2) is crossed and notification
                    is sent after update call with the following notification content:</p>

                <div class="fig fignone" id="concept_r5k_5tl_r4b__fig_g4r_5tl_r4b">
                    <pre class="pre codeblock"><code>MSGID=TNWCRTAT5:1:18:18010:48446:@1458318061:1#RETRY1;APNRTRCOSCS1MDN1234568789
ACTAccount1TOSPACKEVTCCRT 
CIDB1USE00000000010.000000ULI000000000000000000UNIBYTTIM1458318061T752USU10.
000000CRT0CUT14581158</code></pre>
                </div>

                <div class="fig fignone" id="concept_r5k_5tl_r4b__fig_h4r_5tl_r4b">
                    <pre class="pre codeblock"><code>MSGID=TNWCRTAT5:1:18:18010:48446:@1458318061:1#RETRY2;APNRTRCOSCS1MDN1234568789
ACTAccount1TOSPACKEVTCCRT 
CIDC1USE00000000010.000000ULI000000000000000020UNIBYTTIM1458318061T752USU10.
000000CRT0CUT14581158</code></pre>
                </div>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Notifications only have the attributes defined in the rule of rating post
                        processing.</div>

                <p class="p">The following figure shows the rule group created for the
                        <span class="ph uicontrol">RATING_POST_PROCESSING</span> trigger:</p>

                <div class="fig fignone" id="concept_r5k_5tl_r4b__fig_ufv_ztf_znb">
                    <img class="image break" id="concept_r5k_5tl_r4b__image_rfx_ztf_znb" src="../images/img9yz-09126-ug01-pczza-sp1-rg1_default.png" />
                </div>

                <div class="p">The following figure shows the variables configured for the rule group created
                    for the <span class="ph uicontrol">RATING_POST_PROCESSING</span> trigger:<div class="fig fignone" id="concept_r5k_5tl_r4b__fig_i4r_5tl_r4b">
                        <img class="image break" id="concept_r5k_5tl_r4b__image_j4r_5tl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-rg2_default.png" height="278" width="707" />
                    </div>
</div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title6" id="concept_tsf_mtl_r4b"><h2 class="title topictitle2" id="ariaid-title6">Bundle or subscription renewal</h2>
<div class="body conbody">
            <div class="section" id="concept_tsf_mtl_r4b__section_bgl_ntl_r4b">
                <p class="p">Notification can be sent when a bundle or subscription is renewed or reset using
                    the subscription or account entity. When a subscription is renewed or reset, the
                    Send-Notification action at <span class="ph uicontrol">Subscription Renewed Event</span>
                    and <span class="ph uicontrol">Subscription Reset Event</span> events in lifecycle are
                    triggered internally. The subscription is scanned and the attached bucket and
                    counter information is retrieved, which is further sent to the notification
                    server. Note that a subscription is an instance of a bundle owned and paid by
                    the account. For each bucket or counter, a new notification is sent to the
                    external notification client for further processing. To enable this
                    notification, set the <var class="keyword varname">Dynamic Notification Custom flag</var> to
                    true.</p>

                <p class="p">The TCP/IP notification sent to a network node to indicate that a bundle or
                    subscription is renewed or reset consists of the mandatory header fields
                    mentioned in <a class="xref" href="#concept_yfj_wsl_r4b__Headerfields">Header fields for sending TCP/IP notification</a> and
                    the following notification variables:</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For further details on NS configuration, see the <cite class="cite">NOKIA Converged
                            Charging Notification Service (NS) User Guide</cite>.</div>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_tsf_mtl_r4b__table_cgl_ntl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for bundle or subscription renewal
                        case</span></caption><colgroup><col style="width:11.401273885350319%" /><col style="width:45.28662420382166%" /><col style="width:26.560509554140125%" /><col style="width:6.369426751592357%" /><col style="width:10.382165605095542%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4944">
                                    <p class="p">Parameter</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4950">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4956">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4962">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e4968">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">ACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable must be mapped to a custom data with name such
                                    as <span class="ph uicontrol">BillingAccountID</span> defined in the
                                    device. Otherwise, this parameter value is null.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">APNRTRACT = SPR_DEVICE.BillingAccountID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">APNRTRCOS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable must be mapped to a custom data with name such
                                    as <span class="ph uicontrol">Segment</span> defined in the device. Else
                                    this parameter value is null.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">NCC</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">Bundle ID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the bundle ID of the subscription for
                                    which the notification is sent.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">Bundle123</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the bucket ID or counter ID for which
                                    the notification is sent.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">Bucket1/Counter1</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">Device ID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the device identifier that triggers
                                    the notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">Device124</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">Device Identifier (IMSI)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the IMSI value or device that
                                    triggers the notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">100000001</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the notification event ID.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">NOTRST</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">TOS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the service type.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">ADMN (constant for current notification)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">100000001</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value. The operator ensures
                                        that the value of this variable matches the unit type of the
                                        bucket or counter.</p>

                                    <p class="p">This can be in TIM for time, BYT for volume, UNI for unit,
                                        MON for money.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">BYT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">1525169028</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the time when the notification is
                                    generated. It refers to the last three digits or milliseconds of
                                    the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">306</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4944 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4950 ">This variable indicates the used bytes in
                                    subscription.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4956 ">0</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4962 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e4968 ">Optional</td>

                            </tr>

                        </tbody>
</table>

            </div>

            <div class="section" id="concept_tsf_mtl_r4b__section_dgj_ptl_r4b"><h3 class="title sectiontitle">Example: Bundle renewal and reset</h3>
                
                <p class="p">Bob has an iPhone associated with a subscription of 10 GB data bucket that gets
                    renewed monthly. Once the subscription or bundle is renewed, a notification is
                    sent to Bob. For this example, the ME application preference <var class="keyword varname">Dynamic
                        Notification Custom Flag</var> must be set to <var class="keyword varname">true</var>
                    and the following entities must be configured:</p>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_tsf_mtl_r4b__table_dgl_ntl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:23.201856148491874%" /><col style="width:76.79814385150812%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5256">
                                    <p class="p">Entity</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5262">
                                    <p class="p">Task</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Notification server</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Configure the TCP/IP server. Multiple TCP/IP servers can be
                                    defined.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Notification template</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Define the text to be sent to Bob.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Notification preferences</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Create a notification profile.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Lifecycles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Create a monthly renewal subscription lifecycle with type set
                                    to BillCycle and applicable to Subscription, and define the
                                    Subscription Renewed Event.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Charging services</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Create a 10 GB data bucket.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Bundles</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">
                                    <p class="p">Create the following data:</p>

                                    <ul class="ul" id="concept_tsf_mtl_r4b__ul_egl_ntl_r4b">
                                        <li class="li">
                                            <p class="p">Create a bundle and link it to monthly renewal
                                                subscription lifecycle</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">Associate the charging service with 10 GB data bucket
                                                to it.</p>

                                        </li>

                                    </ul>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Device</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Create a device and associate it with device lifecycle, set
                                    the notification profile, and add the bundle subscription.
                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5256 ">Account</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5262 ">Create an account and associate it with account lifecycle.
                                </td>

                            </tr>

                        </tbody>
</table>

                <div class="note" id="concept_tsf_mtl_r4b__note_fpr_jfw_ptb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For details on configuring the ME application
                    preferences, see <em class="ph i">Managed Elements</em> section in <em class="ph i">Global Configuration
                        Guide</em>.)</div>

                <div class="p">The following figure shows the lifecycle entity configured with the Subscription
                    Renewed Event.<div class="fig fignone" id="concept_tsf_mtl_r4b__fig_ggl_ntl_r4b"><span class="figcap"><span class="fig--title-label">Figure: </span>Subscription Renewed Event</span>
                        
                        <img class="image break" id="concept_tsf_mtl_r4b__image_hgl_ntl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-bundle_renewal_default.png" height="207" width="540" />
                    </div>
</div>

                <div class="p">Similarly, the following figure shows the lifecycle entity configured with the
                    Subscription Reset Event.<div class="fig fignone" id="concept_tsf_mtl_r4b__fig_igl_ntl_r4b"><span class="figcap"><span class="fig--title-label">Figure: </span>Subscription Reset Event</span>
                        
                        <img class="image break" id="concept_tsf_mtl_r4b__image_jgl_ntl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-bundle_reset_default.png" height="207" width="540" />
                    </div>
</div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title7" id="concept_ctg_dtl_r4b"><h2 class="title topictitle2" id="ariaid-title7">Overage limit is reached for account</h2>
<div class="body conbody">
            <div class="section" id="concept_ctg_dtl_r4b__section_yjf_2tl_r4b">
                <p class="p">A notification is sent for an account when the threshold attached to the account
                    is crossed or overage limit is reached at the end of CCR-U/T request. Whenever a
                    consumption is done from account, a notification is sent to the Notification
                    Server with the notification variables (listed in the <a class="xref" href="#concept_yfj_wsl_r4b__Headerfields">Header fields for sending TCP/IP notification</a> table). The dynamic
                    notification variables with notification action can be configured in the
                    threshold rule on the SM GUI.</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> A user can configure the TCP/IP notification for threshold values other than
                        overage.</div>

                <p class="p">To support notification for an account, the notification variable corresponding
                    to an account is evaluated and passed to the notification client for processing.
                    When the notification action is triggered on account, the notification action
                    attempts to find the device that belongs to the administrator of the
                    account:</p>

                <ul class="ul" id="concept_ctg_dtl_r4b__ul_zjf_2tl_r4b">
                    <li class="li">
                        <p class="p">If a device is not found, then the action ends without sending a
                            notification.</p>

                    </li>

                    <li class="li">
                        <p class="p">If the device is found, then the notification client is invoked for the
                            first device attached.</p>

                    </li>

                </ul>

                <p class="p">Following notification variables are used for sending notification to an
                    account:</p>

                <ul class="ul" id="concept_ctg_dtl_r4b__ul_akf_2tl_r4b">
                    <li class="li">
                        <p class="p">AccountId</p>

                    </li>

                    <li class="li">
                        <p class="p">Account balance</p>

                    </li>

                    <li class="li">
                        <p class="p">Account End date</p>

                    </li>

                    <li class="li">
                        <p class="p">Account Entity end date (from entity lifecycle)</p>

                    </li>

                    <li class="li">
                        <p class="p">Overage Amount</p>

                    </li>

                    <li class="li">
                        <p class="p">Threshold value</p>

                    </li>

                </ul>

                <p class="p">The values for account balance, threshold, and overage are displayed as:</p>

                <ul class="ul" id="concept_ctg_dtl_r4b__ul_bkf_2tl_r4b">
                    <li class="li">
                        <p class="p">If values are decimals, then values with precision limit (up to 2 digits)
                            are received in the email.</p>

                        <p class="p">For example, if the <em class="ph i">ThresholdValue</em> = <var class="keyword varname">30.5676</var>,
                            then value received in the email notification is
                                <var class="keyword varname">30.57</var>.</p>

                    </li>

                    <li class="li">
                        <p class="p">If the values are whole numbers, for example <em class="ph i">AccountBalance</em> =
                                <var class="keyword varname">20</var>, then the value received in the email
                            notification is <var class="keyword varname">20.0</var>.</p>

                    </li>

                </ul>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <p class="p">In an email notification, the overage value gets populated for the threshold
                        where overage flag is true when the threshold value received in the email
                        notification is equal to the overage value.</p>

                    <p class="p">For example:</p>

                    <p class="p">
                        <kbd class="ph userinput">AccountName:AccD175931,
                            AccountCurrentValue:10.0,AccountOverageValue:0.0,AccountEndDate:2019-02-23,ThresholdValue:0.0,AccountEntityEndDate:2019-03-18</kbd>
                    </p>
</div>

                <p class="p">For information on <em class="ph i">thresholdName</em>, <em class="ph i">thresholdValue</em>, <em class="ph i">recurring</em>,
                    and <em class="ph i">overageFlag</em> EDR tags, see the <cite class="cite">NOKIA Converged Charging CDR/EDR
                        Reference guide</cite>.</p>

                <div class="fig fignone" id="concept_ctg_dtl_r4b__fig_ckf_2tl_r4b"><span class="figcap"><span class="fig--title-label">Figure: </span>Example for TCP/IP threshold configuration when overage limit is reached
                        for an account</span>
                    
                    <a href="../images/img9yz-09126-ug01-pczza-sp1-tcpip_threshold_config_example_default.png" class="image"><img class="image break scalefit" id="concept_ctg_dtl_r4b__image_dkf_2tl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-tcpip_threshold_config_example_default.png" height="353" width="676" /></a>
                </div>

                <table cellpadding="4" cellspacing="0" summary="" id="concept_ctg_dtl_r4b__overagelimitvariables" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>TCP/IP notification variables for overage limit reached case</span></caption><colgroup><col style="width:11.395759717314489%" /><col style="width:42.75618374558304%" /><col style="width:26.59010600706714%" /><col style="width:8.8339222614841%" /><col style="width:10.424028268551236%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5577">
                                    <p class="p">Variable name</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5583">
                                    <p class="p">Description</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5589">
                                    <p class="p">Example</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5595">
                                    <p class="p">Type</p>

                                </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5601">
                                    <p class="p">Mandatory/ Optional</p>

                                </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">APNRTRACT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable must be mapped to a custom data with name such
                                    as <span class="ph uicontrol">BillingAccountID</span> defined in the
                                    device. Else this parameter value is null.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">APNRTRACT = SPR_DEVICE.BillingAccountID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">COS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable must be mapped to a custom data with name such
                                    as <span class="ph uicontrol">Segment</span> defined in the device. Else
                                    this parameter value is null.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">NCC</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">CID</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the account ID for which the
                                    notification is sent. It can also be filled with a static
                                    value.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">Bucket1/Counter1</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">PCT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">The threshold cannot be defined for account. Therefore, it
                                    can be filled with a static value, example, 100.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">PCT = THRESHOLD_PROFILE. Threshold-Percentage</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">Big Decimal</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">MDN</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the MSISDN value or device that
                                    triggers the notification. The variable is the E.164 number
                                    configured in the device.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">100000001</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">EVT</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the notification event ID. In the
                                    current case, it is OVGLMT.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">NOTRST</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">UNI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">
                                    <p class="p">This variable indicates the unit of remaining allowance and
                                        configured as a string value.</p>

                                    <p class="p">MON can be used for money.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">MON</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">TIM</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the Unix timestamp when the
                                    notification is generated. This is the current time period in
                                    seconds.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">1525169028</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">T</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the time when the notification is
                                    generated. It refers to the last three digits or milliseconds of
                                    the Unix timestamp.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">306</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">ULI</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the spending limit counter threshold.
                                    It is the value of overage defined on account. If there is no
                                    overage defined on account, then this parameter has the value
                                    0.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">THRESHOLD_PROFILE.Overage-Value</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">Long</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">BAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the remaining allowance to next
                                    threshold. It can be set to a static value of 0.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">THRESHOLD_PROFILE.Account-Current-Value</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">BIG DECIMAL</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">USE</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the overage defined on account. If
                                    there is no overage defined on account, then this parameter has
                                    the value 0.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">0</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">Double</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5577 ">LNG</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5583 ">This variable indicates the language of notification.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5589 ">LNG = “ENGLISH”</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5595 ">String</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5601 ">Optional</td>

                            </tr>

                        </tbody>
</table>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If you configure the notification variable with value
                            <var class="keyword varname">THRESHOLD_PROFILE.Overage-Value</var> in rule actions, then
                        it only contains value when <em class="ph i">Overage Flag</em> is set
                            <var class="keyword varname">TRUE</var> in ThresholdProfileGroup.</div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title8" id="concept_yfj_wsl_r4b"><h2 class="title topictitle2" id="ariaid-title8">Header fields and notification variables for sending TCP/IP notification</h2>
<div class="body conbody">
            <div class="section" id="concept_yfj_wsl_r4b__hn">
                <p class="p">The following section provides details on the notification variables used for
                    TCP/IP notifications.</p>

            </div>

            <div class="section" id="concept_yfj_wsl_r4b__Headerfields"><h3 class="title sectiontitle">Header fields for sending TCP/IP notification</h3>
                
                <p class="p">The following header fields in a notification template are sent to a network node
                    for handling Charging Data Records (CDRs).</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For notification using the northbound provisioning interface, <em class="ph i">SYSTEM</em>
                        context parameters as header parameters.</div>

                <p class="p">The header information is not defined in the notification template but are
                    predefined attributes in the Notification Server.</p>

                <p class="p">Format of TCP/IP notification is as follows:</p>

                <p class="p">
                    <code class="ph codeph">MSGID=MASID:SPAID:HOSTID:CLIENTID:Sequentialnumber:@timecode:UsageSequenceNumber#RETRY0/1/2</code>
                </p>

                <p class="p">
                    <span class="ph uicontrol">Example:</span>
                </p>

                <p class="p">
                    <samp class="ph systemoutput">MSGID=TNWCRTAT7:2:3:3005:81806:@1458289358#RETRY0;</samp>
                </p>

                <div class="p">The following table explains the fields in the notification template for sending
                    a TCP/IP notification:<table cellpadding="4" cellspacing="0" summary="" id="concept_yfj_wsl_r4b__table_qwy_1tl_r4b" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Header fields for sending TCP/IP notification to a network
                            node</span></caption><colgroup><col style="width:17.54907792980369%" /><col style="width:39.61927424152291%" /><col style="width:26.47233789411065%" /><col style="width:5.94883997620464%" /><col style="width:10.41046995835812%" /></colgroup><thead class="thead" style="text-align:left;">
                                <tr class="row">
                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5949">
                                        <p class="p">Header field</p>

                                    </th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5955">
                                        <p class="p">Description</p>

                                    </th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5961">
                                        <p class="p">Example</p>

                                    </th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5967">
                                        <p class="p">Type</p>

                                    </th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d32217e5973">
                                        <p class="p">Mandatory/ Optional</p>

                                    </th>

                                </tr>

                            </thead>
<tbody class="tbody">
                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">MASID</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">This variable indicates the identifier of the physical
                                        system, such as system ID. This is the NCC site ID that
                                        generates the notification.</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">
                                        <em class="ph i">MASID</em> = <var class="keyword varname">CALL_COMMON.Site_ID</var> or
                                            <var class="keyword varname">SYSTEM.Site-ID</var>
                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">String</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">SPAID</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">This variable indicates the identifier of the application
                                        fixed against the NCC node.</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">
                                        <em class="ph i">SPAID</em> = <var class="keyword varname">CALL_COMMON.Application_ID</var>
                                        or <var class="keyword varname">SYSTEM.OCS-Application-ID</var>
                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">Integer</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">HOSTID</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">This variable indicates the identifier of the
                                        host.</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">
                                        <em class="ph i">HOSTID</em> = <var class="keyword varname">CALL_COMMON.Host_ID</var> or
                                            <var class="keyword varname">SYSTEM.Host-ID</var>
                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">String</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">CLIENTID</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">
                                        <p class="p">This variable indicates the client identifier within the
                                            host.</p>

                                        <div class="p">
                                            <div class="note" id="concept_yfj_wsl_r4b__note_spb_kkx_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> As there is no separate
                                                client ID in NCC, the <em class="ph i">Client ID</em> has the same
                                                value as the <em class="ph i">SPAID</em>.</div>

                                        </div>

                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">
                                        <em class="ph i">CLIENTID</em> =
                                            <var class="keyword varname">CALL_COMMON.Application_ID</var> or
                                            <var class="keyword varname">SYSTEM.OCS-Application-ID</var>
                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">String</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">SequentialNumber</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">This variable is the Sequence ID for the notification
                                        transaction. It is sent by the notification server.</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">5</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">Integer</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">Timecode</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">This variable is the Unix timestamp of each message being
                                        sent. It is updated with each retry and is sent by the
                                        notification server.</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">525068484725</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">Long</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">UsageSequenceNumber</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">
                                        <p class="p">This variable is the notification processing sequence
                                            number of usage (bucket or counter) for which the
                                            notification is being sent. </p>

                                        <p class="p">It is sent by charging to NS so that same can be used by
                                            NS while sending the notification to TCP/IP server. </p>

                                        <div class="p">
                                            <div class="note" id="concept_yfj_wsl_r4b__note_hnw_pjx_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> It is used only in CCR-U and
                                                CCR-T.</div>

                                        </div>

                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">1</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">Integer</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5949 ">#RETRY0/1/2</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5955 ">
                                        <p class="p">The number of retries that have been made to send the
                                            message without ACK. It is sent by the notification
                                            server. </p>

                                        <p class="p">1#RETRY&lt;X&gt;, where &lt;X&gt; is the number of
                                            retries that have been made to send the message without
                                            ACK.</p>

                                    </td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5961 ">0/1/2</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5967 ">Integer</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d32217e5973 ">Mandatory</td>

                                </tr>

                            </tbody>
</table>
</div>

            </div>

        </div>
</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>