<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Cache management" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="cache_management" />
<link rel="stylesheet" type="text/css" href="../../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../../web/css/common-extended.css" /><title>Cache management</title>
<script src="../../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="cache_management">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Cache management</h1>
<div class="body">
        <div class="p">The issues with cache management for complex map versioning can be solved by deleting the
            ineffective versions from both ME database and cache. When a new version of the complex map is
            provisioned to ME, the distributed versions are checked and ineffective versions are
            withdrawn (unprovisioned). For this purpose, the following enhancements are made:<ul class="ul" id="cache_management__ul_fw5_nby_srb">
                <li class="li">An SM application preference <strong class="ph b">History Period</strong> is used. This parameter
                    determines the number of days that the complex map old versions are kept in ME
                    database and Cache. The default value for this field is 60 days and the minimum is
                    0.</li>

                <li class="li"><strong class="ph b">Withdraw ineffective versions:</strong> When a new version of the complex map is
                    provisioned to ME, <strong class="ph b">History Period</strong> application preference is obtained to
                    check which versions are not effective and then withdraw them. The complex map
                    version is not effective when the Current Time - History Period &gt; Version End
                    Date. </li>

            </ul>
</div>

        <div class="p">Following are the APIs impacted by this enhancement and the APIs internal logic is
                updated:<ul class="ul" id="cache_management__ul_msx_1cy_srb">
                <li class="li"><strong class="ph b">Provision Mapping Table API:</strong> This API is used to provision a mapping table.<div class="p">
                        <pre class="pre codeblock"><code>/services/ServiceManager/provision/mappingTable</code></pre>
                    </div>
See the following example:<pre class="pre codeblock"><code>{
  "securityDomain": "string",
  "distList": [
    "string"
  ],
  "deleteDistList": [
    "string"
  ],
  "serviceProvider": "string",
  "entityVersionDetails": {
    "majorVersion": 0,
    "minorVersion": 0,
    "startTime": 0,
    "smEntityState": "DRAFT"
  },
  "description": "string",
  "versionNote": "string",
  "publishStatus": "DRAFT",
  "mapName": "string",
  "draftVersion": "string",
  "keyLabels": [
    "string"
  ],
  "valueLabels": [
    "string"
  ],
  "mapType": "REGEX_PATTERN",
  "refBasedMap": true,
  "recordCount": 0,
  "id": "string",
  "versionedId": "string"
}</code></pre></li>

                <li class="li"><strong class="ph b">Publish Mapping Table API:</strong> This API publishes a mapping table to all MEs.<div class="p">
                        <pre class="pre codeblock"><code>/services/ServiceManager/publish/mappingTable</code></pre>
                    </div>
</li>

                <li class="li">Retry Provision Mapping Table API: This API is used to retry provisioning of a
                    mapping table.<div class="p">
                        <pre class="pre codeblock"><code>/services/ServiceManager/retryProvision/mappingTable</code></pre>
                    </div>
</li>

            </ul>
</div>

    </div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>