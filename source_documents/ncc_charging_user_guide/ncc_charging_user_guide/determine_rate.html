<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Determining rate based on counter threshold" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="determine_rate" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Determining rate based on counter threshold</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="determine_rate">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Determining rate based on counter threshold</h1>
<div class="body">
        <div class="p">Rate can also be determined based on the counter threshold, that is, using the action
            RATING.Threshold-Rate, the Rate ID can be determined. See the following examples: <ul class="ul" id="determine_rate__ul_qhy_stk_w4b">
                <li class="li">If a counter has a threshold from threshold 0 to threshold 1, then the rate is
                    rate 1.</li>

                <li class="li">If a counter has a threshold from threshold 1 to threshold 2, then the rate is
                    rate 2.</li>

                <li class="li">If a counter has a threshold from threshold 2, then the rate is rate 3.</li>

            </ul>
</div>

        
        <p class="p">If the threshold rate can be applied for a call, then it has higher priority than the
            normal rate (normal rate is determined from RATING.Rate action).</p>

        <p class="p">Following are the action attributes to support rate to be determined from threshold:</p>

        <table cellpadding="4" cellspacing="0" summary="" id="determine_rate__table_w2f_c5k_w4b" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Action attributes</span></caption><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d159210e62">Action</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d159210e65">Definition</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d159210e68">Options</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e62 ">RATING.Threshold-Rate</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e65 ">This action attribute is the  name defined within the RATING result
                            context. It indicates the output tariff rule as threshold rate. If the
                            related counter threshold is crossed, the threshold rate can be applied
                            to the monetary resource, that is, bucket of monetary type or account
                            balance.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e68 ">Input a Rate_STRING, CounterId_STRING, CrossedThreshold_STRING and
                            Target_STRING. TThe Target_STRING is an optional text string to be
                            parsed. If it is not filled, then resource gets selected based on
                            charging service's available resource (example, monetary bucket → main
                            balance).</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e62 ">RATING.Threshold-Next-Rate</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e65 ">This action attribute is the  name defined within the RATING result
                            context. It indicates the output tariff rule as threshold next rate. If
                            the related counter threshold is crossed, the threshold next rate can be
                            applied as secondary rate to the monetary resource, that is, bucket of
                            monetary type or account balance.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d159210e68 ">Input a Rate_STRING, CounterId_STRING, CrossedThreshold_STRING and
                            Target_STRING. The Target_STRING is an optional text string to be
                            parsed. If it is not filled, then resource gets selected based on
                            charging service's available resource (example, monetary bucket → main
                            balance).</td>

                    </tr>

                </tbody>
</table>

        <div class="p">Following are the assumptions on threshold rate:<ul class="ul" id="determine_rate__ul_pcn_vqk_w4b">
                <li class="li">The counter and threshold configuration in Tariff rule is consistent with the
                    configuration in the counter entity.</li>

                <li class="li">The recurring threshold is not supported.</li>

                <li class="li">The threshold definition name is unique when multiple threshold group profiles
                    are attached to the counter. If a duplicate threshold definition name exists,
                    the first threshold instance with that name in counter instance will be
                    checked.</li>

                <li class="li">The reserved amount for the counter is not considered when checking whether the
                    threshold is crossed or not.</li>

                <li class="li">The slice reduction feature must be turned on to make sure that the threshold is
                    considered during quota allocation and for over-committed usage, it can apply
                    the rate based on crossed threshold.</li>

            </ul>
</div>

        <div class="section" id="determine_rate__section_kvq_1xs_w4b"><h2 class="title sectiontitle">Example</h2>
            
            <p class="p">Following is the example that shows the provisioning of threshold rate that can be
                applied to a call. In this example, when the <strong class="ph b">ThresholdPercent1</strong> threshold of
                    <strong class="ph b">testcounter</strong> is crossed, the rate <strong class="ph b">testrate1</strong> is applied to bucket
                    <strong class="ph b">TBYBucket</strong>. If the <strong class="ph b">ThresholdPercent2</strong> threshold of
                    <strong class="ph b">testcounter</strong> is crossed, the rate <strong class="ph b">testrate2</strong> is applied to bucket
                    <strong class="ph b">TBYBucket</strong>. If the testcounter's last crossed threshold is not
                    <strong class="ph b">ThresholdPercent1</strong> or <strong class="ph b">ThresholdPercent2</strong>, then the base rate
                    <strong class="ph b">testrate</strong> is applied to <strong class="ph b">TBYBucket</strong>.</p>

            <div class="p">
                <img class="image break" id="determine_rate__image_azv_sbt_w4b" src="../images/example_threshold_rate.png" height="340" width="901" />
            </div>

        </div>

    </div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>