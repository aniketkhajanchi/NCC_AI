<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Rating group or category control" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-d1e199026" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Rating group or category control</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-d1e199026">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Rating group or category control </h1>
<div class="body conbody">
<div class="section">
<p class="p">This feature provides the flexibility to define a number of schema on a per category basis. This
                is to determine whether to include or exclude the usage counting for specific rating
                groups. Operators can also enable offline feature to allow specific rating groups
                without counting usage for access barred devices. See <a class="xref" href="offline_rating_group.html">Allow specific rating groups without counting usage for access barred devices</a> for more details.</p>

<p class="p">You can attach these schema to a subscription or a charging service to provide flexibility to define whether the data in a specific MSCC or flow level category to consider the following categories:</p>
<ul class="ul">
<li class="li">
<p class="p">
<span class="ph uicontrol">Always deny this category</span>
</p>

</li>

<li class="li">
<p class="p">
<span class="ph uicontrol">Always allow this category </span>
</p>

<p class="p">For always allow and always deny categories, add the applicability condition based on rating group. And attach it to a charging service to define whether the data in a particular MSCC or category is allowed or not.</p>

</li>

<li class="li">
<p class="p">
<span class="ph uicontrol">Allow and check time or applicability but do not count the usage</span>: Add time as a condition inside the applicability condition to check if a charging service can be selected or not.</p>

</li>

<li class="li">
<p class="p">
<span class="ph uicontrol">Treat as normal and count and apply usage thresholds</span>: This is the default handling on a category or rating group. </p>

</li>

</ul>

<p class="p">The category logic and rules are enabled as rules based configuration attached to the subscription or charging service definition. They are processed early in the subscription flow to enable optimization of processing.</p>

</div>

</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_plb_3sl_r4b"><h2 class="title topictitle2" id="ariaid-title2">Always allow this category</h2>
<div class="body conbody">
            <div class="section" id="concept_plb_3sl_r4b__section_w3z_3sl_r4b">
                <p class="p">For always allow this category, the tariff rule is added in the charging service. </p>

                <p class="p">Example: <kbd class="ph userinput">if GY_MESSAGE.Multiple-Services-Credit-Control.Rating-Group =
                        'example' then RATING.No-Charge</kbd>
                </p>

                <p class="p">Tariff rule in charging service is <kbd class="ph userinput">RATING.No-Charge</kbd>
                </p>

                <p class="p">Since the call is free for always allowed rating group, therefore, all the
                    charging services must configure no charge for this rating group. Otherwise,
                    account balance or bucket is used to cover the call charge.</p>

                <p class="p">The result code 2001 is returned.</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Since this is always allow this category, the applicability condition in all
                        the charging service must be configured as shown in example.</div>

            </div>

            <div class="section" id="concept_plb_3sl_r4b__section_uyh_jsl_r4b"><h3 class="title sectiontitle">Example: Allow allowed category</h3>
                
                <p class="p">The result code can be determined by the rule in <em class="ph i">GY_PRE_PROCESSING</em> and
                        <em class="ph i">GY_POST_PROCESSING</em> for always allowed rating group. In this case, if
                    the CCR has rating group 8, then the call is free of charge and the result code
                        <samp class="ph systemoutput">4011</samp> is returned in CCA message. If a return
                    result code is configured in the GY_PRE_PROCESSING rule, then the usage is not
                    counted for that rating group. If a return result code is configured in the
                    GY_POST_PROCESSING rule, then the usage for that rating group can be
                    counted.</p>

                <div class="fig fignone" id="concept_plb_3sl_r4b__fig_x3z_3sl_r4b">
                    <img class="image break" id="concept_plb_3sl_r4b__image_y3z_3sl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-allow_category_gy_default.png" height="295" width="660" />
                </div>

                <p class="p">
                    <span class="ph uicontrol">GY_POST_PROCESSING</span>
                </p>

                <div class="fig fignone" id="concept_plb_3sl_r4b__fig_z3z_3sl_r4b">
                    <img class="image break" id="concept_plb_3sl_r4b__image_ajz_3sl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-rating_group_gy_post_processing_default.png" height="144" width="542" />
                </div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_txl_1sl_r4b"><h2 class="title topictitle2" id="ariaid-title3">Always deny this category</h2>
<div class="body conbody">
            <div class="section" id="concept_txl_1sl_r4b__section_qfh_bsl_r4b">
                <p class="p">For always deny this category, the applicability condition is added in the
                    charging service. </p>

                <p class="p">Example: <kbd class="ph userinput">GY_MESSAGE.Multiple-Services-Credit-Control.Rating-Group !=
                        'example' </kbd>
                </p>

                <p class="p">The result code 5031 is returned.</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> As this is always deny category, the applicability condition in all the
                        charging services must be configured with the same rule.</div>

            </div>

            <div class="section" id="concept_txl_1sl_r4b__section_opg_csl_r4b"><h3 class="title sectiontitle">Example: Always denied rating group with result code 4010</h3>
                
                <p class="p">The result code can be determined by the rule in <em class="ph i">GY_PRE_PROCESSING</em> and
                        <em class="ph i">GY_POST_PROCESSING</em>. If a valid result code returned in
                        <em class="ph i">GY_PRE_PROCESSING</em> rule, then it indicates that the rating group is
                    not monitored and counted and the returned result code in rule is used to set
                    the MSCC level result code.</p>

                <p class="p">For example, configuration in <em class="ph i">GY_PRE_PROCESSING</em> and
                        <em class="ph i">GY_POST_PROCESSING</em> rule. In this case, during a call, when NCC
                    receives CCR containing rating group 8, then in CCA message for rating group 8,
                    the result code 4010 is returned.</p>

                <div class="fig fignone" id="concept_txl_1sl_r4b__fig_rfh_bsl_r4b">
                    <img class="image break" id="concept_txl_1sl_r4b__image_sfh_bsl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-category_control_rules_default.png" height="295" width="660" />
                </div>

                <p class="p">
                    <span class="ph uicontrol">GY_POST_PROCESSING</span>
                </p>

                <div class="fig fignone" id="concept_txl_1sl_r4b__fig_tfh_bsl_r4b">
                    <img class="image break" id="concept_txl_1sl_r4b__image_ufh_bsl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-rating_group_gy2_default.jpg" height="222" width="722" />
                </div>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title4" id="concept_xpw_5rl_r4b"><h2 class="title topictitle2" id="ariaid-title4">Allow and check time or applicability but not count usage</h2>
<div class="body conbody">
            <div class="section" id="concept_xpw_5rl_r4b__section_mkx_vrl_r4b">
                <p class="p">The counter is not created inside charging service or as counter, therefore, no
                    counting is done. If a counter is created, and if there is a need that the
                    counters must not be updated, then the applicability condition must be defined
                    in such a way which disallow counter update.</p>

                <p class="p">The time of day period must be checked and application condition must be
                    added.</p>

            </div>

            <div class="section" id="concept_xpw_5rl_r4b__section_hzh_wrl_r4b"><h3 class="title sectiontitle">Examples</h3>
                
                <p class="p"><kbd class="ph userinput">GY_MESSAGE.Multiple-Services-Credit-Control.Rating-Group = 'example'
                        and CALL_COMMON.Time-Of-Day &gt; 21600000 and CALL_COMMON.Time-Of-Day &lt;
                        43200000</kbd></p>

                <p class="p">Tariff rule in charging service is <kbd class="ph userinput">RATING.No-Charge</kbd>
                </p>

                <div class="sectiondiv">
                    <p class="p"><strong class="ph b">Example: Allow and check time but not count usage</strong></p>

                    <p class="p">The following figure shows the configuration of tariff rule for charging
                        service and Applicability Condition rule for counter since this type of
                        category is not countable. Category is allowed at several time
                        intervals.</p>

                    <div class="fig fignone" id="concept_xpw_5rl_r4b__fig_nkx_vrl_r4b">
                        <img class="image break" id="concept_xpw_5rl_r4b__image_okx_vrl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-allow_not_count1_default.png" />
                    </div>

                    <p class="p">The following figure shows the counter configuration.</p>

                    <div class="fig fignone" id="concept_xpw_5rl_r4b__fig_pkx_vrl_r4b">
                        <img class="image break" id="concept_xpw_5rl_r4b__image_qkx_vrl_r4b" src="../images/img9yz-09126-ug01-pczza-sp1-counter_default.png" height="303" width="781" />
                    </div>

                </div>
            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title5" id="concept_xs4_trl_r4b"><h2 class="title topictitle2" id="ariaid-title5">Treat as normal, count and apply usage thresholds</h2>
<div class="body conbody">
            <div class="section" id="concept_xs4_trl_r4b__section_btl_5rl_r4b">
                <p class="p">For counting, the counter can be configured with the consumption type as charging
                    service to count or not. For usage threshold, the threshold can be configured on
                    counter.</p>

            </div>

        </div>
</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>