<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Example 2: Disable tariff time change flag usage and SNR processing" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="disablettc" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Example 2: Disable tariff time change flag usage and SNR processing</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="disablettc">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Example 2: Disable tariff time change flag usage and SNR processing</h1>
<div class="body">
<p class="p">SNR is processed in following cases:</p>
<ul class="ul">
<li class="li">
<p class="p">On exhaustion: Either reference service (bundle) or aligned service (bundle) is exhausted.</p>

</li>

<li class="li">
<p class="p">On expiration when there is no active session: Reference service (bundle) is expired through TEM
                         module. In case there is an active session, SNR can be processed based on
                         configuration.</p>

</li>

<li class="li">
<p class="p">On subscribing the reference service (bundle).</p>

</li>

</ul>

<p class="p">
<span class="ph uicontrol">Scenario 1: SNR processing at different stages of subscription</span>
</p>

<p class="p">
<span class="ph uicontrol">Lifecycle configuration for SNR processing: </span>
</p>

<p class="p">The following figure shows the configuration for SNR processing in the reference service (bundle)
               periodic lifecycle. In this, when a subscription moves from
                    <kbd class="ph userinput">Active</kbd> to <kbd class="ph userinput">Pre-active</kbd>, that is,
               barred state, the SNR action is configured to set the virtual policy counter status
               to <kbd class="ph userinput">LOW</kbd>.</p>

<div class="fig fignone"><span class="figcap"><span class="fig--title-label">Figure: </span>Reference service (bundle) periodic lifecycle</span>
               
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-basebundle_lc_default.png" height="236" width="510" />
          </div>

<p class="p">Similarly, when a <span class="ph uicontrol">Not Enough Funds Event</span> is generated and a reference
               service (bundle) is moved to suspended/barred state, the SNR action sets the virtual
               policy counter to <kbd class="ph userinput">LOW</kbd>.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-basebundle_lc2_default.png" height="241" width="517" />
          </div>

<p class="p">When a <span class="ph uicontrol">Max Renewals Reached Event</span> is generated and a subscription moves to <strong class="ph b">Final</strong> state, the SNR action sets the virtual policy counter status to <strong class="ph b">Removed</strong> state.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-max_renewals_default.png" height="235" width="510" />
          </div>

<p class="p">
<span class="ph uicontrol">Threshold configuration for counters for SNR processing:</span>
</p>

<p class="p">
               <span class="ph uicontrol">Reference service (Base bundle)</span>
          </p>

<p class="p">The following threshold is configured in the reference service (bundle). For the threshold value
               of 0, SNR for virtual policy counter is set to <kbd class="ph userinput">HIGH</kbd>. For the
               threshold value of 50 (which is exhaustion value in following case), SNR for virtual
               policy counter is set to <kbd class="ph userinput">LOW</kbd>.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-basebundle_counter_default.png" height="216" width="493" />
          </div>

<p class="p">
               <span class="ph uicontrol">Aligned service (Data boost bundle)</span>
          </p>

<p class="p">The following threshold is configured in the referenced service (bundle). For the threshold value
               of 0, SNR for virtual policy counter is set to <kbd class="ph userinput">HIGH</kbd>. For the
               threshold value of 40 (which is exhaustion value in following case), SNR for virtual
               policy counter is set to <kbd class="ph userinput">LOW</kbd>.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-alignedbundle_counter_default.png" height="199" width="525" />
          </div>

<p class="p">
<span class="ph uicontrol">Flow of events:</span>
</p>

<p class="p">When a device subscribes to the reference service (bundle) subscription, the SNR is processed and
               virtual policy counter status is set to <kbd class="ph userinput">HIGH</kbd>.</p>

<p class="p">After the usage, when the reference service (bundle) subscription gets exhausted, the SNR is
               processed and virtual policy counter status is set to <kbd class="ph userinput">LOW</kbd>.
               This is done through threshold configuration.</p>

<p class="p">After the exhaustion of reference service (bundle) subscription, when a device subscribes to
               aligned bundle, the SNR is processed and virtual policy counter is set to
                    <kbd class="ph userinput">HIGH</kbd>.</p>

<p class="p">After the usage is committed from aligned service (bundle) subscription and on exhaustion, SNR is
               processed and virtual policy counter is set to <kbd class="ph userinput">LOW</kbd>.</p>

<p class="p">After the reference service (bundle) expires and moves to <strong class="ph b">Pre-active</strong> state through TEM
               auditing on expiry of bundle, SNR is not sent since virtual policy counter already in
                    <kbd class="ph userinput">LOW</kbd> state.</p>

<p class="p">
               <span class="ph uicontrol">Scenario 2: TTC is not set and VT is aligned to expiry time when “Disable
                    tariff time change” is configured in reference service (bundle)</span>
          </p>

<p class="p">
<span class="ph uicontrol">Pre-conditions:</span>
</p>

<p class="p">Following is the initial configuration:</p>

<p class="p">
               <span class="ph uicontrol">Quota management (Slicing profile)</span>
          </p>

<p class="p">The validity time is set to 50 seconds in the quota management (slicing profile).</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-slicing_profile_default.png" height="135" width="411" />
          </div>

<p class="p">
               <span class="ph uicontrol">Reference service (bundle): Disable tariff time change flag is set to
                    true</span>
          </p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-boubasebundle_default.png" height="76" width="403" />
          </div>

<p class="p">
<span class="ph uicontrol">Flow of events:</span>
</p>

<p class="p">When a Device subscribes to the reference service (bundle), virtual policy counter is set to
                    <kbd class="ph userinput">HIGH</kbd>.</p>

<p class="p">When the Device uses up the reference service (bundle) completely, virtual policy counter is set
               to <kbd class="ph userinput">LOW</kbd>.</p>

<p class="p">Device subscribes to a aligned service (bundle) subscription, virtual policy counter set to
                    <kbd class="ph userinput">HIGH</kbd> again.</p>

<p class="p">
               <span class="ph uicontrol">Scenario 3: Disable tariff time change flag is configured in aligned
                    bundle but not reference bundle</span>
          </p>

<p class="p">
<span class="ph uicontrol">Pre-conditions:</span>
</p>

<p class="p">In this case, the TTC/VT default logic is followed, that is, the aligned bundle configuration is
               ignored. The configuration of <span class="ph uicontrol">Disable tariff time change</span> is
               used.</p>

<p class="p">In the reference service (bundle), <span class="ph uicontrol">Disable tariff time change</span> flag is set
               to <kbd class="ph userinput">False</kbd>.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-boudisablettc_default.png" height="69" width="379" />
          </div>

<p class="p">In the aligned service (bundle), <span class="ph uicontrol">Disable tariff time change</span> flag is set to
                    <kbd class="ph userinput">True</kbd>.</p>

<div class="fig fignone">
               
               <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-databoost_default.png" height="75" width="379" />
          </div>

<p class="p">
<span class="ph uicontrol">Flow of events:</span>
</p>

<p class="p">Device makes a call. The reference service (bundle) expiry time is between the current time of
               the call and validity time.</p>

<p class="p">
<span class="ph uicontrol">Post-conditions:</span>
</p>

<p class="p"> In this case, the VT is set to default behavior considering randomization factor. TTC is also
               set that indicates that the configuration of referenced service (bundle) is ignored
               and aligned service (bundle) configuration is used.</p>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>