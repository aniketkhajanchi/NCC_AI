<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Real-time update and session update" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-d1e20683" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Real-time update and session update</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-d1e20683">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Real-time update and session update</h1>
<div class="body conbody">
<div class="section">
<p class="p">NCC supports the <var class="keyword varname">Real-time Update for Query</var> and <var class="keyword varname">Session Update on
                    Provisioning</var>. The administrative (provisioning) operations take into
                account the calls/sessions in progress. NCC sends a RAR to update existing calls or
                sessions with a view of the provisioned products, or to retrieve current usage to
                populate the result.</p>

<div class="sectiondiv">
<p class="p"><strong class="ph b">Real-time update</strong></p>

<p class="p">For <var class="keyword varname">Real-time Update for Query</var>, when a provisioning request comes to query
                    balance/bucketinstance/counterinstace data, NCC performs the following
                    tasks:</p>
<ol class="ol">
<li class="li">
<p class="p">Sends a RAR for all active sessions</p>

</li>

<li class="li">
<p class="p">Collects CCRs and returns unused quota</p>

</li>

</ol>

<p class="p">The preceding tasks are performed so that an accurate view of available resources can be returned in the query response.</p>

</div>
<div class="sectiondiv">
<p class="p"><strong class="ph b">Session update</strong></p>

<p class="p">For <var class="keyword varname">Session Update on Provisioning</var>, provisioning commands can request that any sessions in-progress must be updated. That is, RAR is sent out for these sessions once execution of the command is completed.</p>

</div>
<div class="sectiondiv">
<p class="p"><strong class="ph b">Provisioning request</strong></p>

<p class="p">The SM REST APIs are supported for the provisioning request. In these APIs, the parameter <var class="keyword varname">updateSession</var> specifies how the calls/sessions in-progress must be informed of the sending RAR operation.</p>

                <p class="p">For update/Subscription REST API, the RAR is always sent for ongoing
                    sessions.</p>

<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>updateSession parameter</span></caption><colgroup><col style="width:30.48780487804878%" /><col style="width:69.51219512195121%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e109">
                                    <p class="p">updateSession</p>

                               </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e115">
                                    <p class="p">Description</p>

                               </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e109 ">0</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e115 ">Sending RAR is disabled.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e109 ">1</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e115 ">Send RAR and forget. In this case, response is sent
                                    immediately to HLAPI without waiting for RAA or CCR-U. </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e109 ">2</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e115 ">Send RAR and wait for CCR-U to be reported. Mostly to be used
                                    for balance query of accounts or buckets.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e109 ">3</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e115 ">Send RAR (to all Gy sessions of Devices/Groups of Account
                                    irrespective of whether they consumed from main balance or not)
                                    and forget.</td>

                            </tr>

                        </tbody>
</table>

<p class="p">The parameter <var class="keyword varname">updateSessionResult</var> in response communicates the result of RAR.</p>

<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>updateSessionResult parameter</span></caption><colgroup><col style="width:31.545741324921135%" /><col style="width:68.45425867507886%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e186">
                                    <p class="p">updateSessionResult </p>

                               </th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e192">
                                    <p class="p">Description</p>

                               </th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e186 ">0</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e192 ">Sending RAR successful.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e186 ">1</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e192 ">Sending RAR unsuccessful.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e186 ">2</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e192 ">All CCR-U received. Applicable only for Real-time Update for
                                    Query.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e186 ">3</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e192 ">Partial CCR-U received. Applicable only for Real-time Update
                                    for Query.</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e186 ">4</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d114919e192 ">No CCR-U received. Applicable only for Real-time Update for
                                    Query.</td>

                            </tr>

                        </tbody>
</table>

                <div class="note" id="id9yz-09126-ug01-pczza-sp1-d1e20683__note_wr1_23k_jyb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If the <em class="ph i">updateSession</em> parameter is not configured,
                    then the value of SM application preference <em class="ph i">Custom RAR Handling</em> is
                    considered for sending RAR. For details on SM application preferences, see
                        <em class="ph i">Global Configuration Guide</em>.</div>

</div>
</div>

<div class="section"><h2 class="title sectiontitle">REST API details</h2>
<p class="p">The following table provides information on REST APIs, RAR, and updateSessions supported. Note that 0 indicates that sending of RAR is disabled and by default 0 is supported for all the APIs listed.</p>

<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e285">
                                <p class="p">REST API</p>

                           </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e291">
                                <p class="p">Send RAR Before/After</p>

                           </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d114919e297">
                                <p class="p">updateSession Supported</p>

                           </th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET: /subscriber/getData/AVInstance</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET:/subscriber/getData/BucketInstance</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1 and 2</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT: /subscriber/update/BucketInstance</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET: /subscriber/getData/EntityCounterInstance</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1 and 2</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET: /subscriber/getData/Account</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1 and 2</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET: /subscriber/getData/Device</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> GET: /subscriber/getData/Group</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT: /subscriber/update/Device</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT: /subscriber/update/Group</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> DELETE: /subscriber/delete/Device</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> DELETE: /subscriber/delete/Group</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/subscriber/update/adjustbalance/Account</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/subscriber/update/setaccountbalance/Account</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1 and 3</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT: /removeDeviceCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/removeDeviceGroupCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/removeGroupCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/addDeviceCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/addDeviceGroupCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 "> PUT:/addGroupCounter/Counter</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 "> After</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 "> 1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e285 ">
                                <p class="p">POST:/subscriber/getData/Profile</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e291 ">Before</td>

                            <td class="entry cellrowborder" style="vertical-align:middle;" headers="d114919e297 ">1, 2, and 3</td>

                        </tr>

                    </tbody>
</table>

</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>