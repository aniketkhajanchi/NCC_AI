<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="NCC monitoring" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="cnf_sps_monitoring" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>NCC monitoring</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="cnf_sps_monitoring">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">NCC monitoring</h1>
<div class="body conbody">
        <div class="section"><h2 class="title sectiontitle">System health</h2>
            <p class="p">The system health is a resultant value derived from the health of constituent
                components. Complex multi-service systems require an adequate number of working
                instances to carry out the assigned work load. The system must be monitored for
                degradation of health (systems not working at rated performance, or not working at
                all) and troubleshooting activities should be performed as needed. </p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Health checks</h2>
            
            <p class="p">Health monitoring is composed of several checks that are run on several system
                components. These are some of the checks:</p>

            <ul class="ul">
                <li class="li">Disk access is monitored.</li>

                <li class="li">Free available disk space is monitored. Every component monitors free disk space
                    on its local system, and alarms and logs if the level of availability falls
                    below a pre-configured threshold.</li>

                <li class="li">An element’s unavailability in an active-standby pair is monitored. Not having
                    one pair is a degradation. Not having either pair is a system outage.</li>


            </ul>

        </div>

        <div class="section"><h2 class="title sectiontitle">NCC service monitoring</h2>
            
            <p class="p">Every system component registers itself with Monitoring. Monitoring provides
                component statuses based on their ability to handle a request per service instance
                and per pod instance; all of which contribute to the overall status of a service.
                Overall system status is derived by the aggregate of all the monitored services. All
                vital services in a system must be present with a status of UP before traffic can
                start in the system. This applies to system starts and restarts.</p>

            <p class="p">NCC uses a composite combination of states to determine an overall status for a given
                service. For example, the charging service can fulfill its duties only if the
                charging pods are healthy and access to LTM and the Aerospike database is working.
                If any of those individual states are down, then the composite charging service
                state is declared down.</p>

            <p class="p">These composing states can provide insight as to what the underlying cause is for a
                service failure, which can guide appropriate action to restore service.</p>

            <p class="p">Examples of composing states include:</p>
<ul class="ul">
                <li class="li">Whether the pods for the given service are healthy.</li>

                <li class="li">Whether Aerospike database access is working.</li>

                <li class="li">Whether LTM access is working.</li>

                <li class="li">Whether this site is isolated from all external Diameter peers, factoring in
                    system restart status and other considerations.</li>

            </ul>

            <p class="p">These states can be seen in the output of the sps-status tool. The sps-status tool
                can be used to verify service status and determine the necessary actions to ensure
                that services are all UP. The composing states are an amalgamation of many
                individual states from associated services that are used to determine the state of a
                service or system (IG or ME) as being UP/DOWN or IS/OOS respectively. In an IG
                system, having both SM and ME subsystems, the system would be OOS if both subsystems
                are down. See <a class="xref" href="sps-status.html">sps-status</a> for more information.</p>

            <div class="p">When a system goes out of service, certain capabilities are shut down, for example:<ul class="ul">
                    <li class="li">Provisioning traffic</li>

                    <li class="li">Diameter traffic (including peering)</li>

                    <li class="li">5G traffic</li>

                </ul>

            </div>

            <p class="p">Currently, Diameter peers are monitored but http peers are not monitored. When a
                system is taken out-of-service (OOS), the HTTP/2 stack is always shutdown.
                Monitoring will gracefully shut down the Diameter stack if anything other than the
                Diameter peering (diameterio) is DOWN. If the only issue is the loss of remote peer
                connections, the Diameter stack does not shut down when peer connection monitoring
                is the only monitoring job that is DOWN so that <span class="ph">NCC</span> can listen for incoming peer
                connections and bring the system back into service. Monitoring of the OOS system
                continues while the system is OOS and as soon as the system is ready to go to an
                In-service (IS) state, <span class="ph">NCC</span> automatically restarts the Diameter stack so that the
                system can receive traffic again. This table shows the relationship between when the
                Diameter stack and the ME subsystem state are in different scenarios.</p>

            <table cellpadding="4" cellspacing="0" summary="" id="cnf_sps_monitoring__daiameterstackbehav" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Behavior of the Diameter stack and the ME subsystem state in different
                    scenarios</span></caption><colgroup><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e134">Scenario</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e137">ME subsystem state</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e140">Diameter Stack</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">System is in service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">UP</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">UP</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">Peer monitoring goes down, when ME subsystem is UP</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">Goes DOWN</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Remains UP to monitor new peers, even though ME is OOS.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">Peer monitoring comes back, when it is the only monitored service
                                DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">Goes UP</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Remains UP</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">ME subsystem is UP, but goes OOS due to another monitored
                                service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">Goes DOWN</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Diameter stack goes down. Peer monitoring if in the start UP
                                state, remains in the start UP state. No peer has connected yet.
                                Peer monitoring if connected to 1+ peer, will go DOWN as the stack
                                shuts down and the peers are dropped.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">ME subsystem is down due to Peer monitoring. Other services are
                                UP and then another service goes OOS.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">Remains DOWN</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Diameter stack goes down. It was UP before, as diameter peering
                                had been the only issue.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">ME subsystem is down due to peer monitoring and another monitored
                                service is OOS. The other service comes back IS.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">
                                <p class="p">Remains DOWN</p>

                                <p class="p">Peer Monitoring remembers its DOWN state. </p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Diameter stack comes back to listen for peers.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">
                                <p class="p">ME subsystem is down due to another monitored service being
                                    down.</p>

                                <p class="p">Before this occurred the Peer Monitoring had been in start
                                    state.</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">ME subsystem state goes UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Diameter stack goes UP.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">
                                <p class="p">ME subsystem is down due to another monitored service being down. </p>

                                <p class="p">Before peer monitoring had dropped because the stack was shut
                                    down.</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">ME subsystem state remains DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">Stack comes up and <span class="ph">NCC</span> is waiting for a peer, which if everything
                                is good should be available and the connection can happen. (Peer
                                Monitoring should go to UP and ME to UP). However, if no peers are
                                now available, the stack remains DOWN.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e134 ">Activity switch</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e137 ">After activity switch finishes it will go back to whatever state
                                it was in before, based on its monitored services, other than the
                                Peer Monitor, which is reset to the start state.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e140 ">
                                <p class="p">Goes to UP if the ME subsystem states compute to IS.</p>

                                <p class="p">Peer Monitoring is set to the start state. Nothing is remembered
                                    for the peer state on the previous active IOHD.</p>

                            </td>

                        </tr>

                    </tbody>
</table>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For Client or NCC-initiated connections, a Disconnect Peer Request (DPR) message
                is initiated.</div>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> When an <span class="ph">NCC</span> is recovering from a failure, it will only be declared to be
                in-service and ready for traffic after its Aerospike database replication has
                achieved up-to-date synchronization with the other <span class="ph">NCC</span> DBs in the network.</div>

            <p class="p">This table describes the services that are monitored by NCC.</p>

            <table cellpadding="4" cellspacing="0" summary="" id="cnf_sps_monitoring__monitortable" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Services monitored by NCC</span></caption><colgroup><col style="width:14.285714285714285%" /><col style="width:14.285714285714285%" /><col style="width:42.857142857142854%" /><col style="width:28.57142857142857%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e321">Monitored Service </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e324">Type </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e327">Service State Calculation </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e330">Composing states to determine if an instance is UP </th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Aerospike Cluster service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">STANDALONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Calculated by an external database layer monitor to include
                                consideration of N+K, rack awareness (2 groups of N+K), and whether
                                all data partitions are accessible. </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">If the Aerospike Cluster Service is detected as DOWN on any pod
                                in the service instance, the service instance status is also
                                DOWN.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Charging application service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Service is DOWN if there are no remaining in-service
                                instances.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">If any one of the following are detected as down by a given
                                    charging pod, the charging service status is also DOWN: </p>

                                <ul class="ul">
                                    <li class="li">Charging pod access </li>

                                    <li class="li">Aerospike database access </li>

                                    <li class="li">LTM access </li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">User and Role Management service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">If the User and Role Management service is detected as DOWN on
                                any container in the service instance, the service instance status
                                is also DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">User and Role Management service running on the SM is a service
                                    monitored from the centralmanagement pod at specified intervals
                                    with the default interval being every 5 seconds.</p>

                                <p class="p">If the User and Role Management service is detected as DOWN on
                                    any container in the service instance, the service instance
                                    status is also DOWN.</p>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">MariaDB service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">If the MariaDB service is detected as DOWN on any container in
                                the service instance, the service instance status is also
                                DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">MariaDB is a service monitored from the centralmanagement pod at
                                    specified intervals with the default interval being every 5
                                    seconds.</p>

                                <p class="p">If the MariaDB service is detected as DOWN on any container in
                                    the service instance, the service instance status is also
                                    DOWN.</p>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">DiameterIO service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">ONEPLUSONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">A 1+1 service is considered UP if there is an active instance
                                that is UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">If any one of the following are detected as down by a given
                                    charging pod, the charging service status is also DOWN: </p>

                                <ul class="ul">
                                    <li class="li">DiameterIO access </li>

                                    <li class="li">Aerospike database access </li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">ETCD Cluster service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">STANDALONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">If the ETCD Cluster Service is detected as DOWN on any container
                                in the service instance, the service instance status is also
                                DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">KAFKA service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">STANDALONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">If the Kafka service is detected as DOWN on any container in the
                                service instance, the service instance status is also DOWN.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">A distributed messaging mechanism, for handling various real-time
                                events. The Kafka health monitor runs on the active
                                centralmanagement pod. It periodically produces and receives
                                messages from Kafka. If multiple attempts are unsuccessful, the
                                monitoring system will mark the service as DOWN.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Lock and Transaction Manager (LTM) service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">ONEPLUSONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">A 1+1 service is considered UP if there is an active instance
                                that is UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">If any one of the following are detected as down by a given
                                    charging pod, the charging service status is also DOWN: </p>

                                <ul class="ul">
                                    <li class="li">LTM access </li>

                                    <li class="li">Aerospike database access </li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Notification Service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Service goes DOWN if there are no remaining in-service
                                instances</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">If any one of the following are detected as down by a given
                                    charging pod, the charging service status is also DOWN: </p>

                                <ul class="ul">
                                    <li class="li">Notification Service access </li>

                                    <li class="li">Aerospike database access </li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Provisioning service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Service goes DOWN if there are no remaining in-service
                                instances</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">
                                <p class="p">If any one of the following are detected as down by a given
                                    charging pod, the charging service status is also DOWN: </p>

                                <ul class="ul">
                                    <li class="li">Provisioning access</li>

                                    <li class="li">Aerospike database access</li>

                                    <li class="li">LTM access</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">RollBack service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">ONEPLUSONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">A 1+1 service is considered UP if there is an active instance
                                that is UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">If any one of the following are detected as down by a given
                                charging pod, the charging service status is also DOWN: <ul class="ul">
                                    <li class="li">Rollback access</li>

                                    <li class="li">Aerospike database access</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">SM App</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Service goes DOWN if there are no remaining in-service
                                instances.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">If any one of the following are detected as down by a given
                                charging pod, the charging service status is also DOWN: <ul class="ul">
                                    <li class="li">SM App Service</li>

                                    <li class="li">Aerospike database access</li>

                                    <li class="li">LTM access</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">Timed Event Manager (TEM) service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">ONEPLUSONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">A 1+1 service is considered UP if there is an active instance
                                that is UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">If any one of these are detected as down by a given charging pod,
                                the charging service status is also DOWN: <ul class="ul">
                                    <li class="li">TEM</li>

                                    <li class="li">Aerospike database access</li>

                                    <li class="li">LTM access, or</li>

                                    
                                    <li class="li">DynamicData (DDTEM).</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">TRSCHEDULER service</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">ONEPLUSONE</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">A 1+1 service is considered UP if there is an active instance
                                that is UP.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 ">If either of these are detected as down by a given charging pod,
                                the charging service status is also DOWN: <ul class="ul">
                                    <li class="li">TRSCHEDULER access, or </li>

                                    <li class="li">Aerospike database access.</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e321 ">XDR</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e324 ">NPLUSK</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e327 ">Service goes down if there are no remaining in-service
                                instances.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e330 "> </td>

                        </tr>

                    </tbody>
</table>

        </div>

        <div class="section"><h2 class="title sectiontitle">Traffic control from the IOHD for applications</h2>
            
            <p class="p">Applications track and report their latency to the monitoring job that is running on
                the centralmanagement pod. When the centralmanagement pod discovers that a given
                application is not performing (based on multiple composite states), it will inform
                the IOHD to avoid sending traffic to that backend Diameter application. There are
                monitoring listeners in the IOHD that automatically disable traffic when monitoring
                detects that a service is down in the application. </p>

            <p class="p">The application preference “IOHD Traffic to pod Requires Manual Enable” can be used
                to control whether or not traffic to a pod needs to be manually enabled after being
                disabled by monitoring. If the application preference is set to false, traffic is
                re-enabled automatically once the problem detected by monitoring is resolved. If the
                application preference is set to true, use the iohd-traffic-control tool to manually
                re-enable traffic. The “iohd-Traffic-Control tool” is provided so that the operator
                can put the service back into service manually when ready. The tool can be used to
                manually disable or enable all traffic or specified traffic to an application. If an
                application is taken out of service manually and the application preference is set
                to “true”, traffic will need to be put back into service manually. </p>

            <p class="p">Traffic is automatically disabled after the application is rendered OOS due to a
                failure of the composing states and may need manual intervention to put it back into
                service. The “iohd-Traffic-Control tool” gives the operator time to diagnose the
                problem. See the “iohd-Traffic-Control tool” in this guide for more information.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Monitoring of horizontally scalable pods</h2>
            
            <p class="p">NCC includes a variety of services that are horizontally scalable. When a system is
                dimensioned for its max engineered capacity, a small amount of additional resource
                is added to provide fault tolerance while still maintaining peak engineered
                capacity. The engineered capacity can be provided by "N" pod instances, with "K"
                additional pod instances added for fault tolerance.</p>

            <p class="p">Given that <span class="ph">NCC</span> MEs are deployed in geo-redundant pairs, an ME reserves one-half of
                its capacity to handle the mate failure scenario. In other words, the ME subsystem
                is engineered to handle both its own and its mate's peak traffic.</p>

            <p class="p">This table shows the baseline assumptions that are made when dimensioning NCC.</p>

            <table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Dimensioning baseline assumptions</span></caption><colgroup><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e739">N</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e742">K</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d23865e745">Total</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e739 ">1 ~ 4</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e742 ">1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e745 ">2 ~ 5</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e739 ">5 ~ 11</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e742 ">2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e745 ">6 ~ 14</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e739 ">12+</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e742 ">3</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d23865e745 ">15+</td>

                        </tr>

                    </tbody>
</table>

            <p class="p">When a pod fails, Kubernetes automatically starts a new instance to replace it. In
                most scenarios, this is sufficient, keeping the system healthy and providing service
                at its rated capacity.</p>

            <p class="p">In rare or unexpected failure scenarios where Kubernetes is unable to perform that
                task and there are no more remaining healthy pod instances of a given type, then
                that given service will be declared OOS. If that service is defined as vital, then
                the entire <span class="ph">NCC</span> will declare itself OOS which will result in traffic being routed to
                the mate for processing.</p>

            <p class="p">Aerospike database pods are dimensioned and configured a bit differently. They are
                configured in two zones for managing data replication within a given <span class="ph">NCC</span> system,
                with each zone configured to have "K" additional pods for fault tolerance. Each
                record has one copy in each zone. Multiple pods within a zone can fail without
                impacting access to any of the data or reducing the system's capacity.</p>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>