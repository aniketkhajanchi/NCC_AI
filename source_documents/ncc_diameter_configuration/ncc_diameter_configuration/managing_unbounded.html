<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Managing unbounded AVP collections" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-cn01-tczza-d1e8925" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Managing unbounded AVP collections</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-cn01-tczza-d1e8925">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Managing unbounded AVP collections</h1>
<div class="body conbody">
                                <p class="p">The number of attributes contained in a Diameter message may vary
      between messages, creating variable-size or unbounded multi-value AVP collections. NCC
      facilitates the manipulation of unbounded collections by presenting you the full path to these
      AVPs without the burden of a massive fanout of all possible paths. </p>

                                <p class="p">This section provides information about the mechanisms that are
                                                available to support unbounded collections.</p>

                                <ul class="ul" id="id9yz-09126-cn01-tczza-d1e8925__ul_mgr_pnn_qxb">
                                                <li class="li">
                                                  <p class="p">Attributes and actions</p>

                                                </li>

                                                <li class="li">
                                                  <p class="p">Index management for unbounded AVP
                                                  collections</p>

                                                </li>

                                </ul>

<div class="section"><h2 class="title sectiontitle">Attributes and actions</h2>
<p class="p"> NCC provides a basic set of actions that allow you to manipulate Diameter AVPs in a message
        context. The common action types are available across all AVP structures. They are specified
        as part of the action attribute name in the filter.</p>

<p class="p">In addition to the set actions/attributes, NCC provides the Number-Of-Values-At-Index attribute
        to enable iterative manipulation of multi-value AVPs. The attribute returns the number of
        values an AVP instance has at a particular location based on the current read indices of the
        parent AVPs. The attribute is available as a source context. </p>

</div>

<div class="section"><h2 class="title sectiontitle">Index management for unbounded AVP collections</h2>
<p class="p">Multiplicity in unbounded AVP collections present special challenges. In addition to the read and write indices requirements for single-value AVPs, the indices for each level of the unbounded AVP collection must be managed. </p>

<p class="p">For example, consider the case where you want to write a message filter that would modify all associated Flow-Descriptions in a Rx AAR message when the Media-Type is Video. This requires the message filter logic to iterate through each Media-Component-Description and modify all associated Flow-Descriptions that evaluate to true. The indices for each level (Media-Component-Description, Media-Type, and Flow-Description) must be managed. In addition, the logic of the implemented message filter must support a a walk through each level of the message.</p>

<p class="p">The following workflow describes how to couple message filters with index management to reuse filters that test for and react to your conditions within a multi-valued AVP.</p>
<ol class="ol">
<li class="li">
<p class="p">In the source context</p>
<ul class="ul">
<li class="li">
<p class="p">Establish your control statement. The condition of the source context should check if the Read-Index is less than the Number-Of-Values-At-Index. This enables you to regulate the number of iterations based on the size of the collection</p>

</li>

</ul>

</li>

<li class="li">
<p class="p">In the result context</p>
<ul class="ul">
<li class="li">
<p class="p">Apply your action AND</p>

</li>

<li class="li">
<p class="p">Increment the read and write indices of the AVP AND</p>

</li>

</ul>

</li>

</ol>

</div>

</div>
<div class="footer"><hr /><p>Diameter/HTTP Configuration Guide • P556766-DN1000054969-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>