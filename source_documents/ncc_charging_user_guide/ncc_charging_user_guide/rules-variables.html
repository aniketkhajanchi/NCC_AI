<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Rule system versions" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9YZ-09018-UG00-PCZZA-d1e14783" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Rule system versions</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9YZ-09018-UG00-PCZZA-d1e14783">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Rule system versions</h1>
<div class="body conbody">
        <p class="p">An Rule system version (RSV) contains the entire collection of rules, logic, and/or rule
            variable definitions that drive the application specific NCC rule engines. Each
            application (NCC and Diameter Rule Engine) has its own RSV. The RSV supports rule
            operations such as rule or variable authoring, cloning, exporting, and importing. This
            is essential for modifying rule logic. An RSV is created in the Service Manager and then
            then it is distributed to the Managed Elements (MEs), which are the NCC sites. Each
            application in the same NCC can have different RSVs but all of the RSVs must be of the
            same release.</p>

        <p class="p">An RSV captures a series of triggers and associated rule groups that implement a
            customized NCC message modification and additional behavior each time a Diameter or HTTP
            message is received. When a RSV is active and running, all rule groups that belong to
            the RSV are evaluated and the rules can be executed by the Rules Engine as triggered in
            an order of precedence.</p>

        <p class="p">NCC supports the export and import of the entire RSV for each application, with its
            associated profiles, rules, and templates between NCC systems running the same release. </p>

        <p class="p">A Default RSV is created for each application automatically when you start NCC for the
            first time after installation. The Default RSV contains all of the triggers and rule
            groups that are required for the startup of an application, and on initial startup of
            the application, appears in the GUI in the Active state. The Default RSV is read-only.
            You can use the Default RSV as the active version; however, if you need to modify or
            create rules, you must clone the Default RSV to create a new version for your system.
            This version is created in a draft state and can be promoted to the active state when
            ready.</p>

        <p class="p">You can delete any of the Draft versions or Release versions. An Active RSV cannot be
            modified or deleted. You can extensively modify any version that is in a Draft state.
            Only the Description field of a RSV in a Release state can be modified. When you clone
            or create a new RSV, the new RSV is in a Draft state.</p>

<div class="section"><h2 class="title sectiontitle">NCC RSV </h2>
<p class="p">For NCC, rules are generally part of a specific profile and therefore not available in a RSV
                form; however, rule variables for NCC with their Triggers can be set in the
                Variables tab of the SM Charging GUI.</p>

<p class="p">Multiple active RSVs can exist, but only one RSV with the state Active can exist at any time.</p>

<p class="p">The default RSV  does not contain definitions of rule groups. Rule groups are defined indirectly
                in other NCC objects by specifying a collection of rules. </p>

</div>

<div class="section">
            <p class="p">In a geo-redundant deployment at the ME level, SM is managing multiple NCC sites and
                simply activating an RSV in one ME does not activate that RSV in the other site. You
                must provision and activate the RSV on each geo-redundantly related ME.</p>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The NCC RSV operates in a slightly different manner as is explained in the section
                “NCC RSV”.</div>

        </div>

        <div class="section" id="id9YZ-09018-UG00-PCZZA-d1e14783__section_cly_wld_xrb"><h2 class="title sectiontitle">Rule authoring</h2>
            
            <p class="p">Within an NCC site there is one active rule system at any given time, which contains
                the rules and variables that are currently in effect. NCC allows the creation of
                multiple RSVs to support having rule systems for different purposes, such as in a
                lab where different scenarios are being explored, and to maintain previous versions
                of rule systems as they evolve. </p>

            <p class="p">NCC supports a drag and drop editing tree that can be used to associate triggers with
                one or more rule groups. Triggers are a message type such as Gx CCR or Gy CCA, or AF
                establishment. Rules and rule variables can be configured using the rule text
                editors or by importing an existing RSV. You can re-order rule groups within a
                trigger or re-order rules within a rule group by dragging the rules up or down. The
                following options are available to manage an RSV:</p>

            <div class="note caution"><div class="cautiontitle"><img src="../../web/css/../images/caution.svg" title="caution-icon" class="noteicon" />CAUTION:</div> When a rule is created, modified, removed, or loaded, it takes a
                minimum of 30 seconds to load the RSV. For any action that updates the rules (for
                example, a TPG value is updated from 10 to 20, an action is updated, or a Tariff
                Rule action is modified), the changes take effect after ~30 seconds. Operators must
                wait for this time interval (30 seconds), to consider the change for feature
                implementation/execution.</div>

            <ul class="ul" id="id9YZ-09018-UG00-PCZZA-d1e14783__ul_ely_wld_xrb">
                <li class="li">
                    <p class="p">Import</p>

                    <p class="p">To Import Rule Group, tap Add Rule Group, then tap the IMPORT button in the
                        Rule Group window. Add a name for the rule group and browse to find the file
                        to import.</p>

                    <p class="p">To reference an existing Rule Group in a different Trigger, select a new
                        Trigger, tap the Add Rule Group button, then tap the REFRENCE RULE GROUP
                        button. Select the name of the rule group and add the new trigger.</p>

                </li>

            </ul>

            <p class="p">When you open the Rules and Variables tab of the Diameter Rules tab of Diameter
                Configuration in the SM, you are presented a configurable RSV form. The Charging
                application allows you to configure Variables only as the charging rules are
                configured in the Charging profiles.</p>

            <p class="p">When you open the Rule and Variables tab of the Diameter Rules tab of Diameter
                Configuration in the SM, there is a filter that allows you to search for any
                specific RSV by name, state, and last time stamp. Directly under the filter, a list
                of all RSVs in the application are displayed if you have not used the filter, or a
                list of all RSVs are displayed for which you have used the filter. Included in this
                form, is a button that will allow you to search for, export, and import an RSV, as
                well as a button that will allow you to add and configure a new RSV.</p>

            <p class="p">To create a new RSV, you must,</p>

            <ol class="ol" id="id9YZ-09018-UG00-PCZZA-d1e14783__ol_fly_wld_xrb">
                <li class="li">Provide a name for the RSV.</li>

                <li class="li">Provide an application name.</li>

                <li class="li">New RSVs are in the draft state automatically; if you need to edit an RSV,
                    ensure the RSV is in a draft state. After it is created you can edit the RSV to
                    change the state to release, and distribute it to the MEs.</li>

                <li class="li">Optionally, provide a description.</li>

                <li class="li">Optionally, provide a security domain.</li>

                <li class="li">Save and Continue.</li>

            </ol>

            <p class="p">When you Save and Continue on this form, you are presented with a rules text editor
                where you can select the triggers, rule groups, or rule variables required for the
                rules in the new rule system. </p>

            <p class="p">NCC rules text editor presents triggers and rule variables only. </p>

            <p class="p">The Diameter Rules text editor presents triggers and rule groups only. </p>

            <p class="p">The trigger must always be selected before carrying on to the rule groups or rule
                variables configuration forms to populate the Triggers parameter in each of those
                forms.</p>

            <p class="p">The Rules System Version List page provides a list of all the RSVs available as well
                as an ADD button that can be used to add a new draft version RSV. The Rules System
                Version form that opens requires that you fill in the parameters as shown in the
                following table.</p>

            <table cellpadding="4" cellspacing="0" summary="" id="id9YZ-09018-UG00-PCZZA-d1e14783__table_gly_wld_xrb" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:15.015015015015015%" /><col style="width:37.08708708708709%" /><col style="width:47.8978978978979%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d445764e155">Parameter</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d445764e158">Description</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d445764e161">Options</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Name</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">The name of the RSV.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">
                                <p class="p">Must be a unique name in the RSV and it is mandatory.</p>

                                <p class="p">Up to 50 characters only.</p>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">State</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">The state of the RSV.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">The system sets the initial state to <em class="ph i">Draft</em>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Application</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">The application of the RSV required.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">The system sets this parameter to <em class="ph i">Charging</em> or
                                    <em class="ph i">Recharge</em> based on the current listing.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Description</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">Enter an optional description of the RSV.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">—</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Trigger</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">Allows selection of a rule set.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">Depending on the application, selection of the Trigger (Rule Set)
                                can be made from a list of triggers.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Rule Groups</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">
                                <p class="p">Allows you to add and configure rules in the rule groups.</p>

                                <p class="p">Allows you to select and edit existing rules in the rule
                                    group.</p>

                                <p class="p">Contains an Add New Rule button, if more rules are required.</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">
                                <p class="p">Rule Group name</p>

                                <p class="p">Specify if top level rule group</p>

                                <p class="p">Rule name</p>

                                <p class="p">Rule logic (if /then statement)</p>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e155 ">Rule Variables</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e158 ">Allows you to add rule variables or select and edit existing rule
                                variables.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d445764e161 ">Add and configure a rule variable.</td>

                        </tr>

                    </tbody>
</table>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> There are search filters above the Trigger, Rule Group, and Rule Variables
                configuration menus that allow you to search for the names of your required
                Triggers, Rule Groups, and Rule Variables as shown in the following
                figure.</div>

            <div class="fig fignone" id="id9YZ-09018-UG00-PCZZA-d1e14783__fig_hly_wld_xrb"><span class="figcap"><span class="fig--title-label">Figure: </span>Trigger, Rule Group, and Rule Variable configuration in RSV</span>
                
                <img class="image break" id="id9YZ-09018-UG00-PCZZA-d1e14783__image_zfj_fsz_ysb" height="192" src="../images/rsv_screen1.png" width="576" />
            </div>

        </div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>