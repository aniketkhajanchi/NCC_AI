<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Custom Counters and Metering Limits (Counters)" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-counter_entity" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Custom Counters and Metering Limits (Counters)</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-counter_entity">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Custom Counters and Metering Limits (Counters)</h1>
<div class="body conbody">
        <p class="p">A counter accumulates the value of defined usage type used against the defined threshold
            value. A specific action is taken on the basis of the accumulated usage type value, such
            as sending notification to subscribers.</p>

        <p class="p">Counters track the consumption of charging logic (charging services), main balance/no
            charge, and allowance limits (bucket) types associated with the specific charging logic
            (charging services).</p>

        <div class="note notice"><div class="noticetitle"><img src="../../web/css/../images/notice.svg" title="notice-icon" class="noteicon" />Notice:</div> NCC supports the counter functionality with counter of usage and cost
            type, that is, counter can accumulate the usage consumption or the cost deductions made.
            However, the use cases of counters to accumulate the number of calls, that is, counter
            type as CALL is not supported currently and subjected for future enhancement of NCC
            product with required customer use cases.</div>
        <div class="p">Note the following points:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-counter_entity__ul_x5k_1lg_3qb">
                <li class="li">The counter scope can be All, Multi-service, Subscription, Hierarchy, Self.</li>

                <li class="li">Applicability condition and rule can be configured.</li>

                <li class="li">Usage limit and overage limit can be configured.</li>

            </ul>
</div>

        <p class="p">Following are the types of counters:</p>

        <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-counter_entity__ul_bjf_rmn_gqb">
            <li class="li">
                <p class="p">
                    <em class="ph i">Device counter</em>: A counter attached to a device.</p>

            </li>

            <li class="li">
                <p class="p">
                    <em class="ph i">Device group counter</em>: A device counter attached to a group.</p>

            </li>

            <li class="li">
                <p class="p">
                    <em class="ph i">Group counter</em>: A counter attached to a group.</p>

            </li>

            <li class="li">
                <p class="p">
                    <em class="ph i">Subscription counter</em>: A counter attached to a subscription and limited to
                    consumption by attached subscription only.</p>

            </li>

            <li class="li">
                <p class="p">
                    <em class="ph i">Multi-bundle counter</em>: A counter that is updated across all subscriptions
                    attached to a device or group. See <a class="xref" href="supportacfeature.html#id9yz-09126-ug01-pczza-sp1-supportacfeature__multi">Multi-bundle restrictions</a> for restrictions applicable to
                    multi-bundle counter.</p>

                <div class="p">
                    <div class="note" id="id9yz-09126-ug01-pczza-sp1-counter_entity__note_q3r_rww_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Multi-bundle counter follows the lifecycle of the
                        associated subscription, and resets or accumulates as per the lifecycle of
                        that subscription. If the subscription is barred, then the multi-bundle
                        counter of that subscription is not updated and the multi-bundle counter of
                        that subscription is reset only when the subscription is reset as
                        well.</div>

                </div>

            </li>

        </ul>

        <div class="section" id="id9yz-09126-ug01-pczza-sp1-counter_entity__section_pys_qwx_hqb"><h2 class="title sectiontitle">Custom counter versus Metering Limit</h2>
            
            <p class="p">Metering limit is a subset of custom counter that has
                <strong class="ph b">counterScope</strong>=SUBSCRIPTION and <strong class="ph b">custom</strong> flag = false. Use metering limit
                for subscription-scoped counters. For custom counter, the <strong class="ph b">custom</strong> flag is set
                to either null or true. Custom counters can be used for complex scenarios where
                metering limit and fair usage policy are not supported.</p>

        </div>

        <div class="section" id="id9yz-09126-ug01-pczza-sp1-counter_entity__section_unf_twx_hqb"><h2 class="title sectiontitle">Subscription creation or removal </h2>
            
            <p class="p">The following points are considered during a subscription creation or removing a
                subscription from a device or group:</p>

            <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-counter_entity__ul_cjf_rmn_gqb">
                <li class="li">
                    <p class="p">During subscription creation, the information related to the charging service
                        counters are stored in the entity counter instance. In case of no-charge,
                        the charging service counters are enabled and the subscription counters
                        count the usage and the usage type counters are updated.</p>

                </li>

                <li class="li">
                    <p class="p">If a subscription is removed from a device or group in between the
                        reservation and commit, then it is recommended that the delete subscription
                        action moves the device or group subscription to barred or final state
                        before executing the <em class="ph i">Delete Entity</em> action.</p>

                    <p class="p">If the lifecycle timers are configured after the barred or final state, then
                        the lifecycle timer value must be greater than the maximum <em class="ph i">VT</em>. This
                        ensures that no reservation is available from the subscription removed from
                        a device or group.</p>

                    <p class="p">For information on state and timer parameters related to a subscription
                        lifecycle, refer to
                            <a class="xref" href="lifecycleparameters.html">Lifecycle parameters</a>.</p>

                    <div class="p">
                        <div class="note" id="id9yz-09126-ug01-pczza-sp1-counter_entity__note_s3k_tww_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> It is highly recommended that removing a
                            subscription from a device or group is performed when the subscription
                            is in a barred or final state and configure the lifecycle timer value
                            greater than the maximum <em class="ph i">VT</em>. Otherwise, the ongoing charging
                            related to the removed subscription reports issues and results in call
                            failure.</div>

                    </div>

                </li>

                <li class="li">
                    <p class="p">In cases of no-charge and charging from a bucket or account associated with a
                        device or group, if a subscription associated with a device or group is
                        removed in between a reservation and commit, then the subscription counter
                        instances get deleted. However, device counter, group counter, or device
                        group counter remain in the database without affecting the call
                        charging.</p>

                </li>

            </ul>

        </div>

    </div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>