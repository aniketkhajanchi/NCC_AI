<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Network heartbeat and system monitoring" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9YZ-09018-UG00-PCZZA-d1e10384" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Network heartbeat and system monitoring</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9YZ-09018-UG00-PCZZA-d1e10384">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Network heartbeat and system monitoring</h1>
<div class="body conbody">
        <p class="p"><span class="ph">NCC</span> SMs and ME subsystems in the network engage in network
            heartbeats to ascertain the most accurate network view of which ME subsystems are
            in-service or out-of-service. This ensures appropriate differentiation between local
            network issues and actual failures of an ME subsystem in the network and helps avoid
            split-brain scenarios where both ME subsystems in a pair could mistakenly assume they
            need to be the active home. It also ensures consistent network-wide site routing based
            on a shared network view.</p>

        <p class="p">To achieve the most accurate view possible, the network heartbeats are exchanged over
            multiple networks, including the core (Diameter/5G) WAN and the OAM WAN, preferably
            between at least three geo-diverse locations. The mate ME subsystem takes over traffic
            for the OOS ME subsystem only when heartbeats determine that an ME subsystem is OOS. For
            example, when either the ME subsystem itself communicates that it is OOS or when
            geo-diverse systems agree that no heartbeat has been received from that ME subsystem. If
            the primary ME subsystem for a device is OOS and the mate takes over the updates to the
            database queue for replication on the mate ME subsystem, it automatically resynchronizes
            when the primary recovers.</p>

        <p class="p">If core WAN communication between mated ME subsystems is down while the primary ME
            subsystem is in-service, the updates to the database for a device queues for replication
            on the primary and automatically replicates to the mate when WAN communication recovers.
            While core WAN communication between some ME subsystems is down and the primary ME
            subsystem is in-service, any requests that arrive at the primary or arrive at another ME
            subsystem that can reach the primary are processed normally. Requests that arrive at the
            mate ME subsystem or any ME subsystem that cannot reach the primary is given an error
            response.</p>

        <p class="p">If the GGSM/PGW/SMF/AF retries to the primary ME subsystem or to another ME subsystem
            that can reach the primary, the retry succeeds. An ME subsystem that is not the primary
            or secondary forwards requests to the secondary if it cannot reach the primary. That
            gives the secondary ME subsystem the chance to forward requests to the primary or if the
            heartbeats indicate the primary has transitioned to OOS then the secondary processes the
            transaction.</p>

        <p class="p">It would be extremely rare for the dual WAN heartbeat mechanism to determine that an ME
            subsystem is OOS if it is actually in-service and handling traffic. In nearly all cases,
            this mechanism avoids split-brain operation where multiple ME subsystems update the data
            for the same device. If two ME subsystems did update the same record, when the systems
            synchronize again, then one version of the record overwrites the other version.</p>

        <div class="section"><h2 class="title sectiontitle">Geo-community configured for network heartbeats</h2>
            
            <div class="p">This figure shows a geo-redundant <span class="ph">NCC</span> network deployment
                of four ME subsystems with two SM subsystems, making up a geo-community. A
                geo-community is a group of NCC subsystems and each is considered a member. <div class="fig fignone" id="id9YZ-09018-UG00-PCZZA-d1e10384__fig_ez5_5t5_cmb"><span class="figcap"><span class="fig--title-label">Figure: </span>Geo-community configured for network heartbeats</span>
                    
                    <img class="image imagecenter break" id="id9YZ-09018-UG00-PCZZA-d1e10384__image_fz5_5t5_cmb" src="images/cnf_overview_geo-community-configured-for-network-heartbeats.GIF" height="336" width="430" />
                </div>
</div>

            <p class="p">The geo-community is configured as part of an <span class="ph">NCC</span> system
                installation within the network deployment. Within the community, the ME subsystems
                can share partitions that define replication partners and specify which sites are
                going to take over for a specific site in the case of a failure. The partitions are
                added at installation time and can be configured such that equal parts of the
                subscriber, device, and service data are replicated and shared with one other ME
                subsystem in the network deployment. Topology data must be configured on each <span class="ph">NCC</span> SM and ME subsystem in the network to identify the
                location of all <span class="ph">NCC</span> systems that exchange heartbeats.
                Topology data is used in the determination of whether or not a subsystem is
                in-service.</p>

            <p class="p">By default, ME subsystems exchange heartbeats with all other ME subsystems in the
                network. If the <span class="ph uicontrol">Segregated ME Heartbeats</span> parameter in the
                Input Generator is set to <span class="keyword parmname">true</span>, then ME subsystems exchange
                heartbeats only with the other ME subsystems in their XDR peer group (for example,
                ME pair).</p>

        </div>

    </div>
<div class="footer"><hr /><p>Overview Guide • P556766-DN1000054925-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>