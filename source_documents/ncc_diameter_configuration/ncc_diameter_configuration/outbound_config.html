<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Connectivity preferences" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="concept_yht_5zn_5pb" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Connectivity preferences</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="concept_yht_5zn_5pb">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Connectivity preferences</h1>
<div class="body conbody">
        <p class="p">To configure the connectivity preferences, in SM GUI click
                <span class="ph uicontrol">Connectivity</span> → ☰ → <span class="ph uicontrol">Connectivity
                Preferences.</span>.</p>

        <p class="p">Connectivity
            preferences allows you to perform the following tasks:</p>

        <div class="p">
            <ul class="ul" id="concept_yht_5zn_5pb__ul_qvf_xzn_5pb">
                <li class="li">Store the Drouter information (FQDN) in session (Gy, IMS, Sy) used for routing
                    Diameter inbound messages (CCR-I/U on Gy and SLR-Initial/Intermediate on Sy
                    interface) from p-gateway over OCS</li>

                <li class="li">Send the Diameter outbound messages (RAR, ASR, SNR) from OCS to same
                    Drouter</li>

                <li class="li">Retry on alternate Drouters/PCRFs/DRAs in failure or timeout cases</li>

            </ul>

        </div>

        <div class="p">The following preference categories are available:<ul class="ul" id="concept_yht_5zn_5pb__ul_nrr_4s2_qxb">
                <li class="li">General</li>

                <li class="li">Diameter 4G</li>

                <li class="li">HTTP 5G</li>

                <li class="li">Routing outbound 5G</li>

            </ul>
</div>

        <div class="section" id="concept_yht_5zn_5pb__section_rt5_xs2_qxb">
            <div class="sectiondiv"><strong class="ph b">General</strong><p class="p">To configure the general parameters, select the
                        <span class="ph uicontrol">General</span> preference category in the
                        <span class="ph uicontrol">Connectivity Preferences</span> page and click
                        <span class="ph uicontrol">+EDIT</span>. The following table describes the general
                    parameters.</p>
<table cellpadding="4" cellspacing="0" summary="" id="concept_yht_5zn_5pb__table_rrp_td4_5pb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>General details</span></caption><colgroup><col style="width:16.232771822358348%" /><col style="width:68.45329249617151%" /><col style="width:15.31393568147014%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e105">Parameter</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e108">Description</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e111">Mandatory / Optional</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e105 ">Generate SNR CDR</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e108 ">Specify whether to generate EDR after sending SNR or after
                                    receiving SNA. It has the following options:<ul class="ul" id="concept_yht_5zn_5pb__ul_jfz_124_5pb">
                                        <li class="li"><span class="ph uicontrol">Each SNR</span>: <ul class="ul" id="concept_yht_5zn_5pb__ul_usn_p4z_wpb">
                                                <li class="li">EDR is generated after sending SNR.</li>

                                                <li class="li">SNR dropped when the queue is full.</li>

                                                <li class="li">Keep alive SNR dropped when the percentage queue
                                                  size is reached.</li>

                                            </ul>
</li>

                                        <li class="li"><span class="ph uicontrol">After Final Response</span>: EDR is
                                            generated after final disposition of the SNR. The
                                            result-code (Sy) or HTTP status code (N28) is included
                                            in the SNR EDR based on following conditions:<ul class="ul" id="concept_yht_5zn_5pb__ul_kjm_34s_ypb">
                                                <li class="li">When success response is received in any
                                                  retry.</li>

                                                <li class="li">If result code is present in <em class="ph i">Result Code to
                                                  Skip Retry</em> or <em class="ph i">Result Codes to Remove
                                                  Session</em> received in any retry.</li>

                                                <li class="li">When consecutive retries are exhausted, or a
                                                  error code is received on the last retry.</li>

                                                <li class="li">SNR is dropped when the queue is full.</li>

                                                <li class="li">Keep alive SNR is dropped when the percentage
                                                  queue size is reached.</li>

                                            </ul>
</li>

                                    </ul>
<div class="p">To generate the SNR EDR, set the value of the following
                                        application preferences to <var class="keyword varname">true</var>:<ul class="ul" id="concept_yht_5zn_5pb__ul_aqt_wb5_wpb">
                                            <li class="li">OCS Sy CDR Generation</li>

                                            <li class="li">Enable SNR Throttling and Keep Alive</li>

                                        </ul>
<div class="note" id="concept_yht_5zn_5pb__note_u35_ht2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                                            <ul class="ul" id="concept_yht_5zn_5pb__ul_ufw_v4k_1tb">
                                                <li class="li">Even if outbound configuration is not created,
                                                  SNR EDRs are generated to support backward
                                                  compatibility.</li>

                                                <li class="li">Although the parameter name has the text CDR, it
                                                  is actually an EDR which is generated.</li>

                                            </ul>

                                        </div>
</div>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e111 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e105 ">Empty Keep Alive SNR</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e108 ">Select this check box to send the Empty Keep Alive SNR,
                                    without any Policy Counter ID and status.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e111 ">Optional</td>

                            </tr>

                        </tbody>
</table>
</div>
            <div class="sectiondiv"><strong class="ph b">Diameter 4G</strong><p class="p">To configure the general parameters, select the
                        <span class="ph uicontrol">Diameter 4G</span> preference category in the
                        <span class="ph uicontrol">Connectivity Preferences</span> page and click
                        <span class="ph uicontrol">+EDIT</span>. The following table describes the Diameter 4G
                    parameters.</p>
<table cellpadding="4" cellspacing="0" summary="" id="concept_yht_5zn_5pb__table_rvf_xzn_5pb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Diameter (4G) parameters</span></caption><colgroup><col style="width:22.727272727272723%" /><col style="width:57.509881422924906%" /><col style="width:19.762845849802368%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e246">Parameter</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e249">Description</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e252">Mandatory/Optional</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">RAR Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The number of times RAR message to be retried on alternate
                                    Drouters/PCRFs/DRAs on getting RAA failure or timeout.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Response Time for RAA (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The time to wait (in milliseconds) for response for 4G RAA
                                        call.<p class="p">Default: 0</p>
For 4G, if this value is not provided
                                    or set to 0 or the <em class="ph i">Retry Configuration</em> entity is not
                                    provisioned on ME, then the value provided in the application
                                    preference <em class="ph i">Default Response Time for RAA</em> is used.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">ASR Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The number of times ASR message to be retried on alternate
                                    Drouters/PCRFs/DRAs on getting ASA failure or timeout.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Response Time for ASA (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The time to wait (in milliseconds) for response for 4G ASA
                                        call.<p class="p">Default: 0</p>
For 4G, if this value is not provided
                                    or set to 0 or the <em class="ph i">Retry Configuration</em> entity is not
                                    provisioned on ME, then the value provided in the application
                                    preference <em class="ph i">Default Response Time for ASA</em> is used.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Provisioning RAR Delay (sec)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">-</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Store Diameter Router Identity</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">If checked, Drouter FQDN is saved in session (Gy, IMS, and
                                    Sy) on receiving Diameter message on OCS (CCR-I/U on Gy and SLR
                                    initial/intermediate on Sy interface).<p class="p">Diameter outbound
                                        message can now be sent to Drouter that is saved in session
                                        and to alternate Drouters/PCRFs/DRAs on failure/timeout.
                                    </p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e246 d37541e249 d37541e252 "><strong class="ph b">Sy Parameters for
                                    4G</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">SNR Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The number of times SNR message to be retried on alternate
                                    Drouters/PCRFs/DRAs on getting SNA failure or
                                        timeout.<p class="p">Default: 0</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Response Time for SNA (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The time to wait (in milliseconds) for response for 4G SNA
                                        call.<p class="p">Default: 0</p>
For 4G, if this value is not provided
                                    or set to 0 or the <em class="ph i">Retry Configuration</em> entity is not
                                    provisioned on ME, then the value provided in the application
                                    preference <em class="ph i">Default Response Time for SNA</em> is
                                        used.<p class="p">Response time for SNA must be less than or equal to
                                        3 seconds.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Max Keep Alive Consecutive Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Maximum number of <em class="ph i">keep-alive</em> consecutive SNR
                                        retry.<p class="p">Default: 0</p>
<p class="p">Valid values: 0-10</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Keep Alive Consecutive Retry Interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Retry Interval for consecutive retry for <em class="ph i">keep- live</em>
                                        SNR, if the previously generated <em class="ph i">keep-alive</em>
                                        notification has not been acknowledged.</p>

                                    <p class="p">Default: 3000</p>

                                    <p class="p">Valid values: 0-600000 (10 min)</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Max Keep Alive Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Maximum number of <em class="ph i">keep-alive</em> SNR retry before the
                                        session deletion, if its value is set to -1, then the
                                        session audit removes the session without any retry.</p>

                                    <p class="p">Default: -1</p>

                                    <p class="p">Valid values: -1 to 10</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Keep Alive Retry Interval (min)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Retry Interval if the previously generated <em class="ph i">keep-alive</em>
                                        notification has not been acknowledged. </p>

                                    <p class="p">Default: 86400</p>

                                    <p class="p">Valid values: 1-864000 (10 days)</p>

                                    <div class="note" id="concept_yht_5zn_5pb__note_iyl_r52_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                                        <ul class="ul" id="concept_yht_5zn_5pb__ul_jyl_r52_qxb">
                                            <li class="li"><em class="ph i">Keep Alive Retry Interval</em> must be greater
                                                than sum of all <em class="ph i">consecutive retry
                                                intervals</em>.</li>

                                            <li class="li"><em class="ph i">OCS Sy Inactivity duration</em> must be greater
                                                than sum of all <em class="ph i">Keep Alive retry intervals</em> if
                                                configured.</li>

                                        </ul>

                                    </div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Log failed keep-alive SNRs</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Select this check box to enable logging for failed keep alive
                                    SNR. <p class="p">For details on keywords used for searching logs in
                                            <code class="ph codeph">OpenSearch</code>, see <a class="xref" href="#concept_yht_5zn_5pb__section_pvf_xzn_5pb">Logs for failed real/keep-alive SNR and Spending Limit Control Notify</a>.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Log failed real SNRs</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Select this check box to enable logging for failed real
                                        SNR.<p class="p">For details on keywords used for searching logs in
                                            <code class="ph codeph">OpenSearch</code>, see <a class="xref" href="#concept_yht_5zn_5pb__section_pvf_xzn_5pb">Logs for failed real/keep-alive SNR and Spending Limit Control Notify</a>.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Result Code to Skip Retry</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">By default the Diameter outbound message should be retried on
                                    alternate Drouters/PCRFs/DRAs if failure or timeout is received
                                    from first Drouter. User can configure not to retry message on
                                    alternate Drouter/PCRF/DRA using this parameter. User need to
                                    select diameter result codes from the drop down list of
                                    predefined result codes. There is no limit on the number of
                                    diameter result codes that can be configured.<p class="p">Diameter message
                                        is never retried on alternate Drouters/PCRFs/DRAs on getting
                                        result as DIAMETER_SUCCESS and DIAMETER_UNKNOWN_SESSION_ID
                                        in RAA/ASA/SNA. No need to configure these diameter result
                                        codes in retry configuration entity.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">SNR Retry Interval (sec)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Its a list of time interval between two retries (real SNR
                                        retry). For example, the maximum retry is 4 times in the
                                        intervals like 5, 10, 15 and 30 minutes.</p>

                                    <p class="p">The interval list size can be same as <em class="ph i">MAX SNR retry
                                            count</em> variable or 1.</p>

                                    <p class="p">Default: empty</p>

                                    <p class="p">Valid values: list size is 10, and maximum value of each
                                        interval in seconds (3600).</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Result Codes to Remove Session</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">List of result code in SNA to remove session and stop retry.
                                    Multiple values can be selected from the list. A maximum of 50
                                    values can be selected.<p class="p">Default: 5002</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e246 d37541e249 d37541e252 "><strong class="ph b">SNR Throttling</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Percentage of Throttling Queue to Drop Keep Alive</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Its a percentage value define the % of queue size (as defined
                                        in Attribute <em class="ph i">Max Queue Size for Throttling</em>), after
                                        which process starts dropping <em class="ph i">keep-alive</em> SNR.</p>

                                    <p class="p">If zero, then there is no separate limit for
                                            <em class="ph i">keep-alive</em> drop.</p>

                                    <p class="p">Default: 0</p>

                                    <p class="p">Valid values: 0-100</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Max Queue Size for Throttling</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Maximum queue size for storing SNR, If Zero throttling is
                                        disabled.<p class="p">To modify this parameter, restart the diameter
                                        app or charging pod.</p>
<p class="p">Default: 0</p>
<p class="p">Valid values:
                                        0-999999</p>
<div class="note" id="concept_yht_5zn_5pb__note_o4f_ht2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This is per diameter
                                        APP node or per diameter POD.</div>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Throttle Interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Time configured for each throttle interval that is 10 ms, If
                                    the value is zero, then it means that the throttling is
                                        disabled.<p class="p">Default: 0</p>
<p class="p">Valid values: 0-600000 (that
                                        is, 10 min)</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Throttling Limit</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">Maximum number of messages that can be sent for a
                                        configurable interval. If the value is zero, then it means
                                        that the throttling is disabled.</p>

                                    <p class="p">Default: 0</p>

                                    <p class="p">Valid values: 0-99999</p>

                                    <div class="note" id="concept_yht_5zn_5pb__note_p4f_ht2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Throttling limit configured is for
                                        complete ME. (which may have more than 1 diameter App nodes
                                        or pods). For Example: If the throttling limit is 500 and we
                                        have 5 Active diameter App nodes in 1 ME, then the
                                        throttling limit per app node will be 500/5 = 100 each App
                                        Node. </div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e246 d37541e249 d37541e252 "><strong class="ph b">RAR Throttling</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Schedular rate per second</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">The number of RAR messages to be sent in 1 second. A value of
                                    0 indicates that throttling is disabled. A value of 1-99999
                                    indicates that throttling is enabled.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Throttle interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Time configured for each throttle interval that is 10 ms, If
                                    the value is zero, then it means that the throttling is
                                        disabled.<p class="p">Default: 0</p>
<p class="p">Valid values: 0-600000 (that
                                        is, 10 min)</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">Pacing factor</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">
                                    <p class="p">This determines the pacing at which RAR is throttled. This
                                        decides how many RARs are sent in 1 burst and the time
                                        interval between two consecutive bursts. </p>

                                    <p class="p">Number of RAR in 1 burst = RAR Scheduler Rate/RAR Pacing
                                        factor.</p>

                                    <p class="p">Time interval between two consecutive bursts (in
                                        milliseconds) = Pacing factor * 1000/RAR.</p>

                                    <div class="p"><div class="note" id="concept_yht_5zn_5pb__note_xxb_d1l_25b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This is a tuning parameter and
                                            its value should not be too large (recommended: 1-10).
                                        </div>
Default value: 1</div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e246 ">RAR throttling category list</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e249 ">Contains a list of categories on which throttling is applied,
                                    for example, AUDIT, PROVISIONING, ON_CALL. <p class="p">Default:
                                        PROVISIONING</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e252 ">Optional</td>

                            </tr>

                        </tbody>
</table>
<div class="note" id="concept_yht_5zn_5pb__note_q4f_ht2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If <span class="ph uicontrol">Throttling limit</span> and
                        <span class="ph uicontrol">Throttle interval (ms)</span> are modified, then the new
                    value is applied only after all the previously created tokens are
                    consumed.</div>
</div>
            <div class="sectiondiv"><strong class="ph b">HTTP 5G</strong><p class="p">To configure the general parameters, select the
                        <span class="ph uicontrol">HTTP 5G</span> preference category in the
                        <span class="ph uicontrol">Connectivity Preferences</span> page and click
                        <span class="ph uicontrol">+EDIT</span>. The following table describes the HTTP 5G
                    parameters.</p>
<table cellpadding="4" cellspacing="0" summary="" id="concept_yht_5zn_5pb__http_5g_param" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>HTTP (5G) parameters</span></caption><colgroup><col style="width:20.710059171597635%" /><col style="width:59.56607495069033%" /><col style="width:19.72386587771203%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e829">Parameter</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e832">Description</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e835">Mandatory/Optional</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Retry Count for Notify Re-authorization †</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The number of times 5G Notify Re-authorization message to be
                                    retried on getting response failure or timeout.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Response Time for Notify Reauthorization (ms) *</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The time to wait (in milliseconds) for response for 5G Notify
                                    Re-authorization message.<p class="p">Default: 0</p>
For 5G, if this value
                                    is not provided or set to 0 or the <em class="ph i">Retry Configuration</em>
                                    entity is not provisioned on ME, then the value provided in the
                                    application preference <em class="ph i">Default Response Time for RAA</em> is
                                    used.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Retry Count for Notify Terminate</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The number of times 5G Notify Terminate message to be retried
                                    on getting response failure or timeout.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Include Sbi Sender Timestamp In Notify</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">This parameter indicates the date and time (with a
                                    millisecond granularity) at which an HTTP request or response is
                                    originated. <p class="p">If this check box is selected, then the
                                        corresponding header is sent in N40/N28 notifications.
                                        </p>
<p class="p">For example, <em class="ph i">3gpp-Sbi-Sender-Timestamp: Sun, 04
                                            Aug 2019 08:49:37.845 GMT</em></p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                                
                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Include Sbi Max Rsp Time In Notify</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">This parameter indicates the duration, expressed in
                                    milliseconds since the request was originated, during which the
                                    HTTP client waits for a response. <p class="p">If this check box is
                                        selected, then the corresponding header is sent in N40/N28
                                        notifications. </p>
<div class="p">CHF fills in this header with value
                                        same as timeout configured for specific notification that is
                                        being sent. <ul class="ul" id="concept_yht_5zn_5pb__ul_gqx_hwn_kyb">
                                            <li class="li">For N40, <var class="keyword varname">Response Time for Notify
                                                  Reauthorization (ms)</var>, <var class="keyword varname">Response
                                                  Time for Notify Terminate (ms)</var></li>

                                            <li class="li">For N28, <var class="keyword varname">Response Time for Spending Limit
                                                  Control Notify (ms)</var></li>

                                        </ul>
</div>
<p class="p">For example, <em class="ph i">3gpp-Sbi-Max-Rsp-Time:
                                        10000</em></p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                                
                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Response Time for Notify Terminate (ms) *</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The time to wait (in milliseconds) for response for 5G Notify
                                    Terminate message.<p class="p">Default: 0</p>
For 5G, if this value is not
                                    provided or set to 0 or the <em class="ph i">Retry Configuration</em> entity is
                                    not provisioned on ME, then the value provided in the
                                    application preference <em class="ph i">Default Response Time for RAA</em> is
                                    used.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Provisioning Notify Delay (sec)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Provisioning notify delay.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Include Sbi Callback In Notify</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The value for the notification type is a string used
                                    identifying a particular type of callback (for example, a
                                    notification, typically the name of the notify service
                                        operation).<p class="p">If this check box is selected, then the
                                        corresponding header is sent in N40/N28 notifications.
                                        </p>
<ul class="ul" id="concept_yht_5zn_5pb__ul_avd_dvn_kyb">
                                        <li class="li">For N40, the value is
                                                <var class="keyword varname">Nchf_ConvergedCharging_Notify</var>.
                                            For Example, <em class="ph i">3gpp-Sbi-Callback:
                                                Nchf_ConvergedCharging_Notify</em></li>

                                        <li class="li">
                                            <p class="p">For N28 notify spending limit reports, the value is
                                                  <var class="keyword varname">Nchf_SpendingLimitControl_statusNotification</var>.</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">For N28 notify subscription terminations, the value
                                                is
                                                  <var class="keyword varname">Nchf_SpendingLimitControl_subscriptionTermination</var>
                                            </p>

                                        </li>

                                    </ul>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">HTTP Status Codes in RAR notifications</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">This parameter allows to configure the HTTP status codes in
                                    N40 reauthorization notification responses to trigger the
                                    termination of N40 sessions. The following fields need to be
                                        filled:<ul class="ul" id="concept_yht_5zn_5pb__ul_ich_d4m_jyb">
                                        <li class="li">Status Code - Predefined error codes (range: 0-999)</li>

                                        <li class="li">Cause - Definition of the error codes</li>

                                    </ul>
<p class="p">When <var class="keyword varname">n40ResultCodesToRemoveSess ion
                                            list</var> is not configured, it contains the
                                        default value of <em class="ph i">404</em>, and ** a notification response
                                        is received from the network with an HTTP status code as
                                            <em class="ph i">404</em>
                                        <var class="keyword varname">with or without any problemDetails-&gt;cause
                                            string</var>. Then the CHF stops any further
                                        notification retransmissions and immediately transitions the
                                        N40 session to the <em class="ph i">abnormally terminated</em> state while
                                        starting the terminated session time-to-live interval for
                                        the terminated session.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                                
                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e829 d37541e832 d37541e835 "><strong class="ph b">N28 parameters</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Retry Count for Spending Limit Control Notify †</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Maximum number of retry for real SNR before it is
                                        dropped.<p class="p">Default: 0</p>
<p class="p">Valid values: 0-10</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Response Time for Spending Limit Control Notify (ms)
                                    *</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">The time to wait (in milliseconds) for response for Spending
                                        Limit Control Notify call.</p>

                                    <p class="p">Default: 0</p>

                                    <p class="p">If the <em class="ph i">Spending Limit Control Notify</em> value is not
                                        provided, set to 0, or the Retry Configuration entity is not
                                        provisioned on ME, then the <em class="ph i">Default Response Time for
                                            SNA</em> value provided in the application preference is
                                        used.</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Max Keep Alive Consecutive Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Maximum number of <em class="ph i">keep-alive</em> consecutive SNR
                                        retry.</p>

                                    <p class="p">Valid values: 0-10</p>

                                    <p class="p">Default: 3</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Keep Alive Consecutive Retry Interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Retry Interval for consecutive retry for <em class="ph i">keep- live</em>
                                        SNR, if the previously generated <em class="ph i">keep-alive</em>
                                        notification has not been acknowledged.</p>

                                    <p class="p">Default: 3000</p>

                                    <p class="p">Valid values: 0-600000 (10 min)</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Max Keep Alive Retry Count</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Maximum number of <em class="ph i">keep-alive</em> SNR retry before the
                                        session deletion, if its value is set to -1, then the
                                        session audit removes the session without any retry. Default
                                        value of this parameter is -1.</p>

                                    <p class="p">Valid values: -1 to 10</p>

                                    <p class="p">Default: -1</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Keep Alive Retry Interval (min)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Retry Interval if the previously generated <em class="ph i">keep-alive</em>
                                        notification has not been acknowledged.</p>

                                    <p class="p">Default: 86400</p>

                                    <p class="p">Valid values: 1-864000 (10 days)</p>

                                    <div class="note" id="concept_yht_5zn_5pb__note_tmh_ft2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                                        <ul class="ul" id="concept_yht_5zn_5pb__ul_vvf_xzn_5pb">
                                            <li class="li"><em class="ph i">Keep Alive Retry Interval</em> must be greater
                                                than sum of all <em class="ph i">consecutive retry
                                                intervals</em>.</li>

                                            <li class="li"><em class="ph i">OCS Sy Inactivity duration</em> must be greater
                                                than sum of all <em class="ph i">Keep Alive retry intervals</em> if
                                                configured.</li>

                                        </ul>

                                    </div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Log failed keep-alive spending limit control notify</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Select this check box to enable logging for failed keep alive
                                    spending limit control notify
                                        (Nchf_SpendingLImitControl_Notify).<p class="p">For details on
                                        keywords used for searching logs in
                                            <code class="ph codeph">OpenSearch</code>, see <a class="xref" href="#concept_yht_5zn_5pb__section_pvf_xzn_5pb">Logs for failed real/keep-alive SNR and Spending Limit Control Notify</a>.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Log failed real spending limit control notify</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Select this check box to enable logging for failed real
                                    spending limit control notify.<p class="p">For details on keywords used
                                        for searching logs in <code class="ph codeph">OpenSearch</code>, see <a class="xref" href="#concept_yht_5zn_5pb__section_pvf_xzn_5pb">Logs for failed real/keep-alive SNR and Spending Limit Control Notify</a>.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Result Code to Skip Retry</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">List of result code in NCHF for which the retry is skipped
                                    for real SNR. A maximum of 50 values can be selected from the
                                        list.<p class="p">Default: 503</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Retry interval</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Its a list of time interval between two retries (real SNR
                                        retry). For example, the maximum retry is 4 times in the
                                        intervals like 5, 10, 15 and 30 minutes.</p>

                                    <p class="p">The interval list size can be same as <em class="ph i">MAX SNR retry
                                            count</em> variable or 1.</p>

                                    <p class="p">Default: empty</p>

                                    <p class="p">Valid values: list size is 10, and maximum value of each
                                        interval in seconds (3600).</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Result Codes to Remove Session</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">List of result code to remove session and stop retry. A
                                    maximum of 50 values can be selected from the list.<p class="p">Default:
                                        404</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e829 d37541e832 d37541e835 "><strong class="ph b">Spending Limit Control
                                        Notify Throttling</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Percentage of Throttling Queue to Drop Keep Alive</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">Its a percentage value define the % of queue size (as defined
                                        in Attribute <em class="ph i">Max Queue Size for Throttling</em>), after
                                        which process starts dropping <em class="ph i">keep-alive</em> SNR.</p>

                                    <p class="p">If zero, then there is no separate limit for
                                            <em class="ph i">keep-alive</em> drop.</p>

                                    <p class="p">Default: 0</p>

                                    <p class="p">Valid values: 0-100</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Max Queue Size for Throttling</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Maximum queue size for storing SNR, If Zero throttling is
                                        disabled.<p class="p">To modify the parameter, restart the diameter
                                        app or charging pod.</p>
<p class="p">Default: 0</p>
<p class="p">Valid values:
                                        0-999999</p>
<div class="note" id="concept_yht_5zn_5pb__note_umh_ft2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This is per diameter
                                        APP node or per diameter POD.</div>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Throttle Interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Time configured for each throttle interval. If the value is
                                    0, then throttling is disabled.<p class="p">Default: 0</p>
<p class="p">Valid values:
                                        0-600000</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Throttling Limit</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Maximum number of messages that can be sent for a
                                    configurable interval. If the value is 0, then the throttling is
                                        disabled.<p class="p">Default: 0</p>
<p class="p">Valid values: 0-99999</p>
<div class="note" id="concept_yht_5zn_5pb__note_vmh_ft2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Throttling limit configured is for
                                        complete ME. (which may have more than 1 diameter App nodes
                                        or pods). For Example: If the throttling limit is 500 and we
                                        have 5 Active diameter App nodes in 1 ME, then the
                                        throttling limit per app node will be 500/5 = 100 each App
                                        Node. </div>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e829 d37541e832 d37541e835 "><strong class="ph b">Notify
                                    Throttling</strong></td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Scheduler rate per second</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">The number of Notify messages to be sent in 1 second. A value
                                    of 0 indicates that throttling is disabled. A value of 1-99999
                                    indicates that throttling is enabled.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Throttle interval (ms)</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Time configured for each throttle interval. If the value is
                                    0, then the throttling is disabled.<p class="p">Default: 0</p>
<p class="p">Valid
                                        values: 0-600000</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Pacing factor</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">
                                    <p class="p">This determines the pacing at which Notify is throttled. This
                                        decides how many Notify messages are sent in 1 burst and the
                                        time interval between two consecutive bursts. </p>

                                    <p class="p">Number of Notify in 1 burst = Notify Scheduler Rate/Notify
                                        Pacing factor.</p>

                                    <p class="p">Time interval between two consecutive bursts (in
                                        milliseconds) = 1000/Notify * Pacing factor.</p>

                                    <div class="p"><div class="note" id="concept_yht_5zn_5pb__note_pcv_q1l_25b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This is a tuning parameter and
                                            its value should not be too large (recommended: 1-10).
                                        </div>
Default value: 1</div>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e829 ">Notify throttling category list</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e832 ">Contains a list of categories on which throttling is applied,
                                    for example, AUDIT, PROVISIONING, ON_CALL. <p class="p">Default:
                                        PROVISIONING</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e835 ">Optional</td>

                            </tr>

                        </tbody>
</table>
<div class="note" id="concept_yht_5zn_5pb__note_v2y_ft2_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                    <ul class="ul" id="concept_yht_5zn_5pb__ul_lwd_gfk_25b">
                        <li class="li">If <span class="ph uicontrol">Throttling Limit</span> and <span class="ph uicontrol">Throttle
                                Interval (ms)</span> are modified, then the new value is
                            applied only after all the previously created tokens are consumed.</li>

                        <li class="li">* Define the time such that it does not exceed the lock guard timer
                            (which is 5 seconds by default).</li>

                        <li class="li">† The retry count is for normal notify via on-call or API command. For
                            stale session audit, the retry count is per pub count. For example, for
                            stale session audit, if max pub count is 3 and retry count is 2, then
                            total 6 retries are done (that is, 2 per pub count).</li>

                    </ul>

                </div>
</div>
            <div class="sectiondiv"><strong class="ph b">Routing outbound 5G</strong><p class="p">To configure the general parameters, select the
                        <span class="ph uicontrol">Routing outbound 5G</span> preference category in the
                        <span class="ph uicontrol">Connectivity Preferences</span> page and click
                        <span class="ph uicontrol">+EDIT</span>. The following table describes the Routing
                    outbound 5G parameters.</p>
<table cellpadding="4" cellspacing="0" summary="" id="concept_yht_5zn_5pb__table_vny_smz_gwb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Routing Outbound 5G Configurations</span></caption><colgroup><col style="width:23.32695984703633%" /><col style="width:57.55258126195029%" /><col style="width:19.120458891013385%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e1563">Parameter</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e1566">Description</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e1569">Mandatory/Optional</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Router for 5G Present</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Port</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Protocol</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 ">Optional</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Notify retry using NF Discovery</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 "><p class="p">This field is used to enable NF discovery query to derive
                                        the alternate (failover) SMF or PCF destination to be used
                                        for N40 and N28 notification retransmissions.</p>
Valid values:<div class="p">
                                        <ul class="ul" id="concept_yht_5zn_5pb__ul_iml_54z_gwb">
                                            <li class="li">Disable: NF discovery query is disabled.</li>

                                            <li class="li">Enable NF Discovery: Only NF discovery query is
                                                enabled.</li>

                                            <li class="li">Enable NF Discovery with selective retry: NF
                                                discovery query is enabled and N40/N28 notification
                                                retry is skipped.</li>

                                            <li class="li">Enable NF Discovery with servicename: NF discovery
                                                query is enabled along with service name.</li>

                                            <li class="li">Enable NF Discovery with selective retry and
                                                servicename: NF discovery query is enabled along
                                                with service name and N40/N28 notification retry is
                                                skipped.</li>

                                        </ul>

                                    </div>
<p class="p">Default: Disable</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 ">Mandatory</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e1563 d37541e1566 d37541e1569 "><strong class="ph b">SMF</strong>/<strong class="ph b">PCF</strong><p class="p">The
                                        following parameters are available for SMF and
                                    PCF.</p>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">NF target DNS</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">NF target DNS prefix</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e1563 d37541e1566 d37541e1569 "><strong class="ph b">Notification Router</strong><p class="p">To add
                                        a notification router, click <span class="ph uicontrol">+NOTIFICATION
                                            ROUTER</span>.</p>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Last CHF-Router used for incoming message</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e1563 d37541e1566 d37541e1569 "><strong class="ph b">Retry</strong><p class="p">To add a retry, click
                                            <span class="ph uicontrol">+RETRY</span>.</p>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Notification retry</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">It is a read-only attribute.<p class="p">Specifies the number of the
                                        created retry.</p>
</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">CHF router</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">NF target</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" colspan="3" style="vertical-align:top;" headers="d37541e1563 d37541e1566 d37541e1569 "><strong class="ph b">Alternate Router</strong><p class="p">To add an
                                        alternate router, click <span class="ph uicontrol">+ALTERNATE
                                            ROUTER</span></p>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">CHF router</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1563 ">Alternate CHF router</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1566 ">Reserved for future use. </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e1569 "> </td>

                            </tr>

                        </tbody>
</table>
</div>
        </div>

        <div class="section" id="concept_yht_5zn_5pb__section_pvf_xzn_5pb"><h2 class="title sectiontitle">Logs for failed real/keep-alive SNR and Spending
                Limit Control Notify</h2>The following keywords are used to search logs in
                <code class="ph codeph">OpenSearch</code> at INFO level based on the outbound configuration:<ul class="ul" id="concept_yht_5zn_5pb__ul_of2_grz_wpb">
                <li class="li">
                    <code class="ph codeph">LOGGER_FOR_FAILED_KEEP_ALIVE_SNR</code></li>

                <li class="li"><code class="ph codeph">LOGGER_FOR_FAILED_REAL_SNR</code></li>

                <li class="li"><code class="ph codeph">LOGGER_FOR_FAILED_KEEP_ALIVE_SLC_NOTIFY</code></li>

                <li class="li"><code class="ph codeph">LOGGER_FOR_FAILED_REAL_SLC_NOTIFY</code></li>

            </ul>
Logs are generated for the following reasons: <ul class="ul" id="concept_yht_5zn_5pb__ul_xgj_krz_wpb">
                <li class="li">Maximum retries reached.</li>

                <li class="li">Received error response causing termination of session</li>

                <li class="li">Received error response ending retry attempts</li>

                <li class="li">Notification send queue full</li>

                <li class="li">Router not found.</li>

                <li class="li">Notification send queue exceeded its keep alive percentage threshold (only for
                    Keep Alive).</li>

            </ul>
<div class="p">
                <div class="note" id="concept_yht_5zn_5pb__note_l32_rlz_vyb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                    <ul class="ul" id="concept_yht_5zn_5pb__ul_vbl_2s2_ypb">
                        <li class="li">Logs are not generated for this if the application preference <em class="ph i">Enable
                                SNR throttling and Keep Alive</em> is set to
                            <var class="keyword varname">false</var>.</li>

                        <li class="li"><var class="keyword varname">Router not found</var> error is logged only for 5G CHF
                            scenarios. It is not logged if 4G routers are not found.</li>

                    </ul>

                </div>

            </div>
</div>

        <div class="section" id="concept_yht_5zn_5pb__section_wvf_xzn_5pb"><h2 class="title sectiontitle">Configuration</h2>
            
            <p class="p">For Object creation.</p>

            <ol class="ol" id="concept_yht_5zn_5pb__ol_xvf_xzn_5pb">
                <li class="li">The object creation fails when wrong value is entered while creating the
                    object.</li>

                <li class="li">The default value for attributes is not passed in the request when there are
                    empty values while creating the object.</li>

            </ol>

            <p class="p">For Object Update.</p>

            <ol class="ol" id="concept_yht_5zn_5pb__ol_yvf_xzn_5pb">
                <li class="li">The old value remains unchanged when wrong value is entered while updating the
                    object and the object update fails.</li>

                <li class="li">All attribute data update is not allowed while updating the object during object
                    update.</li>

            </ol>

            <div class="p">
                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Some of the outbound configuration attributes are applicable only after system
                    restart.</div>

            </div>

            <p class="p">Configuration is considered as wrong, if the same error code is configured for
                    <em class="ph i">Skip retry</em> and the code to <em class="ph i">remove Session</em>. In this case priority
                is given to <em class="ph i">Skip retry</em> error codes.</p>

        </div>

        <div class="section" id="concept_yht_5zn_5pb__section_dpn_pnd_hwb"><h2 class="title sectiontitle">Selective retry of N40/N28 notification for specific server header
                content</h2>
            
            <div class="p">Producer NFs (that is, NCC) can selectively retry notifications if the response from
                the network indicates that no consumer instance is available to receive the
                notification. To configure it, set the parameter <em class="ph i">Notify retry using NF
                    Discovery</em> to <var class="keyword varname">Enable NF Discovery with selective retry</var>
                (see <a class="xref" href="#concept_yht_5zn_5pb__table_vny_smz_gwb">Routing Outbound 5G Configurations</a>). This includes the
                following scenarios:<ul class="ul" id="concept_yht_5zn_5pb__ul_ijf_r4d_hwb">
                    <li class="li">If a response includes an error HTTP status code that is not configured to
                        prevent retries, and it also includes a single server header including the
                        same consumer FQDN sent in 3gpp-Sbi-Target-apiRoot header of the
                        notification, and the CHF is unable to derive a different alternate/failover
                        FQDN for the session.</li>

                    <li class="li">If a response includes an error HTTP status code that is not configured to
                        prevent retries and also includes two consumer FQDNs in the server header.
                        It indicates that the SCP-C received a failure response from the following
                        two (both): <ul class="ul" id="concept_yht_5zn_5pb__ul_nfx_tpd_hwb">
                            <li class="li">Consumer FQDN included in 3gpp-Sbi-Target-apiRoot header of the
                                notification.</li>

                            <li class="li">Alternate/failover consumer FQDN retrieved from the NRF based on
                                nfSet ID included in 3gpp-Sbi-Routing-Binding header of the
                                notification. </li>

                        </ul>
</li>

                </ul>
</div>

            <p class="p">To select an alternate/failover destination for notifications, use the following
                logic (both):</p>

            <ul class="ul" id="concept_yht_5zn_5pb__ul_thz_3sd_hwb">
                <li class="li">If an error response is received with a single FQDN in the server header, the
                    CHF does not send a retry notification to the FQDN received in the server
                    header.</li>

                <li class="li">If the CHF is unable to receive a searchRequest response from the NRF (for
                    example, due to connectivity or NRF server issues) and an
                        <var class="keyword varname">expired</var> NRF searchResult is available on the CHF, it is
                    used to derive an alternative/failover destination (instead of skipping the
                    retry attempt).</li>

            </ul>

            <p class="p">Skipping notification retries is based on the combination of HTTP status code and the
                presence of one or more consumer FQDNs in the server header received in response. </p>

            <p class="p">If server header does not include FQDNs but, rather includes nfInstanceIDs, then
                these can be used to identify the associated NFProfile in the consumer’s nfSet to
                see if the associated NFProfile’s FQDN matches the 3gpp-Sbi-Target-apiRoot used in
                the outgoing notification.</p>

            <div class="fig fignone" id="concept_yht_5zn_5pb__fig_af1_qzd_hwb"><span class="figcap"><span class="fig--title-label">Figure: </span>Example of selective retry</span>
                
                <img class="image break" id="concept_yht_5zn_5pb__image_bf1_qzd_hwb" src="../images/nrf_skip_notif.png" />
            </div>

            <p class="p">In above diagram, an <code class="ph codeph">Nchf_SpendingLimitControl_Subscribe</code> request is
                received from the network, which includes a <code class="ph codeph">3gpp-Sbi-Binding</code> header
                of <code class="ph codeph">3gpp-Sbi-Binding: bl=nf-set;
                nfset=set1.PCFset.5gc.mncXXX.mccXXX</code>. The CHF stores the
                    <code class="ph codeph">notifUri</code> from the message body and the <code class="ph codeph">nfset</code>
                from the <code class="ph codeph">3gpp-Sbi-Binding</code> information header.</p>

            <p class="p">Subsequently, the CHF sends an <code class="ph codeph">Nchf_SpendingLimitControl_Notify</code>
                triggered by a change of policy counter status for one of the policy counters
                subscribed to the N28 session. The <code class="ph codeph">3gpp-Sbi-Target-apiRoot</code> is set
                to the value of the <var class="keyword varname">notifyUri</var> in the
                    <code class="ph codeph">SpendingLimitContext</code> IE in the
                    <code class="ph codeph">Nchf_SpendingLimitControl_Subscribe</code> request. In addition, the
                notification includes a <code class="ph codeph">3gpp-Sbi-Routing-Binding</code> header with a
                value of <code class="ph codeph">bl=nf-set; nfset= PCF_XXX</code>.</p>

            <p class="p">The notification is sent to the SCP-P and SCP-C before being sent to the PCF based on
                the FQDN in the 3gpp-Sbi-Target-apiRoot header of the notification.</p>

            <p class="p">The SCP-C receives a response from the PCF with an HTTP status result of <code class="ph codeph">500
                    – Internal Server Error</code> and a server header with the PCF’s FQDN, for
                example, <code class="ph codeph">Server: PCF-PCF.XXX.xx.com</code>. This, in turn, triggers the
                SCP-C to initiate an <code class="ph codeph">Nnrf_NFDiscovery</code> query to the NRF with the
                    <code class="ph codeph">nfset</code> ID from the <code class="ph codeph">3gpp-Sbi-Routing-Binding</code>
                header of the notification.</p>

            <p class="p">When the SCP-C receives the <code class="ph codeph">seachResult</code> from the NRF, it
                successfully identifies an alternate/failover PCF FQDN and forwards the notification
                to that PCF.</p>

            <p class="p">The SCP-C subsequently receives a response from the alternate/failover PCF with an
                HTTP status code of <code class="ph codeph">500 – Internal Server Error</code> including its own
                FQDN in the server header, for example, <code class="ph codeph">Server:
                    PCF-PCF.wlktxXX.xx.com</code>.</p>

            <p class="p">In this case the SCP-C returns a notification response to the CHF with an error HTTP
                status code of 500 and includes a server header with both PCF FQDNs (<code class="ph codeph">Server:
                    PCF-PCF.XXX.xx.com PCF-PCF.wlktxXX.xx.com</code>).</p>

            <p class="p">When the CHF receives the error response it detects that there are two PCF FQDNs in
                the server header and, therefore, the CHF does not attempt to resend the
                notification.</p>

        </div>

        <div class="section" id="concept_yht_5zn_5pb__section_ujc_ysx_gwb"><h2 class="title sectiontitle">Retry of N40/N28 notification using alternate or failover FQDN</h2>
            
            <p class="p">NCC retries N40 and N48 notifications using the alternate or failover FQDN. It
                supports an NRF query to find alternate or failover FQDN to be used for outgoing N40
                and N28 notification retry. </p>

            <p class="p">If this functionality is configured, and CHF retrieves a search result from the NRF,
                then NRF query is prioritized over SRV DNS query to find the alternate or failover
                FQDN. However, if CHF does not retrieve a search result from NRF, then CHF uses SRV
                DNS query to find the alternate FQDN.</p>

            <p class="p">Note the following important points when this functionality is enabled:</p>

            <ul class="ul" id="concept_yht_5zn_5pb__ol_phn_zsx_gwb">
                <li class="li">CHF stores an NF set from the <code class="ph codeph">3gpp-Sbi-Binding</code> header in the
                    transactions for N40 and N28 sessions. The <code class="ph codeph">3gpp-Sbi-Binding</code>
                    header includes an NF set ID.<p class="p">If multiple <code class="ph codeph">3gpp-Sbi-Binding</code>
                        headers are present in the request, then CHF considers the binding header
                        with the scope of callback.</p>
</li>

                <li class="li">CHF maintains a cache of NF set IDs and associated NF instances along with an
                    expiration time. The expiration time is based on the validity period of the
                    associated search result received from the NRF. CHF uses the cached set of NF
                    instances for an NF set, and does not execute an NRF query prior to the
                    expiration time.</li>

                
                <li class="li">When the CHF retransmits a notification to the alternate or failover SMF or PCF
                    in the network, and if an NF set was received in a
                        <code class="ph codeph">3gpp-Sbi-Binding</code> header for the session, then CHF checks
                    whether a valid NRF query response was received for the NF set ID stored for the
                    session. If a valid NRF
                    query response was received, then CHF examines the NF profiles stored in the
                    cached query result of the NF set ID to derive an alternate or failover FQDN.
                        <p class="p">If a valid cached query result is not available for the stored NF set ID,
                        then CHF initiates an NRF discovery query with the NF set ID of the session
                        to retrieve the associated NF profiles.
                        </p>
</li>

                <li class="li">
                    <p class="p">In addition to the information received in the
                            <code class="ph codeph">3gpp-Sbi-Binding</code> header, NRF query parameters can also
                        be configured for an NF type to derive SMF and PCF destinations.</p>

                </li>

                <li class="li">If an NF set ID is present in the <code class="ph codeph">3gpp-Sbi-Binding</code> header
                    received from the network, then the CHF includes the NF set ID in
                        <code class="ph codeph">3gpp-Sbi-Routing-Binding</code> header that is included in all the
                    notifications sent to the network.</li>

                <li class="li">If the query response from NRF does not provide an alternate or failover FQDN,
                    then the retransmissions are sent to the <em class="ph i">notifyUri</em> FQDN.</li>

                <li class="li">When the CHF successfully receives an N28 or N40 response to a notification
                    routed to an alternate FQDN, the <em class="ph i">notifyUri</em> for that session is updated
                    with the alternate FQDN. If the CHF receives a successful notification response
                    for an initial notification send attempt or a retry, then the <em class="ph i">notifyUri</em>
                    for the session is updated with the FQDN in the
                        <code class="ph codeph">3gpp-Sbi-Target-apiRoot</code> header received in the notification
                    acknowledgement.</li>

            </ul>

            <div class="sectiondiv">
                <p class="p"><strong class="ph b">Example</strong></p>

                <div class="p">Consider the following example to better understand this feature: <div class="fig fignone" id="concept_yht_5zn_5pb__fig_ew3_hnd_hwb"><span class="figcap"><span class="fig--title-label">Figure: </span>Example of N40/N28 notification retry using alternate or failover
                            FQDN</span>
                        
                        <img class="image break" id="concept_yht_5zn_5pb__image_kkw_knd_hwb" height="192" src="../images/alternate_fqdn.PNG" width="480" />
                    </div>
</div>

                <div class="p">
                    <ol class="ol" id="concept_yht_5zn_5pb__ol_fcr_mnd_hwb">
                        <li class="li">An <code class="ph codeph">Nchf_SpendingLimitControl_Subscribe</code> request
                            containing a <code class="ph codeph">3gpp-Sbi-Binding</code> header with the value of
                                <em class="ph i">bl=nf-set; nfset=target-nf-set-id=PCF_SET2</em> is received from
                            the network. <p class="p">CHF stores the <em class="ph i">notifyUri</em> from the message body,
                                and the NF set from the <code class="ph codeph">3gpp-Sbi-Binding</code>
                                information header in the incoming transaction for an N28 session. A
                                successful response is returned to the network.</p>
</li>

                        <li class="li">Subsequently, CHF sends an
                                <code class="ph codeph">Nchf_SpendingLimitControl_Notify</code> request triggered
                            by the change in policy counter status of a policy counter that is
                            subscribed to the N28 session. <p class="p">The
                                    <code class="ph codeph">3gpp-Sbi-Target-apiRoot</code> header is set to the
                                value of the <em class="ph i">notifyUri</em> received in the
                                    <code class="ph codeph">SpendingLimitContext</code> IE. The
                                    <code class="ph codeph">SpendingLimitContext</code> IE is received in the
                                    <code class="ph codeph">Nchf_SpendingLimitControl_Subscribe</code> request
                                that is received in <em class="ph i">Step 1</em>. </p>
The notification also
                            includes <code class="ph codeph">3gpp-Sbi-Routing-Binding</code> header with a value
                            of <em class="ph i">bl=nf-set; nfset= PCF_SET2</em>.</li>

                        <li class="li">The notification is forwarded using the CHF through which the
                                <code class="ph codeph">Nchf_SpendingLimitControl_Subscribe</code> was received in
                                <em class="ph i">Step 1</em>. The notification is sent to the SCP-P and SCP-C
                            before being sent to the PCF based on the FQDN in the notification’s
                            3gpp-Sbi-Target-apiRoot header.</li>

                        <li class="li">The SCP-C receives a response from the PCF with an HTTP status result
                                <code class="ph codeph">500 – Internal Server Error</code> and a server header
                            with the FQDN of the PCF (for example, <code class="ph codeph">Server:
                                PCF-PCF.bbnjXX.xx.com</code>). This triggers SCP-C to initiate an
                                <code class="ph codeph">Nnrf_NFDiscovery</code> query to the NRF. The
                                <code class="ph codeph">Nnrf_NFDiscovery</code> query contains the NF set ID from
                            the <em class="ph i">3gpp-Sbi-Routing-Binding</em> header of the notification.</li>

                        <li class="li">The SCP-C receives the search result from NRF. The search result
                            received from he NRF contains a single NF profile which has the FQDN
                            which is same as that of the PCF returned in the server header in
                                <em class="ph i">Step 4</em>. SCP-C returns the error response that was received
                            from the PCF (that is, with a single SMF FQDN received in the server
                            header) to the CHF.</li>

                        <li class="li">When the CHF receives the error response, it attempts to retrieve the
                            alternate or failover PCF to resend the notification if the following
                            conditions are met:<ul class="ul" id="concept_yht_5zn_5pb__ul_od2_xpd_hwb">
                                <li class="li">HTTP status result 500 is not configured to stop retries.</li>

                                <li class="li">Only one PCF consumer FQDN is included in the server header of
                                    the response.</li>

                            </ul>
</li>

                    </ol>

                </div>

                <p class="p">CHF looks for an alternate or failover SMF for NF set ID <em class="ph i">PCF_SET2</em> either
                    using a locally cached set of NF profiles on the CHF or by initiating a
                        <code class="ph codeph">Nnrf_NFDiscovery</code> query to retrieve the associated NF
                    profiles from the NRF. However, in this case, an alternate or failover PCF FQDN
                    is not available. </p>

                <p class="p">As the server header included the same PCF FQDN sent in the initial notification,
                    the CHF does not attempt to resend the notification. The CHF sends a
                        <code class="ph codeph">Nchf_SpendingLImitControl_Notify</code> when the next Gy or N40
                    transaction is received from the network.</p>

                <p class="p">If the FQDN in the server header is different than the one used for the
                    notification in <em class="ph i">Step 2</em>, then the CHF resends the notification to the same
                    FQDN in the <code class="ph codeph">3gpp-Sbi-Target-apiRoot</code> header.
                    </p>

            </div>
            <div class="sectiondiv"><strong class="ph b">Additional information</strong><ul class="ul" id="concept_yht_5zn_5pb__ul_bb5_z32_hwb">
                    
                    <li class="li">As the CHF does not directly connect with the SCP, it does not explicitly
                        select the SCP to be used for outgoing notifications. CHF manages the
                        failovers when it encounters a threshold of failures for transactions sent
                        to a given SCP. It also periodically retries the original SCP to fail-back
                        when it is able to successfully process outgoing transactions.
                            <p class="p">Notifications are redirected when the SCP fails. When the SCP
                            recovers, notifications are redirected to the primary SCP.</p>
</li>

                    <li class="li">CHF stores the NF set ID present in the <code class="ph codeph">3gpp-Sbi-Binding</code>
                        header received from the SMF or PCF. CHF does not store any other parameters
                        from the <code class="ph codeph">3gpp-Sbi-Binding</code> header. That is, the binding name
                        is nf-set and the parameter which is stored is NF set.</li>

                    <li class="li">The stored <em class="ph i">notifyUri</em> is used to identify a second N28 session request
                        for the same device from the same PCF. However, if the CHF changes the
                            <em class="ph i">notifyUfi</em> for an N28 session upon a failover triggered by a
                        notification, and the original PCF sends a
                            <code class="ph codeph">Nchf_SpendingLImitControl_Subscribe</code> request for the
                        same device with the original value for the <em class="ph i">notifyUri</em>, then the CHF
                        does not detect this as a duplicate session from the same PCF. Hence, the
                        original session is not removed.</li>

                </ul>
</div>
        </div>

        <div class="section" id="concept_yht_5zn_5pb__section_zwy_wmz_vyb"><h2 class="title sectiontitle">Retry of N40/N28 notification using alternate or failover FQDN with service
                name</h2>
            
            <p class="p">To retry N40/N28 notification using alternate or failover FQDN along with
                    <code class="ph codeph">servname</code> (service name), set the parameter <span class="ph uicontrol">Notify
                    retry using NF Discovery</span> to one of the following values:</p>

            <div class="p">
                <ul class="ul" id="concept_yht_5zn_5pb__ul_ccy_dk3_wyb">
                    <li class="li"><var class="keyword varname">Enable NF Discovery with Servicename</var></li>

                    <li class="li"><var class="keyword varname">Enable NF Discovery with Selective Retry and
                        Servicename</var>.</li>

                </ul>

            </div>

            <p class="p">Refer to <a class="xref" href="#concept_yht_5zn_5pb__table_vny_smz_gwb">Routing Outbound 5G Configurations</a> for details about this
                parameter.</p>

            <p class="p">If these options are selected, CHF stores <code class="ph codeph">servname</code> received from the
                    <code class="ph codeph">3gpp-Sbi-Binding</code> header in the transactions for N40 and N28
                sessions. If <code class="ph codeph">servname</code> is present in the session, then it is
                included in the outbound <code class="ph codeph">3gpp-Sbi-Routing-Binding</code> notification
                header as follows. </p>

            <pre class="pre codeblock" id="concept_yht_5zn_5pb__codeblock_ztv_w3h_wyb"><code>bl=nfset; nf-set=&lt;SMS-NF-Set-ID-Z&gt;; <strong class="ph b">servname</strong>=&lt;SMF-service-name-Z&gt;</code></pre>
            <p class="p">CHF also includes this <code class="ph codeph">servname</code> in the
                    <code class="ph codeph">service-names</code> parameter of the NRF discovery query to get the
                list of NFProfiles.</p>

            <p class="p">If CHF has selected an alternate consumer NFProfile to send a notification retry,
                then the CHF derives the URI for the notification retry as follows:</p>

            <pre class="pre codeblock" id="concept_yht_5zn_5pb__codeblock_icd_3b3_wyb"><code>&lt;scheme&gt;://&lt;fqdn&gt;:&lt;port&gt;</code></pre>
            <p class="p">where</p>

            <ul class="ul" id="concept_yht_5zn_5pb__ol_tjl_cnz_vyb">
                <li class="li"><code class="ph codeph">fqdn</code>: Selected from the <code class="ph codeph">nfServices</code> array of
                    the NFProfile, whose service name matches the <code class="ph codeph">servname</code> value
                    from the consumer in the most recently received
                        <code class="ph codeph">3gpp-Sbi-Binding</code> header.</li>

                <li class="li"><code class="ph codeph">scheme</code>: Selected <code class="ph codeph">nfService</code> →
                        <code class="ph codeph">scheme</code></li>

                <li class="li"><code class="ph codeph">port</code>: Selected <code class="ph codeph">nfService</code> →
                        <code class="ph codeph">ipEndPoints</code> → <code class="ph codeph">port</code></li>

            </ul>

            <table cellpadding="4" cellspacing="0" summary="" id="concept_yht_5zn_5pb__table_d3r_l4h_wyb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:24.752475247524753%" /><col style="width:75.24752475247524%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e2462">If...</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d37541e2465">Then...</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2462 ">Flag for the 5G router is disabled, that is, no specific NF
                                target (PRIMARY or ALTERNATE) is defined in the routing
                                table.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2465 ">For the retries, request is made to the alternate URI (different
                                from the primary Notification URI). If an alternate URI is not
                                found, then the request is made to the Notification URI saved in the
                                session.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2462 ">In the routing table Notification URI contains value as
                                ALTERNATE.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2465 ">
                                <ul class="ul" id="concept_yht_5zn_5pb__ul_fwp_lh3_wyb">
                                    <li class="li">The request is sent to the next priority address from the
                                        NFProfiles (different from the primary Notification URI). </li>

                                    <li class="li">If the Notification URI contains a value
                                            <code class="ph codeph">PRIMARY</code>, then the request is sent on
                                        the Notification URI saved in the session. </li>

                                    <li class="li">If the Notification URI contains value
                                            <code class="ph codeph">ALTERNATE</code> but no alternate NFProfile is
                                        found, then the request is sent to the Notification URI
                                        saved in the session.</li>

                                </ul>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2462 ">If the server header includes two consumer nfInstanceIds</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2465 ">Retry is not attempted (even if max retries has reached).</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2462 ">If the <code class="ph codeph">nfInstanceId</code> matches that used in the
                                previous notification </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2465 ">CHF selects another consumer from the <code class="ph codeph">nfSet</code>
                                stored for the session. If no other consumers are available, no more
                                retries are attempted. This overrides the routing table in cases
                                where Notification URI contains the value
                                <code class="ph codeph">PRIMARY</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2462 ">If the <code class="ph codeph">nfInstanceId</code> does not match that in the
                                notification</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d37541e2465 ">CHF selects another consumer (if available) from the
                                    <code class="ph codeph">nfSet</code> that does not match the following:<ul class="ul" id="concept_yht_5zn_5pb__ul_snv_5j3_wyb">
                                    <li class="li"><code class="ph codeph">nfInstanceId</code> in the server header</li>

                                    <li class="li">consumer used in the previous notification </li>

                                </ul>
<p class="p">If no other consumers, except for the one used in the
                                    previous notification, are available then the same destination
                                    is used for the retry.</p>
</td>

                        </tr>

                    </tbody>
</table>

        </div>

    </div>
<div class="footer"><hr /><p>Diameter/HTTP Configuration Guide • P556766-DN1000054969-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>