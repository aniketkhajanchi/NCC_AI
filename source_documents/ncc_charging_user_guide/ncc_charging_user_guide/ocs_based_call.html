<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="OCS-based call redirection for VoLTE MO calls" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-d1e237055" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>OCS-based call redirection for VoLTE MO calls</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-d1e237055">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">OCS-based call redirection for VoLTE MO calls</h1>
<div class="body conbody">
    <p class="p">For VoLTE calls there is a functionality to redirect a MO voice call to a configured
      destination using ABD table configuration. This is usually used by operators to route calls to
      DA and customer care 611.</p>

<div class="section"><h2 class="title sectiontitle">Mapping table and custom data configuration</h2>
<p class="p">Configure appropriate custom data for device. ABD routing is be supported for either the global
                level or device level for VoLTE calls.</p>

<p class="p">Configure a mapping table with <span class="ph uicontrol">Pattern Type</span> as <var class="keyword varname">REGEX_PATTERN</var> as follows:</p>

<div class="fig fignone">
        
        <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_com_map_dacall_default.png" height="209" width="817" />
      </div>

</div>

<div class="section"><h2 class="title sectiontitle">Rule examples</h2>
<div class="sectiondiv">
<p class="p"><strong class="ph b">611 calls</strong></p>

<p class="p">When a successful CCA is returned and a routing number is configured then the FUI is set as follows:</p>
<ul class="ul">
<li class="li">
<p class="p">
<var class="keyword varname">Final-Unit-Action</var> AVP is set as <var class="keyword varname">REDIRECT</var>
</p>

</li>

<li class="li">
<p class="p">
<var class="keyword varname">Redirect-Address-Type</var> AVP is set to the <var class="keyword varname">SIP URL</var>
</p>

</li>

<li class="li">
<p class="p">
<var class="keyword varname">Redirect-Server-Address</var> AVP is set as a configurable string</p>

</li>

</ul>

<div class="fig fignone">
          
          <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_611call_1_default.png" height="121" width="812" />
        </div>

<p class="p">The <var class="keyword varname">Requested-Party-Address</var> AVP is used for ABD routing determination. If this AVP is not populated, then <var class="keyword varname">Called-Party-Address</var> AVP is used.</p>

<div class="fig fignone">
          
          <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_611call_2_default.png" height="115" width="775" />
        </div>

</div>
<div class="sectiondiv">
<p class="p"><strong class="ph b">DA calls</strong></p>

<p class="p">For a DA query call, the TAS is sent to the OCS as a DA indicator. For example, the TAS sends <em class="ph i">Primary Call Type</em> = 14, <em class="ph i">Service Type != 59</em> (59 indicates DA transfer), and the <em class="ph i">Service Type</em> is set to 35 (35 indicates ABD).</p>

<p class="p">For a DA transfer call, there is no change to current behavior.  TAS sends <em class="ph i">Service Type = 59</em> to the OCS.</p>

<div class="fig fignone">
          
          <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_da_redir_default.png" height="273" width="915" />
        </div>

</div>
<div class="sectiondiv">
<p class="p"><strong class="ph b">Free calls with 4011 result and FUI</strong></p>

<p class="p">If an ABD call returns 4011 in the result (Command level result), it needs apply below logic:</p>
<ol class="ol">
<li class="li">
<p class="p">Rule is used to determine whether VoLTE free call supports ABD routing.</p>

</li>

<li class="li">
<p class="p">If it returns true, then FUI for routing number is included for 4011 result in command level and only FUI related AVPs is included in category level.</p>

</li>

</ol>

<div class="fig fignone">
          
          <img class="image break" src="../images/img9yz-09126-ug01-pczza-sp1-f_4011_call_default.png" />
        </div>

</div>
</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>