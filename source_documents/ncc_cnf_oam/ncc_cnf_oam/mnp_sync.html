<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="mnp_sync" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="mnp_sync" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>mnp_sync</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="mnp_sync">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">mnp_sync</h1>
<div class="body conbody">
        <div class="section" id="mnp_sync__section_uqf_kqh_1qb"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">This script processes a shared MNP database CSV file and loads it into <span class="ph">NCC</span> internal MNP database. The shared MNP database CSV
                file is compared with the product of running <code class="ph codeph">db-list -l
                    numberPortability</code> in admincli. A delta file is generated that contains
                the MNP records to be inserted/updated/deleted. The <span class="ph">NCC</span>
                internal MNP database is then updated with the use of this delta and through the SM
                REST API. Retry mechanism is an iteration of all the steps of the algorithm. It runs
                until success (no more records to update) or three times at most.</p>

        </div>

        <div class="section" id="mnp_sync__section_pt5_kqh_1qb"><h2 class="title sectiontitle">Syntax</h2>
            
            <div class="p">
                <pre class="pre codeblock" id="mnp_sync__codeblock_vml_lqh_1qb"><code>mnp_sync.py [-h] --ftpUrl FTPURL [--ftpUser FTPUSER] [--ftpPass FTPPASS] --apiUrl APIURL [--apiUser APIUSER]
                   [--apiPass APIPASS] [--logLevel LOGLEVEL] [--useCurl] [--useRequests]</code></pre>
            </div>

            <table cellpadding="4" cellspacing="0" summary="" id="mnp_sync__table_grl_rjq_nlb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d20065e68">Option</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d20065e71">Description</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d20065e74">Option arguments</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">No arguments</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">Displays usage or help information.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">-h or -?</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">Displays usage or help information.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--ftpUrl FTPURL</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">FTP/SFTP URL of directory where MNP CSV can be found.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 ">Can take a URL in a server which is SFTP, FTP, or FTPS (FTP over
                                    TLS).<p class="p">Can also take a folder in the local SFTP of admincli. In
                                    that case you need only provide a directory path created in this
                                    server. For example: <span class="ph filepath">numberPortability</span>
                                    folder was created and CSV files are uploaded there. In that
                                    case, the script transforms this into
                                        <span class="ph filepath">/opt/tpa/dump/numberPortability</span> and
                                    tries to find the CSV in that local folder.</p>
</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--ftpUser FTPUSER</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">FTP user name</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--ftpPass FTPPASS</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">FTP password</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--apiUrl APIURL</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">REST API URL</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--apiUser APIUSER</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">REST API user name</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--apiPass APIPASS</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">REST API password</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--logLevel LOGLEVEL</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">Log Level (ERROR|WARNING|INFO|DEBUG) The default is INFO.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--useCurl</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">Use CURL to perform REST API calls. This is the default
                                behavior.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 ">Requests library in Python is faster, but Python requests in the
                                environment do not work. Requests in CENTOS7 are compiled with an
                                old version of TLS. Linux CURL is used instead and <code class="ph codeph">--useCurl
                                </code>is the default for now, but <code class="ph codeph">--useRequests</code>
                                is there, in case the environment changes.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e68 "><code class="ph codeph">--useRequests</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e71 ">Use requests library to perform REST API calls. The default is
                                    <code class="ph codeph">--useCurl</code>.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d20065e74 "> </td>

                        </tr>

                    </tbody>
</table>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>