<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Example NODE 3 -bcmt-cpi12-worker-16 - contains active ME IOHD, SM CKEY MariaDB" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Example NODE 3 -bcmt-cpi12-worker-16 - contains active ME IOHD, SM CKEY MariaDB</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Example  NODE 3 -bcmt-cpi12-worker-16 - contains active ME IOHD, SM CKEY MariaDB</h1>
<div class="body conbody">
    <div class="section" id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb__section_w3y_3b1_hpb"><h2 class="title sectiontitle">Check the pods on the current worker node</h2>
      
      <div class="p">
        <pre class="pre codeblock"><code>[root@bcmt-cpi12-control-01 ~]# kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName=bcmt-cpi12-worker-16
NAMESPACE      NAME                                         READY   STATUS    RESTARTS   AGE     IP               NODE                   NOMINATED NODE   READINESS GATES
istio-system   istio-cni-node-lhm78                         2/2     Running   3          4d5h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
istio-system   istio-prometheus-cpro-node-exporter-88wb6    1/1     Running   0          4d5h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
kube-system    csi-cinder-nodeplugin-66jmf                  2/2     Running   0          7d1h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
kube-system    kube-proxy-b8rnr                             1/1     Running   0          7d2h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
kube-system    local-volume-provisioner-qhhhv               1/1     Running   0          7d2h    192.168.187.0    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           bcmt-ip-man-agent-l2qfd                      1/1     Running   0          7d2h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           bcmt-operator-5cc4l                          1/1     Running   0          7d2h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           cert-manager-webhook-d8d5dcc48-kqmx9         1/1     Running   0          7d1h    192.168.187.1    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           csi-cephfs-manila-nodeplugin-tczh9           2/2     Running   0          7d1h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           csi-manila-nodeplugin-ns7xx                  4/4     Running   0          7d1h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
ncms           csi-nodeplugin-nfsplugin-lt7lm               2/2     Running   0          7d1h    172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-me         ppme3btel-me-fluentd-5cb5c456fd-xkffw        2/2     Running   0          31h     192.168.187.18   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-me         ppme3btel-me-cpro-node-exporter-mpn64        1/1     Running   0          31h     172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-me         ppme3sps-me-iohd-1                           2/2     Running   0          3d2h    192.168.187.9    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-me         ppme3zk-sps-me-0                             3/3     Running   0          3d2h    192.168.187.10   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-rt         pprt4-cdr-sentinel-1                         2/2     Running   0          46h     192.168.187.16   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-rt         pprt4-cdr-server-0                           4/4     Running   0          46h     192.168.187.17   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-rt         pprt4btel-rt-fluentd-56dccfcb44-t7c9z        2/2     Running   0          31h     192.168.187.19   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-rt         pprt4btel-rt-cpro-node-exporter-hm4wm        1/1     Running   0          31h     172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-rt         pprt4sps-rt-charging-6979f95d7f-mjrkq        2/2     Running   0          3d1h    192.168.187.12   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-sm         ppsm2btel-sm-fluentd-85bdc7b4ff-66nds        2/2     Running   0          31h     192.168.187.20   bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-sm         ppsm2btel-sm-cpro-node-exporter-hltpm        1/1     Running   0          31h     172.30.254.34    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-sm         ppsm2ckey-cmdb-mariadb-0                     3/3     Running   0          3d12h   192.168.187.3    bcmt-cpi12-worker-16   &lt;none&gt;           &lt;none&gt;
sps-sm         ppsm2zk-sps-sm-2                             3/3     Running   0          3d2h    192.168.187.8    bcmt-cpi12-worker-16   &lt;none&gt;</code></pre>
      </div>

    </div>

    <div class="section" id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb__section_ojz_kb1_hpb"><h2 class="title sectiontitle">Drain the node and note the results</h2>
      
      <div class="p">
        <pre class="pre codeblock"><code>root@bcmt-cpi12-control-01 ~]# kubectl drain $NODENAME --delete-local-data=true
node/bcmt-cpi12-worker-16 cordoned
evicting pod "ppsm2zk-sps-sm-2"
evicting pod "cert-manager-webhook-d8d5dcc48-kqmx9"
evicting pod "ppme3btel-me-fluentd-5cb5c456fd-xkffw"
evicting pod "ppme3sps-me-iohd-1"
evicting pod "ppme3zk-sps-me-0"
evicting pod "pprt4-cdr-sentinel-1"
evicting pod "pprt4-cdr-server-0"
evicting pod "pprt4btel-rt-fluentd-56dccfcb44-t7c9z"
evicting pod "pprt4sps-rt-charging-6979f95d7f-mjrkq"
evicting pod "ppsm2btel-sm-fluentd-85bdc7b4ff-66nds"
evicting pod "ppsm2ckey-cmdb-mariadb-0"
pod/cert-manager-webhook-d8d5dcc48-kqmx9 evicted
pod/ppme3sps-me-iohd-1 evicted
pod/pprt4-cdr-server-0 evicted
pod/ppsm2ckey-cmdb-mariadb-0 evicted
pod/pprt4-cdr-sentinel-1 evicted
pod/pprt4sps-rt-charging-6979f95d7f-mjrkq evicted
pod/pprt4btel-rt-fluentd-56dccfcb44-t7c9z evicted
pod/ppme3btel-me-fluentd-5cb5c456fd-xkffw evicted
pod/ppsm2btel-sm-fluentd-85bdc7b4ff-66nds evicted
pod/ppsm2zk-sps-sm-2 evicted
pod/ppme3zk-sps-me-0 evicted
node/bcmt-cpi12-worker-16 evicted</code></pre>
      </div>

    </div>

    <div class="section" id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb__section_vvh_mb1_hpb"><h2 class="title sectiontitle">Bring node back into operation</h2>
      
      <div class="p">
        <pre class="pre codeblock"><code>kubectl uncordon bcmt-cpi12-worker-16</code></pre>
      </div>

    </div>

    <div class="section" id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb__section_anh_gfh_hpb"><h2 class="title sectiontitle">Problems faced during drain</h2>
      
      <div class="p">
        <ol class="ol" id="worker_node_maintenance_example__node_3_bcmt_cpi12_worker_16_contains_active_me_iohd_sm_ckey_mariadb__ol_ozz_hfh_hpb">
          <li class="li">There is 5G and 4G call failure in between the operation because the active IOHD goes
            down for three to four seconds.</li>

          <li class="li">The User and Role Management GUI is not accessible for one to two minutes, since its
            MariaDB goes down.</li>

          <li class="li">Provisioning does not work for one to two minutes, since the MariaDB for User and Role
            Management goes down.</li>

        </ol>

      </div>

    </div>

  </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>