<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="NCC in-service upgrade canary testing" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="ncc_canary_isu_testing" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>NCC in-service upgrade canary testing</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="ncc_canary_isu_testing">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1"><span class="ph">NCC</span> in-service upgrade canary testing</h1>
<div class="body conbody">
        <p class="p"><span class="ph">NCC</span> provides an option to use canary testing when performing
            an in-service upgrade (ISU) to the next software version. This allows a small amount of
            traffic to be processed by the new software to ensure that it works as expected for the
            existing feature set, before performing a full upgrade to the new software. </p>

        <p class="p">A small amount of incoming traffic is routed to the new software, gradually increasing
            that amount as confidence is gained in the new software version. This typically starts
            with doing canary routing for a small number of entities (device, account, or group)
            marked as <code class="ph codeph">Canary test</code>. When ready, the next larger set of traffic are
            for those entities (device, account, or group) marked as <code class="ph codeph">Canary friendly
                user</code>, which are known friendly users. Later, this traffic can proceed to
            PERCENTFIXED, which routes a fixed percentage of random incoming traffic to the new
            software. Once satisfied that the new software is performing as expected, a full ISU can
            be performed. Only a small number of canary pod instances are instantiated (to minimize
            impact on overall system resources) by default, as the traffic percentage is expected to
            be small.</p>

        <p class="p">You typically choose to perform a canary ISU on the first <span class="ph">NCC</span> system to be upgraded, then once the software is proven to be good and that first
            system is on the new software version, perform a standard ISU (without canary) on all of
            the remaining <span class="ph">NCC</span> systems in the network deployment.</p>

        <p class="p"><span class="ph">NCC</span> includes the most critical pod types in the canary
            testing flows for both call processing and provisioning, but does not include all pod
            types and does not include any stateful pod types (such as database).</p>

        <p class="p">These components are available for canary testing based on the system/subsystem type:</p>

        <div class="p">
            <ul class="ul" id="ncc_canary_isu_testing__ul_u1h_bqq_rwb">
                <li class="li">IG system: Charging, Notification, Provisioning, Recharge, ServiceManager</li>

                <li class="li">ME subsystem: Charging, Notification, Provisioning, Recharge</li>

                <li class="li">SM system (applicable to selected deployments only): ServiceManager</li>

                <li class="li">RT system (applicable to selected deployments only): Charging, Notification,
                    Provisioning</li>

            </ul>

        </div>

        <p class="p">Use the Input Generator spreadsheet to specify which components to deploy for a canary
            test in the <span class="ph uicontrol">CHF Traffic Routing</span> section of each namespace
            worksheet. The selected components are deployed through the <span class="ph">NCC</span> Canary Operator tool. You can also specify the traffic
            type in this section. The valid <span class="ph uicontrol">Type</span> values are: </p>

        <ul class="ul" id="ncc_canary_isu_testing__ul_jzn_jwj_rwb">
            <li class="li">NONE: no canary active instances of any components are created and no traffic is
                routed to special canary pod types.</li>

            <li class="li">PERCENTFIXED : indicates that the specified percentage of all incoming requests is
                routed to the canary active instances of the targeted components.</li>

            <li class="li">TESTENTITY: indicates that any request targeting a device, an account, or a group
                that has its <span class="ph uicontrol">Canary Mode</span> attribute set to <span class="ph uicontrol">Canary
                    test</span> is routed to the canary active instance of the targeted
                component.</li>

            <li class="li">FRIENDLYENTITY: indicates that any request targeting a device, an account, or a
                group that has its <span class="ph uicontrol">Canary Mode</span> attribute set to
                    <span class="ph uicontrol">Canary friendly user</span> or <span class="ph uicontrol">Canary
                    test</span> is routed to the canary active instance of the targeted
                component.</li>

        </ul>

        <p class="p">The value <span class="ph uicontrol">Canary test</span>, <span class="ph uicontrol">Canary friendly
            user</span>, or <span class="ph uicontrol">None</span> can be assigned to the
                <span class="ph uicontrol">Canary Mode</span> attribute of a device, an account, or a group in
            the SM GUI. It is also possible to obtain a list of all devices, or accounts, or groups
            which have a <span class="ph uicontrol">Canary Mode</span> attribute set to <span class="ph uicontrol">Canary
                friendly user</span> or <span class="ph uicontrol">Canary test</span>.</p>

        <p class="p">In the SM GUI, click on <span class="ph uicontrol">ACCOUNTS</span> (or DEVICES or GROUPS). There are
            two icons next to the search icon, one for <span class="ph uicontrol">Canary Mode accounts</span>
            and one for <span class="ph uicontrol">Canary friendly user accounts</span>.</p>

    </div>
<div class="footer"><hr /><p>Installation and Upgrade Guide • P556766-DN1000055103-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>