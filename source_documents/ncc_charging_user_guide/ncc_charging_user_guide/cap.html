<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Cap" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-cap" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Cap</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-cap">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Cap </h1>
<div class="body conbody">
  <div class="note notice" id="id9yz-09126-ug01-pczza-sp1-cap__note_wws_hyw_w5b"><div class="noticetitle"><img src="../../web/css/../images/notice.svg" title="notice-icon" class="noteicon" />Notice:</div> Cap is supported only through API and this support
   will be deprecated in the future. It is recommended to use Threshold for Cap-related function and
   migrate the existing Cap configuration to Threshold.</div>
  <p class="p">Cap is the limit applied by the top-level group to the device on its hierarchy resources either
   directly (directly applied to the device) or indirectly (applied to the low-level group to the
   devices associated with that low-level group).</p>

  <div class="note" id="id9yz-09126-ug01-pczza-sp1-cap__note_xws_hyw_w5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> In a multi-level hierarchy group, cap is not applicable to the
   middle-level(s) because intermediate levels ideally do not have resources.</div>

  <p class="p">Following are few important points for cap entity:</p>

  <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-cap__ul_yws_hyw_w5b">
   <li class="li">Cap can only be applied to shared resources, such as bucket or main balance. For example, cap
    is applied as a unit for data buckets or as money for main balance.</li>

   <li class="li">Cap is not applicable to the subscription fees.</li>

   <li class="li">Cap defined for a group is applicable only if the group counters are defined as rule engine
    output and inside the group definition.</li>

   <li class="li">Cap is expressed in absolute value for unlimited shared resources and multi-level group
    hierarchy resources.</li>

   <li class="li">Cap on overage determines the limit on the overage value allowed on the main balance of the
    account.</li>

  </ul>

  <div class="note" id="id9yz-09126-ug01-pczza-sp1-cap__note_zws_hyw_w5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The call is not allowed below the limit of cap value defined for the
   main balance.</div>

<div class="section" id="id9yz-09126-ug01-pczza-sp1-cap__capthreshold"><h2 class="title sectiontitle">Comparison between cap and threshold</h2>
   
<p class="p">The following list shows a comparison of cap and threshold:</p>
<ul class="ul">
<li class="li">Cap and threshold are not same.</li>

<li class="li">Cap actions and threshold actions are not same. There are different actions supported at
     threshold and different at cap.</li>

<li class="li">For a cap associated with a counter, the Threshold Profile Group Instance, Threshold Profile
     Instance and Threshold Instance are created and embedded in the counter instance while creation
     of a subscription.</li>

<li class="li">Cap is similar to a Threshold Profile Group having a single Threshold Profile and
     Threshold.</li>

<li class="li">The cap name is referenced in the counter threshold list, similar to <em class="ph i">Threshold Profile Group
      Name</em>.</li>

<li class="li">Cap is associated with counter only while a threshold is associated with both bucket and
     counter.</li>

</ul>

</div>

<div class="section">
<p class="p"><strong class="ph b">Cap actions</strong></p>

<p class="p">When a cap is reached, NCC performs either one or a combination of the following actions:</p>
<ul class="ul">
<li class="li"><var class="keyword varname">Notification-Stop</var>: This action notifies to stop using the resource and switch
     to the next resource.</li>

<li class="li"><var class="keyword varname">Notification-Continue</var>: This action notifies to continue using the same
     resource.</li>

<li class="li"><var class="keyword varname">Notification-Reject</var>: This action notifies and rejects the call.</li>

<li class="li"><var class="keyword varname">Reject</var>: This action rejects the call.</li>

<li class="li"><var class="keyword varname">Send-RAR</var>: This action notifies to reauthorize the call.</li>

</ul>

</div>

<div class="section"><h2 class="title sectiontitle">Configuration details</h2>
<p class="p">Cap is supported only through API. The following table describes the parameters:</p>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <ul class="ul">
<li class="li">
<p class="p">For provisioning purpose, the cap entity is included in threshold. Cap reuses the threshold functionality for database parameters, such as <em class="ph i">Rule Id</em>, <em class="ph i">RuleScannerPlugin</em>, and <em class="ph i">RuleSet</em>.</p>

</li>

<li class="li">
<p class="p">No separate cap table is created in database. Instead, <em class="ph i">Threshold Profile Group</em> table is used to store the cap limit in the database.</p>

</li>

</ul>

</div>

<div class="sectiondiv">
<p class="p"><strong class="ph b">Basic Details</strong></p>

<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Parameters for cap</span></caption><colgroup><col /><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
       <tr class="row">
        <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e190">Parameter</th>

        <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e193">Description</th>

        <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e196">Options</th>

        <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e199">Mandatory/ Optional</th>

       </tr>

      </thead>
<tbody class="tbody">
       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Cap Name</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">This parameter indicates a unique name of the cap. The cap name is appended with
          <var class="keyword varname"> .CAP</var> at the end of the string and stored in the database.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">String</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Mandatory</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Unit Type</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">
         <div class="p">This parameter indicates the unit type associated with the cap entity.<div class="note" id="id9yz-09126-ug01-pczza-sp1-cap__note_ypw_4ww_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The cap unit type must match with the unit type of the counter
           defined or referenced with in the Group Definition. </div>
</div>

       </td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">Select the required unit type from the given unit types in the drop-down list.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Mandatory</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Value</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">This parameter indicates the value of the cap limit. Ensure that the cap value is a
         positive value.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">Long</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Mandatory</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Cap Policy</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">
         <p class="p">This parameter indicates the cap policy. The field value can be set to either of the
          given values:</p>

         <ul class="ul">
          <li class="li">
           <p class="p">true: The cap is a PolicyCAP.</p>

          </li>

          <li class="li">
           <p class="p">false: <em class="ph i">Threshold Rule Action</em> is <var class="keyword varname">Send-SNR</var>, the flag forcibly
            needs to be set to true and the threshold is then PolicyThreshold.</p>

          </li>

         </ul>

       </td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">Select this check box to indicate whether the cap is a PolicyCAP.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Optional</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Security Domain</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">This parameter indicates the security domain associated with the cap.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">Select the required security domain from the predefined security domains in the
         drop-down list.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Optional</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e190 ">Configuration</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e193 ">This parameter indicates the cap entity configuration.</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e196 ">String</td>

        <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e199 ">Optional</td>

       </tr>

       <tr class="row">
        <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d364006e190 d364006e193 d364006e196 d364006e199 "> Add rule configuration to cap.</td>

       </tr>

      </tbody>
</table>

</div>
</div>

<div class="section"><h2 class="title sectiontitle">Actions associated with cap</h2>
<p class="p">A wrapper entity over threshold is used as a cap, where the cap value defined over the counter is used either as a group counter or a device counter.</p>

<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:27.70083102493075%" /><col style="width:72.29916897506925%" /></colgroup><thead class="thead" style="text-align:left;">
      <tr class="row">
       <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e360">
        <p class="p">Action</p>

       </th>

       <th class="entry cellrowborder" style="vertical-align:top;" id="d364006e366">
        <p class="p">Description</p>

       </th>

      </tr>

     </thead>
<tbody class="tbody">
      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">Create</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to provision a cap entity in database after defining the cap value and providing
        the other mandatory parameters.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">CreateCap</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to provision a cap entity in database for the cap fields entered.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">Delete</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to remove a cap definition object from database.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">DeleteCap</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to delete a cap entity for the cap ID entered.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">GetDeviceGroupCap</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to fetch all the Device Group Counters from database and get the list of cap. It
        also gives the difference between the counter current value and cap value. If the cap value
        is greater than the counter current value then the difference value is positive else
        difference value is negative.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">Read</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to read the ThresholdProfileGroup for the given Id.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">ReadCap</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to read the cap for the given Id.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">ThresholdProfileGroupExists</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to check if the ThresholdProfileGroup exist for the given Id.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">Update</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to modify the cap definition or the possible action required for this cap in
        database.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e360 ">UpdateCap</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d364006e366 ">Used to update the cap object.</td>

      </tr>

     </tbody>
</table>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> These actions are valid for internal purposes only. It is not accessible through the SM GUI
    for operators</div>

</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>