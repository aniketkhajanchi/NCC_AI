<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="CDR streams" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="c_data_refinery" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>CDR streams</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="c_data_refinery">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">CDR streams</h1>
<div class="body conbody">
        <p class="p">NCC CDR streams consist of seven separate CGF (DR) streams performing functionalities
            such as receiving input, performing required transformation and generating output. The
            four main streams process the data – Kafka input stream, Business logic stream, File
            output stream, and Kafka output stream. The other three are supporting streams for
            configuration, maintenance and logging purposes. While being processed by the streams,
            the data is stored securely in an in-memory datastore (Redis), later on referred to as
            “the database”.</p>

        <p class="p">Kafka input stream receives event data records (EDRs) and charging data records (CDRs)
            from different components in Nokia Converged Charging (NCC) via Apache Kafka broker and
            writes them securely into the database. Individual records are stored in CGF internal
            record format as is and no modification to the data is done in the stream. See <a class="xref" href="overview_kafka_input_streams.html">Kafka input stream</a> for more information.</p>

        <p class="p">Business logic stream reads the input records from the database in batches, does custom
            mapping of the data if needed, and stores the created output records in the database. By
            default, no mapping or aggregation of the data is performed. See <a class="xref" href="overview_business_logic_stream.html">Business logic stream</a> for more information. If records get
            rejected in the Business logic stream, the Reprocessor stream can be used for
            reprocessing the rejected records, see <a class="xref" href="reprocessr_stream.html#reprocessr_stream">Reprocessor stream</a> for more information.</p>

        <p class="p">Output streams collect the ready output records from the database in batches, encode them
            in ASN.1 format and distribute the resulting binary either as output files to configured
            locations or to an Apache Kafka topic. See <a class="xref" href="overview_output_stream.html">File output stream</a>
            and <a class="xref" href="kafka_output_stream.html#kafka_output_stream">Kafka output stream</a> for more
            information.</p>

        <p class="p">Configuration stream is used for taking into use and updating file distribution rules
            configured in lookup tables, as well as flushing the database if needed. See <a class="xref" href="overview_configuration_stream.html">Configuration stream</a> for more information. </p>

        <p class="p">Log distributor stream takes the records that Kafka output stream failed to distribute
            and stores them to a remote location via SFTP. See <a class="xref" href="log_distributor_stream.html#log_distributor_stream">Log distributor stream</a> for more
            information.</p>

        <p class="p">Additionally, there are streams dedicated to processing of late rating records. See <a class="xref" href="late_rating_streams.html#late_rating_streams">Late rating streams</a> for more information.</p>

        <p class="p">Finally, there are Assume Positive streams that are responsible for processing the
            temporary traffic allowance records that are created in case of an unreachable CHF by
            PGW, SMF, or IMS and sends them to CHF to reprocess.</p>

    </div>
<div class="footer"><hr /><p>Overview Guide • P556766-DN1000054925-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>