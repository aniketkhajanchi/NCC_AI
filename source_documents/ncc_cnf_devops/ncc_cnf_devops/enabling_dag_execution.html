<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Enabling DAG execution" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="enabling_dag_execution" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Enabling DAG execution</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="enabling_dag_execution">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Enabling DAG execution</h1>
<div class="body conbody">
        <p class="p">By default, DAGs are not enabled in an Airflow/Maestro setup, that is, you cannot execute
            test suites from the Airflow UI on a freshly installed Maestro. Only a maintenance DAG
            is present on the Airflow landing page.</p>

        <p class="p">The following figure presents an example of the Airflow landing page with no test
            DAGs.</p>

        <div class="fig fignone" id="enabling_dag_execution__fig_qnd_zd5_3pb"><span class="figcap"><span class="fig--title-label">Figure: </span>Airflow landing page with no test DAGs</span>
            
            <img class="image break" id="enabling_dag_execution__image_rfx_c25_3pb" src="../images/cnf_devops_AirflowUiNoTestDags.png" width="605" />
        </div>

        <p class="p">To be able to view default Airflow DAGs for SPS-CNF in Airflow UI, you need to provide
            certain variables in Airflow.</p>

        <div class="p"><strong class="ph b">To enable DAGs for SPS-CNF in Airflow</strong><ol class="ol" id="enabling_dag_execution__ol_bf4_xdr_jpb">
                <li class="li">Access Airflow UI through a web browser using the Maestro IP or
                        <code class="ph codeph">http://&lt;IP.OF.MAESTRO&gt;/admin</code>, or contact the NCC DevOps
                    team.</li>

                <li class="li">Navigate to <span class="ph menucascade"><span class="ph uicontrol">Admin</span><abbr title="and then"> → </abbr><span class="ph uicontrol">Variables</span></span>.<p class="p"><span class="ph uicontrol">Variables</span> view is displayed, for
                        example:</p>
<div class="fig fignone" id="enabling_dag_execution__fig_oq1_f25_3pb"><span class="figcap"><span class="fig--title-label">Figure: </span>Airflow variables view</span>
                        
                        <img class="image break" id="enabling_dag_execution__image_azs_h25_3pb" src="../images/cnf_devops_AirflowUiVariables.png" width="605" />
                    </div>
</li>

                <li class="li">Provide the following variables required for viewing the default Airflow DAGs in
                    Airflow UI.<table cellpadding="4" cellspacing="0" summary="" id="enabling_dag_execution__table_t23_jpv_3pb" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Mandatory variables to view Test Suite DAGs for SPS-CNF</span></caption><colgroup><col style="width:41.66666666666667%" /><col style="width:58.333333333333336%" /></colgroup><thead class="thead" style="text-align:left;">
                                <tr class="row">
                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d10672e93">Variable</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d10672e96">Description</th>

                                </tr>

                            </thead>
<tbody class="tbody">
                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d10672e93 "><code class="ph codeph">(ig/me/sm)-cnf-namespace</code></td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d10672e96 ">Kubernetes namespace used for the NCC setup.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d10672e93 "><code class="ph codeph">(ig/me/sm)-helm-chart-dir</code></td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d10672e96 ">Directory of Helm charts located in Maestro, containing
                                        the configuration YAML file(s).</td>

                                </tr>

                            </tbody>
</table>
<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Once the variables are configured, DAGs are generated for the
                        default test suites provided by the application team. For custom DAGs, the
                        user can use Package Manager.</div>
</li>

            </ol>
</div>

        <p class="p"><strong class="ph b">Example values for SPS-CNF ME and SM tests:</strong></p>

        <ul class="ul" id="enabling_dag_execution__ul_x3p_smb_jpb">
            <li class="li"><code class="ph codeph">me-cnf-namespace: sps-btel-me</code></li>

            <li class="li"><code class="ph codeph">sm-cnf-namespace: sps-btel-sm</code></li>

            <li class="li"><code class="ph codeph">me-helm-chart-dir: /opt/sps/configs</code></li>

            <li class="li"><code class="ph codeph">sm-helm-chart-dir: /opt/sps/configs</code></li>

            <li class="li"><code class="ph codeph">me-cnf-yaml: overrides-me.yaml</code></li>

            <li class="li"><code class="ph codeph">sm-cnf-yaml: overrides-sm.yaml</code></li>

            <li class="li"><code class="ph codeph">cnf-releasename: me</code></li>

        </ul>

        <p class="p">For templates for the <code class="ph codeph">overrides-me.yaml</code> and
                <code class="ph codeph">overrides-sm.yaml</code> files, see <a class="xref" href="templates_for_me_sm_cnf_yaml_files.html">Templates for (me/sm)-cnf-yaml files</a>.</p>

        <p class="p">There are also optional common Airflow variables for configuring different NCC setups
            depending on user requirements. For more information, see <a class="xref" href="optional_parameters_for_sps_cnf.html">Common Airflow variables</a>.</p>

    </div>
<div class="footer"><hr /><p>DevOps Guide • P556766-DN1000055058-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>