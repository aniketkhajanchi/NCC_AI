<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="ECOMMERCE source context" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="ruleattributes_ecommerce_source_context" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>ECOMMERCE source context</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="ruleattributes_ecommerce_source_context">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">ECOMMERCE source context</h1>
<div class="body conbody">
<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>ECOMMERCE source context</span></caption><colgroup><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d115996e42">Attribute name</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d115996e45">Trigger</th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d115996e48">Description</th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" rowspan="7" style="vertical-align:top;" headers="d115996e42 ">Merchant-Id</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">APPLICABILITY</td>

                        <td class="entry cellrowborder" rowspan="7" style="vertical-align:top;" headers="d115996e48 ">This attribute is an identifier of the merchant used to
                            purchase the service. It is just an alphanumerical identifier.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">TARIFF</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">BUNDLE</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">COUNTER</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">CALL_RULE_VARIABLES</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RESOURCE_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">Transaction-Id</td>

                        <td class="entry cellrowborder" style="vertical-align:bottom;" headers="d115996e45 ">RATING_POST_PROCESSING<p class="p">RESOURCE_POST_PROCESSING</p>
<p class="p">ECOMMERCE_CALL_ESTABLISHMENT</p>
</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">
                            <p class="p">This attribute is a unique identifier of the e-commerce transaction.
                                It is an alphanumerical identifier.</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">ratedProductUsage.taxIncludedRatingAmount.value</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">
                            <p class="p">RATING_POST_PROCESSING</p>

                            <p class="p">RESOURCE_POST_PROCESSING</p>

                            <p class="p">TARIFF</p>

                            <p class="p">CALL_RULE_VARIABLES</p>

                            <p class="p">ECOMMERCE_CALL_ESTABLISHMENT</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">
                            <p class="p">This attribute identifies the amount (VAT included) to be charged for
                                the e-commerce usage. It is a string.</p>

                            <div class="note" id="ruleattributes_ecommerce_source_context__note_wcl_v5l_1tb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The input float value is converted to a
                                string which is null in the following cases:<ul class="ul" id="ruleattributes_ecommerce_source_context__ul_vpr_4wl_1tb">
                                    <li class="li">It is missing.</li>

                                    <li class="li">Its value is 0.</li>

                                    <li class="li">It has a negative value.</li>

                                </ul>
</div>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">ratedProductUsage.taxIncludedRatingAmount.unit</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">
                            <p class="p">RATING_POST_PROCESSING</p>

                            <p class="p">RESOURCE_POST_PROCESSING</p>

                            <p class="p">TARIFF</p>

                            <p class="p">CALL_RULE_VARIABLES</p>

                            <p class="p">ECOMMERCE_CALL_ESTABLISHMENT</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">
                            <p class="p">This attribute identifies the currency in which the amount is
                                expressed. It is a string</p>

                            <div class="note" id="ruleattributes_ecommerce_source_context__note_bzm_cvl_1tb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Its value is a null string in case it is
                                missing or entered as an empty string.</div>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">ratedProductUsage.taxRate</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">
                            <p class="p">RATING_POST_PROCESSING</p>

                            <p class="p">RESOURCE_POST_PROCESSING</p>

                            <p class="p">TARIFF</p>

                            <p class="p">CALL_RULE_VARIABLES</p>

                            <p class="p">ECOMMERCE_CALL_ESTABLISHMENT</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">This attribute identifies the applied tax percentage. It is a
                                string<div class="note" id="ruleattributes_ecommerce_source_context__note_ghm_fvl_1tb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The input float value is converted
                                to a string which is null in case it is missing or
                            negative.</div>
</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">Read-Historical-Custom-Data</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">The function returns the value stored in a specific CDR path of a
                            successfully charged eCommerce transaction.<p class="p">Example:</p>
<div class="p">
                                <pre class="pre codeblock" id="ruleattributes_ecommerce_source_context__codeblock_gpq_5h5_qwb"><code>ECOM-HistoricalServiceType = ECOMMERCE.Read-Historical-Custom-Data ("/origin")</code></pre>
                            </div>
</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" rowspan="8" style="vertical-align:top;" headers="d115996e42 ">Read-Usage-Characteristic</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">
                            <p class="p">APPLICABILITY</p>

                        </td>

                        <td class="entry cellrowborder" rowspan="8" style="vertical-align:top;" headers="d115996e48 ">This action scans the list of input usage
                            characteristics, and it returns the string value for the specified
                            characteristic, if found in the list. Else, it returns a null string as
                            value. <p class="p">For example:</p>
<p class="p"><em class="ph i">ECOM-ServiceType =
                                    ECOMMERCE.Read-Usage-Characteristic ("debitType")</em></p>
<p class="p">Each
                                    <em class="ph i">usageCharacteristic</em> in the dynamic list can appear only
                                once. </p>
<p class="p">Incorrectly formatted <em class="ph i">usageCharacteristic</em> is
                                skipped.</p>
</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">BUNDLE</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">COUNTER</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RESOURCE_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">TARIFF</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">CALL_RULE_VARIABLES</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">ECOMMERCE_CALL_ESTABLISHMENT</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">Refund.Result-Code</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">
                            <p class="p">This attribute returns the result code provided by eCommerce refund
                                logic.</p>

                            <p class="p">Following are the supported eCommerce refund result codes:</p>

                            <p class="p">15000 – TOTAL_REFUND  – This result code is returned when the whole
                                charged amount can be refunded</p>

                            <p class="p">15001  – PARTIAL_REFUND  – This result code is returned when only a
                                part of the charged amount can be refunded because some initially
                                involved resource is not more available</p>

                            <p class="p">25000  – UNSUCCESSFUL_REFUND  – This result code is returned when the
                                refund fails</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 "> </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 "> </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 "> </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">service.supportingResource.id</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">ECOMMERCE_CALL_ESTABLISHMENT</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">This attribute contains the E164 identity (MSISDN in international
                            format) for the device owning the eCommerce usage. it is a
                            string</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e42 ">service.supportingResource.referredType</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">ECOMMERCE_CALL_ESTABLISHMENT<p class="p">RATING_POST_PROCESSING</p>
</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e48 ">This attribute contains the E164 identity type. it is an enum set as
                            E164.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" rowspan="7" style="vertical-align:top;" headers="d115996e42 ">Traffic-Type</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">APPLICABILITY</td>

                        <td class="entry cellrowborder" rowspan="7" style="vertical-align:top;" headers="d115996e48 ">This attribute is used to identify and allow throttling
                            cases.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">TARIFF</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">BUNDLE</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">COUNTER</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">CALL_RULE_VARIABLES</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RESOURCE_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" rowspan="3" style="vertical-align:top;" headers="d115996e42 ">usageDate</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">ECOMMERCE_CALL_ESTABLISHMENT</td>

                        <td class="entry cellrowborder" rowspan="3" style="vertical-align:top;" headers="d115996e48 ">This attribute contains the Date/Time received in the
                            input parameter usageDate with format as
                                <var class="keyword varname">YYYY-MM-DDThh:mm:ssZ</var>.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RESOURCE_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" rowspan="4" style="vertical-align:top;" headers="d115996e42 ">usageType</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">ECOMMERCE_CALL_ESTABLISHMENT</td>

                        <td class="entry cellrowborder" rowspan="4" style="vertical-align:top;" headers="d115996e48 ">This attribute contains the string received in the input
                            parameter usageType.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">TARIFF</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RATING_POST_PROCESSING</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d115996e45 ">RESOURCE_POST_PROCESSING</td>

                    </tr>

                </tbody>
</table>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>