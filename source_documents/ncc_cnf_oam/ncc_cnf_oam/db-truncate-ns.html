<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="db-truncate-ns" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="db-truncate-ns" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>db-truncate-ns</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="db-truncate-ns">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">db-truncate-ns</h1>
<div class="body conbody">
        <div class="section" id="db-truncate-ns__section_wvp_twb_3qb"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">db-truncate-ns is used to truncate the namespace from the Aerospike database of the
                local system from which the tool is run. The truncated namespace does not replicate
                to remote systems with XDR, so the tool must be run on each other system if the data
                must be truncated there as well.</p>

            <div class="p">db-truncate-ns shows the available db namespaces. Valid namespaces are:<ul class="ul" id="db-truncate-ns__ul_jyk_nxb_3qb">
                    <li class="li"><code class="ph codeph">dsc</code></li>

                    <li class="li"><code class="ph codeph">dsclocal</code></li>

                    <li class="li"><code class="ph codeph">dscglobal</code></li>

                    <li class="li"><code class="ph codeph">spsundologs</code></li>

                    <li class="li"><code class="ph codeph">spspd&lt;N&gt;</code>, where <code class="ph codeph">&lt;N&gt;</code> is an
                        integer.</li>

                </ul>
</div>

            <p class="p">The logs are displayed on the standard output screen in this format.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__codeblock_ymx_rxb_3qb"><code>&lt;Date&gt; &lt;Level&gt; &lt;Log&gt;</code></pre>
            </div>

            <p class="p">The logs are also be sent to the pod logs of the respective container in this
                format.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__codeblock_kqh_vxb_3qb"><code>&lt;Date&gt; &lt;Pod&gt; &lt;db-truncate-ns&gt; &lt;Level&gt; &lt;Log&gt;</code></pre>
            </div>

        </div>

        <div class="section" id="db-truncate-ns__section_tqt_5wb_3qb"><h2 class="title sectiontitle">Syntax</h2>
            
            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__codeblock_adx_wxb_3qb"><code>db-truncate-ns [-h] [-n &lt;namespace&gt;] [-p &lt;order&gt;] [-s] [-v] [-y]</code></pre>
            </div>

            <div class="p">
                <table cellpadding="4" cellspacing="0" summary="" id="db-truncate-ns__table_gmq_wwb_3qb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d39865e109">Option</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d39865e112">Description</th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d39865e115">Option arguments</th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 ">no arguments</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Display this help information.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-h or ?</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Display this help information.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-n &lt;namespace&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Namespace to be truncated from the database of the local
                                    system.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 ">
                                    <div class="p">Acceptable values are:<ul class="ul" id="db-truncate-ns__ul_wtc_jyb_3qb">
                                            <li class="li"><code class="ph codeph">&lt;namespace&gt;</code>: any namespace
                                                present on the local system.</li>

                                            <li class="li"><code class="ph codeph">all</code>: all the available namespaces
                                                in the database of the local system are
                                                truncated.</li>

                                        </ul>
To get namespaces from the database of the local
                                        system, use the <code class="ph codeph">-s</code> option.</div>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-p &lt;order&gt;</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Partition to be truncated from the database of the local
                                    system.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 ">
                                    <div class="p">Acceptable values are:<ul class="ul" id="db-truncate-ns__ul_x1q_qyb_3qb">
                                            <li class="li"><code class="ph codeph">1</code>: primary partition</li>

                                            <li class="li"><code class="ph codeph">2</code>: secondary partition</li>

                                            <li class="li"><code class="ph codeph">3</code>: tertiary partition</li>

                                        </ul>
</div>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-s</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Show the available namespaces from the database of the local
                                    system.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-v</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Display this script version.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 "> </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e109 "><code class="ph codeph">-y</code></td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e112 ">Disable user intervention by assuming yes for any user
                                    prompt.</td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d39865e115 "> </td>

                            </tr>

                        </tbody>
</table>

            </div>

        </div>

        <div class="section" id="db-truncate-ns__section_ulz_5wb_3qb"><h2 class="title sectiontitle">Example</h2>
            
            <p class="p">This example shows output of the tool while using the <code class="ph codeph">-h</code>
                option.</p>

            <p class="p">db-truncate-ns -h</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_ybm_xwb_3qb"><code>-sh-4.2$ db-truncate-ns -h
It truncates current site's namespace based on it's name or partition order.
Note: Truncated namespace doesn't replicate to remote site via XDR.

Usage:
  db-truncate-ns [-h] [-n &lt;namespace&gt;] [-p &lt;order&gt;] [-s] [-v] [-y]

Options:
  no arguments   - Display this help information.
  -h or ?        - Display this help information.
  -n &lt;namespace&gt; - Namespace to be truncated from the database of the current
                   site. It's values can be 'all' or any namespace present on
                   the current site. With option 'all', all the available
                   namespaces in the database of the current site will be
                   truncated. To get namespaces from the database of the
                   current site, use -s option.
  -p &lt;order&gt;     - Order of partition to be truncated from the database of the
                   current site. The acceptable values for this option are '1'
                   (for PRIMARY PARTITION), '2' (for SECONDARY PARTITION) and
                   '3' (for TERTIARY PARTITION).
  -s             - Show the available namespaces from the database of the
                   current site.
  -v             - Display this script version.
  -y             - Disable user intervention by assuming yes for any user
                   prompt.


</code></pre>
            </div>

            <p class="p">This example shows output of the tool while using the <code class="ph codeph">-n
                    &lt;namespace&gt;</code> option. Here, <code class="ph codeph">&lt;namespace&gt;</code> is
                specified as <code class="ph codeph">dsc</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_zbm_xwb_3qb"><code>-sh-4.2$ db-truncate-ns -n dsc
Output on screen:

2021-07-07T05:50:55,885 INFO: Valid namespaces for current site 'me7' are : ( spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs )
2021-07-07T05:50:55,893 WARNING: Truncation of partition is an irreversible process. You are about to truncate namespace(s) 'dsc' of current site 'me7'. This cannot be undone.
2021-07-07T05:50:55,900 INFO: Below command(s) will be executed on current site 'me7' to truncate namespace(s) 'dsc' of current site 'me7'
2021-07-07T05:50:55,910 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=dsc"

WARNING: You are one step away from truncating namespace(s). There is no rollback of this process and this is the last warning. Do you really want to continue? [y,n,?,q] y
2021-07-07T05:50:58,277 INFO: You've chosen to continue with truncation of namespace(s).
2021-07-07T05:50:58,285 INFO: Truncating namespace 'dsc' of current site 'me7' on current site 'me7'
2021-07-07T05:50:58,294 INFO: Successfully truncated namespace 'dsc' of current site 'me7'.
2021-07-07T05:50:58,302 INFO: Truncation of namespace(s) 'dsc' of current site 'me7' is complete.</code></pre>
            </div>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_acm_xwb_3qb"><code>Output from pod logs:

2021-07-07 05:50:55.890+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Valid namespaces for current site 'me7' are : ( spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs )
2021-07-07 05:50:55.897+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; WARNING: Truncation of partition is an irreversible process. You are about to truncate namespace(s) 'dsc' of current site 'me7'. This cannot be undone.
2021-07-07 05:50:55.906+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Below command(s) will be executed on current site 'me7' to truncate namespace(s) 'dsc' of current site 'me7'
2021-07-07 05:50:55.915+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=dsc"
2021-07-07 05:50:58.282+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: You've chosen to continue with truncation of namespace(s).
2021-07-07 05:50:58.291+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Truncating namespace 'dsc' of current site 'me7' on current site 'me7'
2021-07-07 05:50:58.298+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Successfully truncated namespace 'dsc' of current site 'me7'.
2021-07-07 05:50:58.308+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Truncation of namespace(s) 'dsc' of current site 'me7' is complete.</code></pre>
            </div>

            <p class="p">This example shows output of the tool while using the <code class="ph codeph">-n
                    &lt;namespace&gt;</code> option. Here, <code class="ph codeph">&lt;namespace&gt;</code> is
                specified as <code class="ph codeph">all</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_bcm_xwb_3qb"><code>-sh-4.2$ db-truncate-ns -n all
Output on screen:

2021-07-07T06:07:30,423 INFO: Valid namespaces for current site 'me7' are : ( spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs )
2021-07-07T06:07:30,537 WARNING: Truncation of partition is an irreversible process. You are about to truncate namespace(s) 'spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs' of current site 'me7'. This cannot be undone.
2021-07-07T06:07:30,547 INFO: Below command(s) will be executed on current site 'me7' to truncate namespace(s) 'spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs' of current site 'me7'
2021-07-07T06:07:30,558 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spspd5"
2021-07-07T06:07:30,569 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spspd7"
2021-07-07T06:07:30,578 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spspd8"
2021-07-07T06:07:30,589 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=dsc"
2021-07-07T06:07:30,598 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=dsclocal"
2021-07-07T06:07:30,611 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=dscglobal"
2021-07-07T06:07:30,624 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spsundologs"

WARNING: You are one step away from truncating namespace(s). There is no rollback of this process and this is the last warning. Do you really want to continue? [y,n,?,q] y
2021-07-07T06:07:33,423 INFO: You've chosen to continue with truncation of namespace(s).
2021-07-07T06:07:33,437 INFO: Truncating namespace 'spspd5' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,448 INFO: Successfully truncated namespace 'spspd5' of current site 'me7'.
2021-07-07T06:07:33,462 INFO: Truncating namespace 'spspd7' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,471 INFO: Successfully truncated namespace 'spspd7' of current site 'me7'.
2021-07-07T06:07:33,484 INFO: Truncating namespace 'spspd8' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,495 INFO: Successfully truncated namespace 'spspd8' of current site 'me7'.
2021-07-07T06:07:33,505 INFO: Truncating namespace 'dsc' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,513 INFO: Successfully truncated namespace 'dsc' of current site 'me7'.
2021-07-07T06:07:33,530 INFO: Truncating namespace 'dsclocal' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,539 INFO: Successfully truncated namespace 'dsclocal' of current site 'me7'.
2021-07-07T06:07:33,548 INFO: Truncating namespace 'dscglobal' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,557 INFO: Successfully truncated namespace 'dscglobal' of current site 'me7'.
2021-07-07T06:07:33,567 INFO: Truncating namespace 'spsundologs' of current site 'me7' on current site 'me7'
2021-07-07T06:07:33,576 INFO: Successfully truncated namespace 'spsundologs' of current site 'me7'.
2021-07-07T06:07:33,584 INFO: Truncation of namespace(s) 'spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs' of current site 'me7' is complete.</code></pre>
            </div>

            <p class="p">This example shows output of the tool while using the <code class="ph codeph">-p
                    &lt;order&gt;</code> option. Here, <code class="ph codeph">&lt;order&gt;</code> is specified as
                    <code class="ph codeph">3</code>.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_ccm_xwb_3qb"><code>-sh-4.2$ db-truncate-ns -p 3
Output on screen:

2021-07-07T05:50:13,143 INFO: Valid namespaces for current site 'me7' are : ( spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs )
2021-07-07T05:50:13,230 INFO: Finding namespace for partition '3' of current site 'me7'.
2021-07-07T05:50:13,238 INFO: Partition 3 is TERTIARY PARTITION of current site 'me7'. So TERTIARY PARTITION will be truncated.
2021-07-07T05:50:13,251 INFO: Namespace of TERTIARY PARTITION of current site 'me7' is 'spspd5'.
2021-07-07T05:50:13,258 WARNING: Truncation of partition is an irreversible process. You are about to truncate namespace(s) 'spspd5' of current site 'me7'. This cannot be undone.
2021-07-07T05:50:13,266 INFO: Below command(s) will be executed on current site 'me7' to truncate namespace(s) 'spspd5' of current site 'me7'
2021-07-07T05:50:13,277 COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spspd5"

WARNING: You are one step away from truncating namespace(s). There is no rollback of this process and this is the last warning. Do you really want to continue? [y,n,?,q] y
2021-07-07T05:50:15,617 INFO: You've chosen to continue with truncation of namespace(s).
2021-07-07T05:50:15,626 INFO: Truncating namespace 'spspd5' of current site 'me7' on current site 'me7'
2021-07-07T05:50:15,634 INFO: Successfully truncated namespace 'spspd5' of current site 'me7'.
2021-07-07T05:50:15,643 INFO: Truncation of namespace(s) 'spspd5' of current site 'me7' is complete.</code></pre>
            </div>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_dcm_xwb_3qb"><code>Output from pod logs:

2021-07-07 05:50:13.148+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Valid namespaces for current site 'me7' are : ( spspd5 spspd7 spspd8 dsc dsclocal dscglobal spsundologs )
2021-07-07 05:50:13.236+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Finding namespace for partition '3' of current site 'me7'.
2021-07-07 05:50:13.246+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Partition 3 is TERTIARY PARTITION of current site 'me7'. So TERTIARY PARTITION will be truncated.
2021-07-07 05:50:13.255+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Namespace of TERTIARY PARTITION of current site 'me7' is 'spspd5'.
2021-07-07 05:50:13.263+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; WARNING: Truncation of partition is an irreversible process. You are about to truncate namespace(s) 'spspd5' of current site 'me7'. This cannot be undone.
2021-07-07 05:50:13.272+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Below command(s) will be executed on current site 'me7' to truncate namespace(s) 'spspd5' of current site 'me7'
2021-07-07 05:50:13.281+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; COMMAND: /opt/tpa/aerospike/bin/asinfo -v "truncate-namespace:namespace=spspd5"
2021-07-07 05:50:15.623+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: You've chosen to continue with truncation of namespace(s).
2021-07-07 05:50:15.631+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Truncating namespace 'spspd5' of current site 'me7' on current site 'me7'
2021-07-07 05:50:15.639+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Successfully truncated namespace 'spspd5' of current site 'me7'.
2021-07-07 05:50:15.648+0000 growthme-admincli-56dc85fb54-dv5vm &lt;db-truncate-ns&gt; INFO: Truncation of namespace(s) 'spspd5' of current site 'me7' is complete.</code></pre>
            </div>

            <p class="p">This example shows output of the tool while using the <code class="ph codeph">-s</code>
                option.</p>

            <div class="p">
                <pre class="pre codeblock" id="db-truncate-ns__pre_ecm_xwb_3qb"><code>-sh-4.2$ db-truncate-ns -s
Output on screen: 

|------------------------|----------------------|
| Available DB Namespaces|  Order               |
|------------------------|----------------------|
|    spspd7              |    PRIMARY (1)       |
|    spspd8              |    SECONDARY (2)     |
|    spspd5              |    TERTIARY (3)      |
|    dsc                 |                      |
|    dsclocal            |                      |
|    dscglobal           |                      |
|    spsundologs         |                      |
|------------------------|----------------------|

</code></pre>
            </div>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>