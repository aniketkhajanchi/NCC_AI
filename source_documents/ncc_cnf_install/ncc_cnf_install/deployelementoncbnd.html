<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Using the deployNS.sh tool" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="deployelementoncbnd" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Using the deployNS.sh tool</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="deployelementoncbnd">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Using the deployNS.sh tool</h1>
<div class="body conbody">
        <div class="section" id="deployelementoncbnd__section_ils_kqz_s4b"><h2 class="title sectiontitle">Overview</h2>
            
            <p class="p">The <code class="ph codeph">deployNS.sh</code> tool deploys an element on Nokia Cloud Operations
                Manager (NCOM) by using APIs. This tool performs a task that is also completed by
                using the NCOM GUI. Possible elements include SM, ME, ISTIO, Telemetry, or an
                IG.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Prerequisites</h2>
            
            <div class="p">The prerequisites for this tool include these items:<ul class="ul" id="deployelementoncbnd__ul_xsd_rqz_s4b">
                    <li class="li">jq parser, curl, and python3 must be installed.</li>

                    <li class="li">CaaS (Cluster) and Registries (Helm repositories) must be created in NCOM
                        and linked bidirectionally with each other.</li>

                    <li class="li">There must be a connection between NCOM and the system on which this command
                        is run. APIs may fail or time out if there is no connection.</li>

                </ul>

            </div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Description</h2>
            
            <div class="p">The <code class="ph codeph">deployNS.sh</code> tool performs these primary operations:<ul class="ul" id="deployelementoncbnd__ul_mlp_brz_s4b">
                    <li class="li"><code class="ph codeph">createNSPackage</code> – Creates an NS Package in NCOM.</li>

                    <li class="li"><code class="ph codeph">uploadNSPackage</code> – Uploads an NS Package in NCOM using the
                        NSD (zip) file.</li>

                    <li class="li"><code class="ph codeph">activateNSPackage</code> – Activates an NS Package in NCOM.</li>

                    <li class="li"><code class="ph codeph">createNSInstance</code> – Creates an NS instance from the NS
                        Package.</li>

                    <li class="li"><code class="ph codeph">deployNSInstance</code> – Deploys the NS instance charts in the
                        namespace of the cluster.</li>

                </ul>

            </div>

            <div class="p">The <code class="ph codeph">deployNS.sh</code> tool performs these secondary operations:<ul class="ul" id="deployelementoncbnd__ul_vlr_fzz_s4b">
                    <li class="li"><code class="ph codeph">deactivateNSPackage</code> - NS Package can be deactivated by
                        using the <code class="ph codeph">--only deactivateNSPackage</code> option.</li>

                    
                    <li class="li">The <code class="ph codeph">-u</code> option allows for multiple updates. <ul class="ul">
                            <li class="li">The YAML values of a deployed or failed instance can be updated.
                                Scale in/out can be done by updating replica count in YAML file of
                                the intended chart.</li>

                            <li class="li">This option also updates the instance name if the name provided as
                                input is different than the name originally provided in
                                NS_INSTANCE_NAME. For this, provide the NS_INSTANCE_ID whose name is
                                to updated.</li>

                            <li class="li">Upgrade/Downgrade can be performed, keeping the same NS_PACKAGE_NAME
                                for the NS_INSTANCE_ID whose upgrade/downgrade is required. Change
                                the NS_PACKAGE_VERSION to the version you want the current instance
                                to be upgraded/downgraded to and then activate the Network Service
                                Package. Here, the NS package uses the Network Service
                                Descriptor(NSD) in which you've changed the versions of the chart
                                whose upgrade/downgrade is needed.</li>

                        </ul>

                    </li>

                    
                </ul>

            </div>

        </div>

        <div class="section" id="deployelementoncbnd__tool_location"><h2 class="title sectiontitle">Tool location</h2>
            
            <p class="p">This tool may be run from any machine in the deployment, including development VMs,
                orchestrators, and any other Linux-based system. The <code class="ph codeph">deployNS.sh</code>
                tool and <span class="ph filepath">deployNS.conf</span> configuration file are located in the
                    <span class="ph filepath">/output/&lt;elementName&gt;/examples/NCOM</span> directory of the
                input-generator. All of the required fields in the
                    <span class="ph filepath">deployNS.conf</span> file must be filled in before using it.</p>

            <div class="p">There are two additional tools that are located in the same directory as the
                    <code class="ph codeph">deployNS.sh</code> tool. These are single-use tools. <ol class="ol">
                    <li class="li"><span class="ph filepath">generate-network-service-descriptor.sh</span> generates a
                            <span class="ph filepath">NetworkServiceDescriptor(rendered).zip</span> file named
                        NSD which is used for uploading the NS package. The
                            <span class="ph filepath">NetworkServiceDescriptor(rendered).zip</span> file can be
                        downloaded by using the <code class="ph codeph">-g package</code> option. Use the MANIFEST
                        file that is located in the directory to edit chart versions, timeouts,
                        dependency, etc and run the tool again to generate an updated NSD package.
                        This is an example of generating the NSD package. <pre class="pre codeblock"><code>OUTPUT for Command: ./generate-network-service-descriptor.sh
                        
2022-01-21T09:49:22,143 INFO: Generating the NSD config file.
2022-01-21T09:49:22,238 INFO: 'NetworkServiceDescriptor(rendered).zip' is generated.
2022-01-21T09:49:22,241 INFO: NSD can be found at /root/Arun/CHF_22_0_I105/input-generator/output1/btel5/examples/NCOM directory.
                </code></pre>
                        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                            <p class="p">You can generate an NSD zip by using a Docker command that does not
                                have prerequisites.</p>

                            <p class="p">Set <code class="ph codeph">CHART_VERSION</code> and <code class="ph codeph">DOCKER_REPO</code>
                                as shown in step 2 of <a class="xref" href="ncc_helm_chart_input_preparation.html">Generating Helm charts input</a> and then run the
                                Docker command. The command can be run from these two locations:</p>

                            <ul class="ul">
                                <li class="li">From any directory such as
                                        <span class="ph filepath">input-generator/output/&lt;SystemType&gt;</span>
                                    (example: sm, me, ig, btel, istio): <pre class="pre codeblock"><code>docker run -u="${UID}:$(id -g)" -v $(realpath .):/input-generator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/examples/NCOM/generate-network-service-descriptor.sh -i examples/NCOM -o examples/NCOM</code></pre>
                                    <div class="p">The command creates an NSD zip in the output directory which
                                        you can use/move as needed. This example shows the expected
                                        output.
                                        <pre class="pre codeblock"><code>[root@nc2051node02 sm1]# docker run -u="${UID}:$(id -g)" -v $(realpath .):/inputgenerator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/examples/NCOM/generate-network-service-descriptor.sh -i examples/NCOM -o examples/NCOM
2022-08-25T07:52:30,884 INFO: Generating the NSD config file.
2022-08-25T07:52:30,971 INFO: 'NetworkServiceDescriptor(rendered).zip' is generated.
2022-08-25T07:52:30,974 INFO: NSD can be found at /input-generator/ig1/examples/NCOM directory.</code></pre>
                                    </div>

                                </li>

                                <li class="li">From the NCOM directory
                                        <span class="ph filepath">input-generator/output/&lt;SystemType&gt;/examples/NCOM</span>: <pre class="pre codeblock"><code>docker run -u="${UID}:$(id -g)" -v $(realpath .):/input-generator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/generate-network-service-descriptor.sh</code></pre>
                                    <div class="p">The command creates an NSD zip in the current directory which
                                        you can use/move as needed. This example shows the expected
                                        output.
                                        <pre class="pre codeblock"><code>[root@nc2051node02 sm1]# docker run -u="${UID}:$(id -g)" -v $(realpath .):/inputgenerator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/generate-network-service-descriptor.sh
2022-08-25T07:52:30,884 INFO: Generating the NSD config file.
2022-08-25T07:52:30,971 INFO: 'NetworkServiceDescriptor(rendered).zip' is generated.
2022-08-25T07:52:30,974 INFO: NSD can be found at /input-generator/NCOM directory.</code></pre></div>

                                </li>

                            </ul>

                        </div>

                    </li>

                    <li class="li"><span class="ph filepath">yaml-To-Json.py</span> is a python3 tool which generates a
                        single JSON file named <span class="ph filepath">chartsOverrideInputs.json</span> by
                        converting all override YAML values of charts (located in the
                            <span class="ph filepath">/output/&lt;elementName&gt;/charts</span> directory) to JSON
                        and combining them. The <span class="ph filepath">chartsOverrideInputs.json</span> file
                        can be downloaded by using the <code class="ph codeph">-g instance</code> option. You can
                        update the YAML values of the intended chart and run the tool again to get
                        updated JSON file. This is an example of generating the JSON file. 
                        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> You must ensure that the PyYaml package is installed, before you use
                            this tool.</div>

                        <pre class="pre codeblock"><code>OUTPUT for Command: ./yaml-To-Json.py
                        
2022-01-21T09:52:36,157 INFO: Creating single json file for yaml file(s).
2022-01-21T09:52:36,604 INFO: Single json file '/root/Arun/CHF_22_0_I105/input-generator/output1/btel5/examples/NCOM/chartsOverrideInputs.json' is created. Use it to import inputs to NCOM
                  </code></pre>
                    </li>

                </ol>

                
                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <p class="p">You can generate a JSON file by using a Docker command that does not have
                        prerequisites.</p>

                    <div class="p">Set <code class="ph codeph">CHART_VERSION</code> and <code class="ph codeph">DOCKER_REPO</code> as shown
                        in step 2 of <a class="xref" href="ncc_helm_chart_input_preparation.html">Generating Helm charts input</a> and then
                        run this command from the <span class="ph filepath">input-generator/output/&lt;System
                            Type&gt;</span> (example: sm, me, ig, btel, istio) directory:
                        <pre class="pre codeblock"><code>docker run -u="${UID}:$(id -g)" -v $(realpath .):/input-generator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/examples/NCOM/yaml-To-Json.py -i charts/ -o examples/NCOM</code></pre>
                    </div>

                    <div class="p">The command creates a JSON file in the current directory which you can
                        use/move as needed. This example shows the expected output.
                        <pre class="pre codeblock"><code>[root@nc2051node02 sm1]# docker run -u="${UID}:$(id -g)" -v $(realpath .):/input-generator:z --rm ${DOCKER_REPO}/chf/input-generator:${CHART_VERSION} /input-generator/examples/NCOM/yaml-To-Json.py -i charts/ -o examples/NCOM
2022-07-20T04:28:10,818 INFO: Creating single json file for yaml file(s).
2022-07-20T04:28:11,154 INFO: Single json file '/input-generator/chartsOverrideInputs.json' is created. Use it to import inputs to NCOM.
                    </code></pre></div>

                </div>

            </div>

        </div>

        <div class="section" id="deployelementoncbnd__section_l5b_qzz_s4b"><h2 class="title sectiontitle">Syntax</h2>
            
            <div class="p">Here are some examples of the syntax. The options that are surrounded in brackets are
                not mandatory. <pre class="pre codeblock"><code>deployNS.sh -h
deployNS.sh -f &lt;file&gt; [-s] [-o &lt;directory&gt;] [-d]
deployNS.sh -f &lt;file&gt; --from &lt;routine1&gt; --to &lt;routine2&gt; [-s] [-d] [-o &lt;directory&gt;]
deployNS.sh -f &lt;file&gt; --only &lt;routine&gt; [-s] [-d] [-o &lt;directory&gt;]
deployNS.sh -f &lt;file&gt; -t [-s] [-d] [-o &lt;directory&gt;]
deployNS.sh -f &lt;file&gt; -j &lt;job-id&gt; [-s] [-d] [-o &lt;directory&gt;]
deployNS.sh -f &lt;file&gt; -u  [-s] [-d] [-o &lt;directory&gt;]</code></pre>
            </div>

            <p class="p">This table describes the options in more detail.</p>

            <table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>deployNS.sh options</span></caption><colgroup><col style="width:40%" /><col style="width:60%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d11924e313">Option</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d11924e316">Description</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-d,--debug</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">{Optional} This option enables debug mode.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-f, --file</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Mandatory) The name of the configuration file specified with a
                                relative or absolute path (Example:
                                    <span class="ph filepath">deployNS.conf</span>).</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">--force</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">This option is used exclusively with <code class="ph codeph">-t</code> or
                                    <code class="ph codeph">-R instance</code> to force the operation.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">--from &lt;routine&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) Specifies the routine from where to start the
                                operation. The default value is
                                <code class="ph codeph">createNSPackage</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-g, --get &lt;package|instance&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">{Optional} This option downloads an NSD package or chart values
                                in JSON format. Use <code class="ph codeph">package</code> to download an NSD
                                package or <code class="ph codeph">instance</code> to download the chart
                                values.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-h, --help</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">{Optional} Displays help information for the command.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-j, --jobStatus &lt;jobId&gt; [--trail]</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) Displays the status of the specified job ID. This
                                option must be used with <code class="ph codeph">-f</code>. The possible return
                                values are: <code class="ph codeph">RUNNING</code>, <code class="ph codeph">FAILED</code>, or
                                    <code class="ph codeph">FINISHED</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-l, --list</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">{Optional) This option displays a consolidated list of details
                                for NSD, CaaS, repository, and NS Instance.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-o, --outputDirectory &lt;directory&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option specifies the output/working directory
                                where the files that are created by the tool reside. The directory
                                must exist prior to running the tool. The default is the current
                                working directory.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">--only &lt;routine&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option is used to run a single routine.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-r, --rollback</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option rolls the current NSD back to a previously
                                used NSD for a deployed NS instance.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-R, --remove &lt;package|instance&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option deletes an NS item based on the type that
                                is passed to it. The supported values are <code class="ph codeph">package</code>
                                and <code class="ph codeph">instance</code>. Prior to deletion, packages must be
                                deactivated and instances must be terminated. Use the
                                    <code class="ph codeph">--force</code> option along with <code class="ph codeph">-R
                                    instance</code> to force the deletion of the instance.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-s, --saveResponse</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option saves the API responses to a file named
                                    <code class="ph codeph">APIandResponse.txt</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-t, --terminate</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option terminates an NS instance gracefully. Use
                                the <code class="ph codeph">--force</code> option along with <code class="ph codeph">-t</code>
                                to force the instance termination.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">--to &lt;routine&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option specifies the routine where the operation
                                stops. The default value is
                                <code class="ph codeph">deployNSInstance</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">--trail</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option is used along with <code class="ph codeph">-j</code> to
                                recursively print the job status until the job is
                                    <code class="ph codeph">FINISHED</code> or <code class="ph codeph">FAILED</code>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e313 "><code class="ph codeph">-u, --update</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e316 ">(Optional) This option updates the NS instance YAML values and
                                name. It also upgrades from one NSD to another based on the NSD
                                package version.</td>

                        </tr>

                    </tbody>
</table>

            <div class="p">The routines that are applicable for <code class="ph codeph">--from</code>, <code class="ph codeph">--to</code>,
                and <code class="ph codeph">--only</code> options are listed in their order of operations:<ol class="ol" id="deployelementoncbnd__ol_nfb_bb1_t4b">
                    <li class="li">createNSPackage</li>

                    <li class="li">uploadNSPackage</li>

                    <li class="li">activateNSPackage</li>

                    <li class="li">createNSInstance</li>

                    <li class="li">deployNSInstance</li>

                </ol>

            </div>

        </div>

        <div class="section"><h2 class="title sectiontitle">Mandatory configuration fields</h2>
            
            <p class="p">The <code class="ph codeph">deployNS.conf</code> file contains multiple fields that are required.
                The fields that are common and mandatory to all the options are
                    <code class="ph codeph">NCOM_FQDN</code>, <code class="ph codeph">NCOM_REALM</code>,
                    <code class="ph codeph">REALM_USER</code>, and <code class="ph codeph">REALM_USER_PASSWORD</code>. Any
                non-Applicable fields can be commented out.</p>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The REALM_USER_PASSWORD is the base64 encrypted value of the password. For
                example: if your password is <code class="ph codeph">arun</code>, then enter
                    <code class="ph codeph">YXJ1bgo=</code> for REALM_USER_PASSWORD value. To obtain the encrypted
                password on a Linux terminal, run this command:
                <pre class="pre codeblock"><code>echo &lt;password&gt;|base64</code></pre>.</div>

            <table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><colgroup><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d11924e640">Option</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d11924e643">Mandatory fields</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 ">
                                <p class="p"><code class="ph codeph">-g package</code></p>

                                <p class="p"><code class="ph codeph">-R package</code></p>

                                <p class="p"><code class="ph codeph">-f &lt;--only activateNSPackage&gt;</code></p>

                                <p class="p"><code class="ph codeph">-f &lt;--only deactivateNSPackage&gt;</code></p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_ID</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 ">
                                <p class="p"><code class="ph codeph">-g instance</code></p>

                                <p class="p"><code class="ph codeph">-t</code></p>

                                <p class="p"><code class="ph codeph">-R instance</code></p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_INSTANCE_ID</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-u</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_ID, NS_PACKAGE_VERSION, NS_INSTANCE_ID,
                                    NS_INSTANCE_NAME, VALUES_JSON_FILE</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-r</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_ID, NS_INSTANCE_ID</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-f &lt;--from createNSPackage&gt; &lt;--to
                                    deployNSInstance&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">CAAS_ID, NS_PACKAGE_NAME, NS_PACKAGE_VERSION,
                                    NS_PACKAGE_LOCATION, NS_INSTANCE_NAME, VALUES_JSON_FILE,
                                    NAMESPACE</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-f &lt;--only createNSPackage&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_NAME,NS_PACKAGE_VERSION</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-f &lt;--only uploadNSPackage&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_ID, NS_PACKAGE_LOCATION</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-f &lt;--only createNSInstance&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">NS_PACKAGE_ID, NS_INSTANCE_NAME,
                                    VALUES_JSON_FILE</code></td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e640 "><code class="ph codeph">-f &lt;--only deployNSInstance&gt;</code></td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d11924e643 "><code class="ph codeph">CAAS_ID, NS_INSTANCE_ID, NAMESPACE</code></td>

                        </tr>

                    </tbody>
</table>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <code class="ph codeph">-f &lt;--from&gt; &lt;--to&gt;</code>: The operations/routines that are
                performed for this option use the same inputs that are used by their respective
                    <code class="ph codeph">-f [--only &lt;routine&gt;]</code> option. For example, <code class="ph codeph">-f --from
                    createNSPackage --to deployNSInstance</code> uses the options <code class="ph codeph">-f
                    [--only createNSPackage], -f [--only uploadNSPackage], -f [--only
                    activateNSPackage], -f [--only createNSInstance], and -f [–only
                    deployNSInstance]</code> because these five routines are performed for the
                option entered.</div>

        </div>

        <div class="section" id="deployelementoncbnd__section_smz_3lf_t4b"><h2 class="title sectiontitle">Examples and expected output</h2>
            
            <div class="p">Run the tool with default values. <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf
                    
2022-01-21T04:59:41,524 INFO: Creating NS package
2022-01-21T04:59:42,778 INFO: Creating NS package is success.
2022-01-21T04:59:42,782 INFO: Uploading NS package
2022-01-21T04:59:45,555 INFO: Uploading NS package is success.
2022-01-21T04:59:45,561 INFO: Activating the NS package.
2022-01-21T04:59:48,527 INFO: Activating the NS package is success.
2022-01-21T04:59:48,539 INFO: Creating NS instance.
2022-01-21T04:59:56,604 INFO: Creating NS instance is success.
2022-01-21T04:59:56,614 INFO: Deploying the NS instance. It may take time.
2022-01-21T05:05:35,906 INFO: Deploying the NS instance is success.</code></pre>
            </div>

            <div class="p">Download a package to a specific directory.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -g package -o folder_name

2022-01-21T06:50:04,701 INFO: Going to download NS 'package'.
2022-01-21T06:50:04,703 INFO: Downloading of NS Package starts now.
2022-01-21T06:50:05,759 INFO: Successfully downloaded NS Package folder_name/NetworkServiceDescriptor(downloaded).zip for id 'd517aa50-5446-4062-b20a-0ee443148085'.
</code></pre></div>

            <div class="p">Download an instance.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -g instance
                    
2022-01-17T09:33:37,992 INFO: Going to download NS 'instance'.
2022-01-17T09:33:37,993 INFO: Downloading of NS Instance starts now.
2022-01-17T09:33:38,809 INFO: Successfully downloaded NS Instance's charts values /root/Arun/CHF_22_0_I105/input-generator/output/btel5/examples/NCOM/chartsOverrideInputs(downloaded).json for id '5262c05b-08ac-42a0-84fe-1e6e20c3417d'.
</code></pre></div>

            <div class="p">Display the job status without using the <code class="ph codeph">--trail</code> option.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -j 10 -d 
                    
2022-01-21T04:50:05,579 DEBUG: Inside processConfFile routine.
2022-01-21T04:50:05,584 DEBUG: Processing deployNS.conf
2022-01-21T04:50:05,587 DEBUG: deployNS.conf has following content:
# **********************************************************
# Fill the values. All fields are mandatory.
# **********************************************************
# FQDN or IP of the NCOM example: ncom.dyn.nesc.xyz.net or 10.11.12.10
NCOM_FQDN=xxx.dyn.nesc.nokia.net
# Realm of NCOM example: NCCIn
NCOM_REALM=xxx
# Realm User with read and write access. Example: ncomadmin
REALM_USER=user
# Encoded Login Password of REALM_USER. Example: QXJ1bgo=
REALM_USER_PASSWORD=password
# CaaS Id in which NS instance will be made.
#CAAS_ID=
# Write none if you are creating new NS Package else give Id of the NS Package which will be used for operation
NS_PACKAGE_ID=d517aa50-5446-4062-b20a-0ee443148085
# Give any name if you are creating new package else give the NS Package name from NCOM. Example: MyNS.
#NS_PACKAGE_NAME=
# Version of NS_PACKAGE. Edit it if you want different version
NS_PACKAGE_VERSION=1.0.0
# Absolute path of NS_PACKAGE (NSD) zip file. Example: /root/input-generator/output/ig1/examples/NCOM/NetworkServiceDescriptor\(rendered\).zip
#NS_PACKAGE_LOCATION=
# Id of an NS instance if you don't want to create new one then write none
NS_INSTANCE_ID=4c66967b-5189-43c6-9dd1-7913653b948f
# NS instance name. It is an instance/object of NS_PACKAGE.
# Give any name if you are creating new else give the NS Instance name from NCOM. Example: MyNSInstance
#NS_INSTANCE_NAME=
# JSON file containing all yaml charts. Example: /root/input-generator/output/ig1/examples/NCOM/chartsOverrideInputs.json
#VALUES_JSON_FILE=
# Namespace of the instance. Example: sps-sm
#NAMESPACE=
# **********************************************************
2022-01-21T04:50:05,621 DEBUG: Running command 'deployNS.sh -f deployNS.conf -j 10580 -d'
2022-01-21T04:50:05,624 DEBUG: Inside doesToolsExist routine.
2022-01-21T04:50:05,627 DEBUG: Checking if jq and curl exist in system.
2022-01-21T04:50:05,630 DEBUG: Inside doesCommandExist routine.
2022-01-21T04:50:05,633 DEBUG: jq exists in the system.
2022-01-21T04:50:05,637 DEBUG: Inside doesCommandExist routine.
2022-01-21T04:50:05,639 DEBUG: curl exists in the system.
2022-01-21T04:50:05,647 DEBUG: Inside getJobStatus routine.
2022-01-21T04:50:05,650 DEBUG: Inside requestAPIResponse routine.
2022-01-21T04:50:05,653 DEBUG: Inside setHeaders routine.
2022-01-21T04:50:05,656 DEBUG: Inside setTokenBasedOnType routine.
2022-01-21T04:50:05,658 DEBUG: Inside getTokenAPIResponse routine.
2022-01-21T04:50:06,294 INFO: Job status for job 10 is: RUNNING </code></pre>
            </div>

            <div class="p">Display the job status using the <code class="ph codeph">--trail</code> option.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -j 10580 --trail
                    
2022-01-17T09:23:14,397 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:14,714 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:15,033 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:15,327 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:15,617 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:15,910 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:16,217 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:16,529 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:16,832 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:17,175 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:17,505 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:17,847 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:18,169 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:18,471 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:18,789 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:19,112 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:19,447 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:19,754 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:20,074 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:20,401 INFO: Current status of job 10580=RUNNING
2022-01-17T09:23:20,714 INFO: Current status of job 10580=RUNNING            
</code></pre></div>

            <div class="p">List the details of the NSD.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -l
                    
Network Service Descriptor Id(nsdId)|NSD Name(nsdName)                           |nsdStatus|nsdVersion|nsdRealm
------------------------------------|-----------------                           |---------|----------|--------
1a466a42-8ea1-4ac7-ad47-cac08365c3ef|me_api                                      |active   |1.0.0     |ncom
____________________________________|______                                      |______   |_____     |____
d062d7fa-ba34-48c2-b5bc-b0795a0d7f76|SM_API                                      |active   |1.0.0     |ncom
____________________________________|______                                      |______   |_____     |____
1d785794-8402-4ae8-b0dd-61b73c7371d4|IG_130_SS7                                  |active   |0.0.0     |ncom
____________________________________|__________                                  |______   |_____     |____
9e5c7b96-418f-4001-b30f-b4a67553efd3|Btel_130                                    |active   |0.0.0     |ncom
____________________________________|________                                    |______   |_____     |____
d40e0117-6e13-42f7-aee9-2e32ebe8a99a|istio_22_0                                  |active   |0.0.0     |ncom
____________________________________|__________                                  |______   |_____     |____
d517aa50-5446-4062-b20a-0ee443148085|MyNS                                        |active   |0.0.0     |ncom
____________________________________|____                                        |______   |_____     |____
47754b28-f450-411e-b679-b376995320aa|TestHarnessWrapper                          |active   |1.0.0     |ncom
____________________________________|__________________                          |______   |_____     |____
bf445091-c801-4e4c-b895-08f177f3c0ce|TestHarnessWrapper                          |active   |1.0.1     |ncom
____________________________________|__________________                          |______   |_____     |____
34d22dab-9023-4f96-a2e2-51fc43195580|Generic_VNF_onboarding_CBAMv4               |active   |1.0.0     |ncom
____________________________________|_____________________________               |______   |_____     |____
68e2128b-4a54-4523-9fa5-5b574bdf4476|Generic_CNF_Onboarding_With_Profile_Operator|active   |1.0.0     |ncom
____________________________________|____________________________________________|______   |_____     |____
d48496f7-41fa-417b-929d-5cbd29a54a4e|application_template_basic                  |active   |1.1.0     |ncom
____________________________________|__________________________                  |______   |_____     |____
 
 
Network Service Instance Id(nsiId)  |NSI Name(nsiName)|nsiStatus |nsdId                               |lastAction|lAStatus|lAJobId|namespace   |CaaSId
----------------------------------  |-----------------|--------- |-----                               |----------|--------|-------|---------   |------
fa8dadfa-b578-4a22-a622-df8ffeeb88c1|IG_130_SS7       |TERMINATED|1d785794-8402-4ae8-b0dd-61b73c7371d4|TERMINATE |FINISHED|721    |            |
bcef3022-fa16-430e-a7b1-ddfa90c985db|istio_22_insta   |DEPLOYED  |d40e0117-6e13-42f7-aee9-2e32ebe8a99a|DEPLOY    |FINISHED|92     |istio-system|47a4f9c8-fc8d-4d97-80c5-3a460938aae2
5ba61aff-5a12-4f3d-aeff-23144fcffc4a|me_api           |TERMINATED|1a466a42-8ea1-4ac7-ad47-cac08365c3ef|TERMINATE |FINISHED|948    |            |
526a6e51-674f-4c76-b398-3c8601a69475|sm_api           |TERMINATED|d062d7fa-ba34-48c2-b5bc-b0795a0d7f76|TERMINATE |FINISHED|926    |            |
 
 
Container as a Service Id(CaaSId)   |CaaS Name |CaaS Repo-Id
---------------------------------   |--------- |------------
47a4f9c8-fc8d-4d97-80c5-3a460938aae2|SPSART1982|e39cbef0-f5d6-4d2b-b8df-42afe37dd9c4|d6e26dde-d60d-423e-86d8-f249742161f6|e78d8771-a393-4ea1-82cd-44c6ac35e2f4|bd6dc73e-3e1e-40a1-8fb3-795ddbc9667d
 
 
Repositories Id                     |Repositories Name   |Repositories URL                                         |CaaSId
---------------                     |-----------------   |----------------                                         |------
bd6dc73e-3e1e-40a1-8fb3-795ddbc9667d|sps-helm-candidates |https://repo3.cci.nokia.net/sps-helm-candidates/         |47a4f9c8-fc8d-4d97-80c5-3a460938aae2
d6e26dde-d60d-423e-86d8-f249742161f6|sps-helm-release    |https://repo.lab.pl.alcatel-lucent.com/sps-helm-releases/|47a4f9c8-fc8d-4d97-80c5-3a460938aae2
e39cbef0-f5d6-4d2b-b8df-42afe37dd9c4|drdo-helm-candidates|https://repo3.cci.nokia.net/drdo-helm-candidates/        |47a4f9c8-fc8d-4d97-80c5-3a460938aae2
e78d8771-a393-4ea1-82cd-44c6ac35e2f4|csf-helm-stable     |https://repo.lab.pl.alcatel-lucent.com/csf-helm-stable/  |47a4f9c8-fc8d-4d97-80c5-3a460938aae2
            </code></pre></div>

            <div class="p">Deactivate a package.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf --only deactivateNSPackage
            
2022-01-21T07:48:23,591 INFO: Deactivating the NS package.
2022-01-21T07:48:24,820 INFO: Deactivating the NS package is success.</code></pre></div>

            <div class="p">Terminate an instance. <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -t
                
2022-01-21T06:31:28,756 INFO: Going to start 'terminate' operation.
2022-01-21T06:31:38,970 INFO: Checking the status of terminate of NS instance job.
2022-01-21T06:37:26,778 INFO: terminate operation of NS instance is success.</code></pre></div>

            <div class="p">Perform a rollback. <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -r -s
                
2022-01-19T08:21:21,287 INFO: API and their responses will be saved in /root/CHF_22_0_I128/input-generator/output/ig1/examples/NCOM/APIandResponse.txt
2022-01-19T08:21:21,293 INFO: Going to start 'rollback' operation.
2022-01-19T08:21:38,722 INFO: Checking the status of rollback of NS instance job.
2022-01-19T08:21:39,622 INFO: rollback operation of NS instance is success.            
</code></pre></div>

            <div class="p">Delete a package. <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -R package
                
2022-01-21T08:29:04,239 INFO: Deleting of NS Package starts now.
2022-01-21T08:29:05,615 INFO: Deletion of NS Package with id 'd517aa50-5446-4062-b20a-0ee443148085' is success.                
 </code></pre></div>

            <div class="p">Delete an instance.
                <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -R instance
                
2022-01-17T12:27:09,244 INFO: Deleting of NS Instance starts now.
2022-01-17T12:27:12,832 INFO: Deletion of NS Instance with name 'MyNSI' is success.</code></pre></div>

            <div class="p">Perform an update. <pre class="pre codeblock"><code>deployNS.sh -f deployNS.conf -u
                
2022-01-19T07:46:42,827 INFO: Going to start 'update' operation.
2022-01-19T07:47:01,378 INFO: Checking the status of update of NS instance job.
2022-01-19T08:13:01,382 INFO: update operation of NS instance is success. </code></pre></div>

        </div>

    </div>
<div class="footer"><hr /><p>Installation and Upgrade Guide • P556766-DN1000055103-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>