<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="update_bucketInstance" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="d1e43302" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>update_bucketInstance</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="d1e43302">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">update_bucketInstance</h1>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_bkq_t1b_f3b"><h2 class="title topictitle2" id="ariaid-title2">EDR tags</h2>
<div class="body conbody">
            <table cellpadding="4" cellspacing="0" summary="" id="concept_bkq_t1b_f3b__table_p4s_t1b_f3b" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:27.95180722891566%" /><col style="width:47.95180722891566%" /><col style="width:24.096385542168672%" /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d30889e42">Tag</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d30889e45">Description</th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d30889e48">Example</th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">adjustAmountCurrent</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The amount by which the current value in base units is
                                adjusted.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">500</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketSource</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Indicates whether the bucket source is a Device or Group.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">DEVICE</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketTransferLimit</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The carryover value.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">70</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">adjustAmountInitial</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The amount by which the initial value in base units is
                                adjusted.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">500</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">updateCarryOver</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Indicates whether carryover is updated.<p class="p">Valid values: true or
                                    false</p>
</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">true</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">adjustMode</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The adjust mode, that is, INCR or DECR or SET.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">SET</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketSourceId</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Identifier (DeviceId or GroupId) of the bucket source.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">DeviceId74292</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketSourceName</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">It indicates the name of the bucket source. It is dumped only for
                                device entity.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">D1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketInstanceId</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The bucket instance ID.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">9738f045-e7e1-48fb-b3c9-a8aaa0098a05</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketName</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The identifier of the bucket.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">PrePaid_Bucket_V174292</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketUnitType</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Unit type of bucket.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">Byte</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketKindOfUnit</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Kind of unit type of bucket.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">VOLUME</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">bucketreUnitTypeCreationTime</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">The time stamp.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">03/12/2018 14:15:21</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">initialValue</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Initial value in base units.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">2500</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">currentValueWithoutReserv</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Current available units removing reserved value in base
                                units.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">1500</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">currentValue</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Current available value in base units.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">1800</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">carryOver</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Identifies if carryover is allowed, that is, true or
                                false.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">false</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">maxCarryOverValue</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Maximum carryover value in base units.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">1200</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">renewalPeriodMode</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Renewal period mode of the bucket.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">ONE_PERIOD</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">consumptionPriority</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Consumption Priority of the bucket.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">CARRY_OVER_BUCKET</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">adjustAmountInitialValidity</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Number of billing cycle.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">2</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">currentStep</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Specifies the current step.<p class="p">For maximum value, refer to <a class="xref" href="max_value_note.html">Max value for Bucket and Counters</a>.</p>
</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">currentStepUpTime</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Specifies the last step up date and time.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">27/01/2021 17:00:11</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">RecordProperty</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Record property for device ID information.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">deviceIdentityInfo</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">↘deviceIdentityType</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">
                                <p class="p">Device ID type.</p>

                                <p class="p">Valid values: 0 (e164), 1 (iMSI), 2 (sIP-URI), 3 (nAI), 4
                                    (uSER-PRIVATE), 100 (eXTERNAL-ID), 101 (dEVICE-ID), 102 (sUPI),
                                    103 (gPSI).</p>

                            </td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">103</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e42 ">↘deviceIdentityValue</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e45 ">Value of the device identifier.</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d30889e48 ">Device012172</td>

                        </tr>

                    </tbody>
</table>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This EDR generated for update operation includes both old and new values of
                updated parameters, for example, <var class="keyword varname">old_currentValue</var> and
                    <var class="keyword varname">currentValue</var>.</div>

            <div class="section" id="concept_bkq_t1b_f3b__section_o4s_t1b_f3b"><h3 class="title sectiontitle">Examples for adjustMode</h3>
                
                <div class="sectiondiv">
                    <p class="p">
                        <strong class="ph b">SET</strong>
                    </p>

                    <p class="p">If the following values are provided for
                            <var class="keyword varname">update_bucketInstance</var> API:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_q4s_t1b_f3b">
                        <li class="li">adjustAmount=2500</li>

                        <li class="li">initialValueAdjustAmount=2500</li>

                    </ul>

                    <p class="p">Then the EDR output is as follows:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_r4s_t1b_f3b">
                        <li class="li">adjustAmountCurrent = adjustAmount (2500) – old current value (2000) =
                            500</li>

                        <li class="li">adjustAmountInitial = initialValueAdjustAmount (2500) – old initial
                            value (2000) = 500</li>

                    </ul>

                </div>
                <div class="sectiondiv">
                    <p class="p">
                        <strong class="ph b">INCR</strong>
                    </p>

                    <p class="p">If the following values are provided for
                            <var class="keyword varname">update_bucketInstance</var> API:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_s4s_t1b_f3b">
                        <li class="li">adjustAmount=3</li>

                        <li class="li">initialValueAdjustAmount=5</li>

                    </ul>

                    <p class="p">Then the EDR output is as follows:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_t4s_t1b_f3b">
                        <li class="li">adjustAmountCurrent = 3</li>

                        <li class="li">adjustAmountInitial = 5</li>

                        <li class="li">old_initialValue = 95</li>

                        <li class="li">initialValue = old_initialValue (95) + initialValueAdjustAmount (5) =
                            100</li>

                        <li class="li">old_currentValue = 95</li>

                        <li class="li">currentValue = old_currentValue ( 95) + adjustAmount (3) = 98</li>

                    </ul>

                </div>
                <div class="sectiondiv">
                    <p class="p">
                        <strong class="ph b">DECR</strong>
                    </p>

                    <p class="p">If the following values are provided for
                            <var class="keyword varname">update_bucketInstance</var> API:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_u4s_t1b_f3b">
                        <li class="li">adjustAmount=3</li>

                        <li class="li">initialValueAdjustAmount=5</li>

                    </ul>

                    <p class="p">Then the EDR output is as follows:</p>

                    <ul class="ul" id="concept_bkq_t1b_f3b__ul_v4s_t1b_f3b">
                        <li class="li">adjustAmountCurrent = 3</li>

                        <li class="li">adjustAmountInitial = 5</li>

                        <li class="li">old_initialValue = 95</li>

                        <li class="li">initialValue = old_initialValue (95) – initialValueAdjustAmount (5) =
                            90</li>

                        <li class="li">old_currentValue = 95</li>

                        <li class="li">currentValue = old_currentValue (95) – adjustAmount (3) = 92</li>

                    </ul>

                </div>
            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_a3p_51b_f3b"><h2 class="title topictitle2" id="ariaid-title3">EDR example</h2>
<div class="body conbody">
            <div class="section" id="concept_a3p_51b_f3b__section_w4s_t1b_f3b">
                <pre class="pre codeblock" id="concept_a3p_51b_f3b__codeblock_agx_f2y_lyb"><code>-------------------------------------
CDR length:                       803
Release ID | Version ID:          7|2
Data record format | TS number:   1|7
Release identifier extension:       0
Name                          Tag                                                   Data
RecordType                    0                                      PROVISIONING_RECORD
invokedBy                     1                                               webService
invokedMethod                 1                                    update_bucketInstance
bucketInstanceId              1                     c7575272-5bda-4ef0-a177-2bb6e1a2ca71
bucketName                    1                                                Bucket001
bucketUnitType                1                                                     Byte
bucketKindOfUnit              1                                                   VOLUME
initialValue                  1                                                        0
currentValueWithoutReserv     1                                                        0
currentValue                  1                                                        0
carryOver                     1                                                    false
adjustAmountInitialValidity   1                                                       -1
globalEntity                  1                                                    false
adjustAmountCurrent           1                                                        0
bucketSource                  1                                                   DEVICE
adjustAmountInitial           1                                                        0
adjustMode                    1                                                      SET
bucketSourceName              1                                                       D1
bucketSourceId                1                                                       D1
result                        1                                                  SUCCESS
correlationID                 1     X-CorrelationId:1a4dc7a9-006a-4f75-8f2e-fd42ad2e2eff
generationTimestamp           1                                      16/06/2023 13:13:19
meHostName                    1                                                      ME1
nccVersion                    1                                              SPS_23_8_R1
recordId                      1      20230616131319_8de23368-72f0-4695-9535-ad20a68ed9ff
RecordTimestamp               1                                      16/06/2023 13:13:19</code></pre>
            </div>

        </div>
</div>
<div class="footer"><hr /><p>CDR/EDR Reference • P556766-DN1000055014-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>