<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Helm charts deployment order and dependencies" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="ncc_helm_charts_deployment_order_and_dependencies" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Helm charts deployment order and dependencies</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="ncc_helm_charts_deployment_order_and_dependencies">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Helm charts deployment order and dependencies</h1>
<div class="body conbody">
        <p class="p"><span class="ph">NCC</span> is designed to be robust in its installation such that there are no hard and fast
            dependencies among pod types or when they could be deployed. If a pod type is deployed
            prior to all of its dependencies being ready, then that pod will wait before
            proceeding.</p>

        <p class="p">However, to ensure a smooth deployment without risking timeouts and pod restarts due to
            waiting for dependencies, ordering the deployment to follow approximate dependency order
            can be helpful.</p>

        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The <span class="ph filepath">cbur-crds</span> chart creates these CRDs at the cluster-level that
            must be run by a user who has permissions to create/update/delete CRDs:<ul class="ul" id="ncc_helm_charts_deployment_order_and_dependencies__ul_pn1_kxt_crb">
                <li class="li"><span class="ph filepath">brhooks.cbur.csf.nokia.com</span></li>

                <li class="li"><span class="ph filepath">brpolices.cbur.csf.nokia.com</span></li>

            </ul>

        </div>

        <p class="p">To view the Helm charts in an <span class="ph">NCC</span> deployment and their dependencies, see
                <span class="ph filepath">Chart.yaml</span> in the <span class="ph">NCC</span> delivery. In that file, each Helm chart
            is listed along with its dependencies. These dependencies are used as input to an
            operator's orchestration system and could then enable generation of a dependency graph.
            This example snippet indicates that the charging Helm chart depends on: aerospike,
            ckaf-kafka, csdc, iohd, and sps-load. </p>

        <pre class="pre codeblock"><code>- name: charging
    repository: '@sps-helm-dynamic'
    version: &lt;=00.00.00
    condition: generateDependencies
    custom:
        releases:
            - dependsOn:
                - '{{ $.Values.elementType }}-aerospike'
                - '{{ $.Values.elementType }}-ckaf-kafka'
                - '{{ $.Values.elementType }}-csdc'
                - '{{ $.Values.elementType }}-iohd'
                - sps-load
        inputs: chf-charging.yaml
        name: '{{ $.Values.elementType }}-charging'
        timeout: 1800s</code></pre>        
    </div>
<div class="footer"><hr /><p>Installation and Upgrade Guide • P556766-DN1000055103-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>