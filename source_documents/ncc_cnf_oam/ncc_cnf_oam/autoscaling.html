<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Autoscaling" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="chapter1" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Autoscaling</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="chapter1">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Autoscaling</h1>
<div class="body conbody">
        <p class="p">Autoscaling is a Kubernetes operation that automatically increases or decreases the
            number of pods based on the demands of your workloads. When demand is high, autoscaling
            adds pods to the pods pool. When demand is low, autoscaling scales down the number of
            pods giving back unused resources.</p>

        <p class="p">Autoscaling is handled by Horizontal Pod Autoscaler (HPA), a Kubernetes API resource and
            controller, and works independently for each pod type. HPA monitors the workload and
            utilization of resources in a cluster, and based on the current need as well as
            specified utilization metrics and thresholds, dynamically adjusts the number of pods of
            a particular pod type. By default the utilization metric is set to CPU utilization.</p>

        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Scaling down occurs gradually, smoothing out the impact of rapidly fluctuating metric
            values with a downscale stabilization timer of five minutes.</div>

        <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Although the software supports autoscaling, Nokia recommends that this feature not be
            leveraged. Additional certification testing is underway to ensure its flawless
            operation. To disable this, the <code class="ph codeph">minReplicas</code> values are set the same as
            the <code class="ph codeph">maxReplicas</code> values.</div>

        <p class="p">For more information about Autoscaling and HPA, see the Kubernetes documentation.</p>

        <div class="section" id="chapter1__section_mvq_rpz_tkb"><h2 class="title sectiontitle"> HPA definition</h2>
            
            <p class="p">The HPA for each pod type is defined in the <span class="ph filepath">values.yaml</span> file as
                follows:</p>

            <div class="p">
                <pre class="pre codeblock"><code>hpa:
    minReplicas: 1
    maxReplicas: 10
    averageCpuUtilization: 80</code></pre>
            </div>

            <p class="p">where:</p>

            <div class="p">
                <ul class="ul" id="chapter1__ul_ubb_xc1_5kb">
                    <li class="li"><code class="ph codeph">minReplicas</code> is the minimum number of pods running at any
                        time.</li>

                    <li class="li"><code class="ph codeph">maxReplicas</code> is the maximum number of pods running at any
                        time regardless of the utilization calculation.</li>

                    <li class="li"><code class="ph codeph">averageCpuUtilization</code> is the percentage of the target
                        average used to determine whether a new pod should be instantiated or how
                        many existing pods should be terminated.</li>

                </ul>

            </div>

        </div>

        <div class="section" id="chapter1__section_ktd_c1q_zlb"><h2 class="title sectiontitle">Updating HPA configuration</h2>
            
            <p class="p">The HPA configuration parameters <code class="ph codeph">minReplicas</code>,
                    <code class="ph codeph">maxReplicas</code>, and <code class="ph codeph">averageCpuUtilization</code> can be
                updated at the time of installation and post-installation using the <code class="ph codeph">helm
                    upgrade</code> command.</p>

            <p class="p">Before you update <code class="ph codeph">averageCpuUtilization</code>, find out the current CPU
                utilization.</p>

            <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                <p class="p">Do not use the Kubernetes GUI to find out whether or not the current CPU
                    utilization exceeds the target CPU utilization. Use <code class="ph codeph">kubectl -n
                        &lt;namespace&gt; get hpa</code> command for this purpose.</p>

            </div>

            <p class="p">For information about <code class="ph codeph">helm</code> and its options, see
                    <code class="ph codeph">helm</code> documentation. </p>

        </div>

        <div class="section" id="chapter1__section_nm4_zsj_skb"><h2 class="title sectiontitle">Kubernetes GUI</h2>
            
            <p class="p">The Kubernetes GUI allows you to see events related to scaling. These events are
                visible in a number of microservices views such as <strong class="ph b">Deployment</strong>,
                    <strong class="ph b">StatefulSet</strong> or <strong class="ph b">ReplicaSet</strong>. For more information on the Kubernetes
                GUI, see Kubernetes documentation.</p>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>