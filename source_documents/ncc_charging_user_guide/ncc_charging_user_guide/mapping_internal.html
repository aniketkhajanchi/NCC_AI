<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Mapping internal names with external names of policy counters" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-d1e6203" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Mapping internal names with external names of policy counters</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-d1e6203">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Mapping internal names with external names of policy counters</h1>
<div class="body conbody">
<div class="section">
<p class="p">For subscriber's policy counters and their status, OCS and PCRF communicate through the Sy
                interface. The PCRF can have its own policy counter identifiers, and these may be
                required in the policy counter status reports. NCC supports maintaining both
                internal (OCS) policy counter ID and external (PCRF) policy counter ID and define a
                mapping between the two.</p>

<p class="p">To achieve this, a mapping table is created with the mapping of internal and external counters. In the map, the key must have internal counter name and the value must have the external counter name. The name of the mapping table is then configured in a rule variable in the GY_CREDIT_REQUEST trigger.</p>

</div>

<div class="section"><h2 class="title sectiontitle">Configuration</h2><ol class="ol">
<li class="li"><p class="p">Create a mapping table (in <strong class="ph b">Charging</strong> → ☰ → <strong class="ph b">Mapping tables</strong>) containing one map
                        key and one map value. Provide the internal counter names in map key and
                        external counter names in map value.</p>
<p class="p">Define map structure with one map
                        key and one map value as shown in the following figure:</p>

                    
                    <img class="image" src="../images/img9yz-09126-ug01-pczza-sp1-mappcidmap_default.png" />
                    <p class="p">Configure map values as shown in the following figure:</p>

                    
                    <img class="image" src="../images/img9yz-09126-ug01-pczza-sp1-pc_complexmap_default.png" />
                </li>

<li class="li"><p class="p">Create a rule variable in the GY_CREDIT_REQUEST trigger, and configure the name of the
                        mapping table in the default value field. The default value for this field
                        is set as <samp class="ph systemoutput">PolicyCounterMap</samp>. Change this to
                        provide the name of the appropriate mapping table.</p>

                    
                    <img class="image" src="../images/img9yz-09126-ug01-pczza-sp1-pcmaprule_default.png" />
                </li>

</ol>

</div>

<div class="section"><h2 class="title sectiontitle">Additional information</h2><ul class="ul">
<li class="li">
<p class="p">This feature is applicable only for PUSH mode, in which all available policy counters are sent in SLA.</p>

</li>

<li class="li">
<p class="p">The CDRs generated for Sy interface contain the internal counter names.</p>

</li>

<li class="li">
<p class="p">If a corresponding external counter name is not found for an internal counter, then the internal counter name is sent to PCRF. </p>

</li>

<li class="li">
<p class="p">If multiple internal counter names are mapped to a single external policy counter name, then any one of the internal counters is sent to PCRF in SLA or SNR.</p>

</li>

</ul>

</div>

<div class="section"><h2 class="title sectiontitle">Example</h2>
<p class="p">Consider the following mapping table:</p>

<table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><colgroup><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                        <tr class="row">
                            <th class="entry cellrowborder" style="vertical-align:top;" id="d62005e121">
                                <p class="p">OCS counter ID</p>

                           </th>

                            <th class="entry cellrowborder" style="vertical-align:top;" id="d62005e127">
                                <p class="p">PCRF counter ID</p>

                           </th>

                        </tr>

                    </thead>
<tbody class="tbody">
                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e121 ">C1</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e127 ">PC_1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e121 ">C2</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e127 ">PC_2</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e121 ">C3</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e127 ">PC_1</td>

                        </tr>

                        <tr class="row">
                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e121 ">C4</td>

                            <td class="entry cellrowborder" style="vertical-align:top;" headers="d62005e127 ">-</td>

                        </tr>

                    </tbody>
</table>

<p class="p">Following reports are prepared:</p>
<ul class="ul">
<li class="li">
<p class="p">Policy-Counter-Status-Report {Policy-Counter-Identifier = "PC_1",Policy-Counter-Status = "Value1"}</p>

</li>

<li class="li">
<p class="p">Policy-Counter-Status-Report {Policy-Counter-Identifier = "PC_2",Policy-Counter-Status = "Value2"}</p>

</li>

<li class="li">
<p class="p">Policy-Counter-Status-Report {Policy-Counter-Identifier = "C4",Policy-Counter-Status = "Value4"}</p>

</li>

</ul>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> <ol class="ol">
<li class="li">
<p class="p">C1 and C3 have same external counter name, hence one is chosen randomly.</p>

</li>

<li class="li">
<p class="p">C4 is sent to PCRF as no explicit mapping found.</p>

</li>

</ol>

</div>

<p class="p">This only impacts Spending-Limit-Answer (SLA) and Spending-Status-Notification-Request (SNR). OCS sends SLA/SNR with all policy counters by mapping their internal names to the external names and their status attached to the given Subscription-Id. </p>

<p class="p">The flows of Spending-Limit-Request (SLR), Spending-Status-Notification-Answer (SNA), Session-Termination-Request (STR), and Session-Termination-Answer (STA) have no impact.</p>

</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>