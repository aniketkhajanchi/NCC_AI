<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Diameter peers" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="diameter_peers" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Diameter peers</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="diameter_peers">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Diameter peers</h1>
<div class="body conbody">
        <p class="p">To configure a Diameter peer, login to SM GUI and navigate to <strong class="ph b">Connectivity </strong> → ☰ →
                <strong class="ph b">DIAMETER PEERS</strong> → <strong class="ph b">Diameter Peers</strong>. Select the <strong class="ph b">PEERS</strong> tab. Click
                <strong class="ph b">+</strong> to create a new Diameter Peer and enter the parameter details as shown in
            the following table:</p>

        <table cellpadding="4" cellspacing="0" summary="" id="diameter_peers__table_bks_ttp_1nb" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Diameter Peer parameters</span></caption><colgroup><col style="width:13.422007255139059%" /><col style="width:58.40386940749698%" /><col style="width:16.082224909310764%" /><col style="width:12.091898428053206%" /></colgroup><thead class="thead" style="text-align:left;">
                    <tr class="row">
                        <th class="entry cellrowborder" style="vertical-align:top;" id="d4726e65">
                            <p class="p">Parameter </p>

                        </th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d4726e71">
                            <p class="p">Description</p>

                        </th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d4726e77">
                            <p class="p">Options</p>

                        </th>

                        <th class="entry cellrowborder" style="vertical-align:top;" id="d4726e83">
                            <p class="p">Mandatory or Optional</p>

                        </th>

                    </tr>

                </thead>
<tbody class="tbody">
                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Peer Host</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">
                            <p class="p">Enter the host name of the Diameter peer.</p>

                            <p class="p">For outbound connections, specify an existing local address group for
                                the peer so that only IP addresses in that group are displayed
                                during peer connection. The Diameter peer must be part of one of the
                                local groups that are configured at the time of installation.</p>

                            <p class="p">The host name must not contain the “/” character.</p>

                            <p class="p">If more than 255 characters are provided in this field, then the
                                first 255 characters are used and the subsequent characters are
                                ignored.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">
                            <p class="p">Enter the peer host (FQDN)</p>

                            <div class="note" id="diameter_peers__note_e2b_lrn_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> 
                                <p class="p">Wildcard (*) can be used in the FQDN for inbound peers only. </p>

                            </div>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Mandatory</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Description</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Enter a brief description about the Diameter peer being
                            configured.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">String</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Connection Type </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">
                            <p class="p">Select the direction of the connection, which can be
                                    <var class="keyword varname">Inbound</var> or <var class="keyword varname">Outbound</var> from
                                the drop-down list.</p>

                            <p class="p">It is possible to configure more than one TCP or SCTP connection to
                                an outbound peer. The inbound messages are routed to the server by
                                NCC through one of the configured connections.</p>

                            <div class="p">
                                <div class="note" id="diameter_peers__note_vck_prn_qxb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> A peer host with the connection type
                                    “Inbound” supports the wildcard with the “*” character, such
                                    that a single entry with a wildcard(s) can be specified to
                                    satisfy the range of virtual Diameter identities for a
                                    peer.</div>

                            </div>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">Inbound or Outbound</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Mandatory for Outbound and not required for Inbound. </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d4726e65 d4726e71 d4726e77 d4726e83 "><strong class="ph b">Peer Details</strong></td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Primary IP</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">
                            <p class="p">Enter the primary IP address of the Diameter peer. There is only one
                                IP address for the TCP group.</p>

                            <p class="p">For SCTP, enter the IP address that you want as the primary. Any
                                address configured in the group may be entered as the group’s
                                primary IP address.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">IPv4 or IPv6</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Mandatory</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Port</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify the port number of the remote host used to connect to
                            NCC.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">
                            <p class="p">The value must be between 0 to 65535.</p>

                            <p class="p">Default value is <var class="keyword varname">3868</var>.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">
                            <p class="p">Mandatory for outbound peers</p>

                            <p class="p">Optional for inbound peers</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Protocol</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">
                            <p class="p">Specify the protocol used. One and only one protocol (TCP or SCTP)
                                must be set per Diameter group in this release.</p>

                            <p class="p"><strong class="ph b">Note:</strong> Do not select <var class="keyword varname">TLS</var> as TLS is the
                                Diameter security for TCP and specifies a secure connection.
                                Security is set via the diameteroam/group/N/diameter/config/secure
                                key. Based on the key’s value used, TLS configuration for incoming
                                and outgoing connections are appropriately updated in the Diameter
                                configuration files.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">
                            <p class="p">TCP</p>

                            <p class="p">SCTP</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">
                            <p class="p">Mandatory for Outbound.</p>

                            <p class="p">If the <em class="ph i">Connection Type</em> is <var class="keyword varname">Inbound</var>, then
                                nothing is entered in this field.</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 "> Local Address Group </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">
                            <p class="p">Select the type of protocol for Diameter over one or more virtual IP
                                addresses of the active IOHD pod from the drop-down list.</p>

                            <p class="p">The groups are configured at installation time as part of the
                                Diameter group keys configuration in the SDC.</p>

                            <p class="p">For both TCP and SCTP connections, this parameter specifies a
                                Diameter Group Name that is either Tcp# or Sctp#, which is made up
                                of the &lt;Protocol&gt; and &lt;Group number&gt; that was configured
                                at installation time as part of the Diameter group keys
                                configuration in the SDC. For example, the Local Address Group
                                appears as Tcp1 or Tcp2, or Sctp1 or Sctp2, and so on.</p>

                            <p class="p">The same IP address can be in one TCP group and one SCTP group, but
                                the same IP address cannot be in two groups with the same protocol
                                (TCP or SCTP). </p>

                            <p class="p">The local groups configured at the time of installation are the only
                                Diameter groups supported in your installation and they are the only
                                groups to which you can add a Diameter peer. The groups appear by
                                default in the SM GUI as they were configured at installation
                                time.</p>

                            <p class="p">When enabling either protocol, you can specify any address group for
                                the peers depending on what you have configured at installation
                                time. </p>

                            <p class="p">For information about configuring system-level keys, see the
                                    <cite class="cite">Installation and Upgrade Guide</cite> .</p>

                            <ul class="ul" id="diameter_peers__ul_mrj_4xd_wmb">
                                <li class="li">
                                    <p class="p">A TCP Diameter group must be associated with one and only one
                                        IOHD VIP address that can be IPv4 or IPv6.</p>

                                </li>

                                <li class="li">
                                    <p class="p">To support Diameter/TCP over multiple IOHD VIP addresses, a
                                        separate TCP Diameter group must be created for each VIP
                                        address.</p>

                                </li>

                                <li class="li">
                                    <p class="p">There must not be any VIP address overlaps between Diameter
                                        groups of the same protocol. If a VIP address is associated
                                        with one Diameter group, then it cannot be associated with
                                        any other Diameter group of the same protocol.</p>

                                </li>

                            </ul>

                            <p class="p">To enable this support, the Diameter group keys must be configured in
                                accordance with the following at installation:</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">
                            <p class="p">For SCTP connections, NCC has the local address group that contains
                                the list of local IP addresses available for that connection. </p>

                            <p class="p">The list of selectable 'local address groups is retrieved from the ME
                                Diameter configuration. Different MEs can be configured with a
                                different set of 'local address groups'.</p>

                        </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">
                            <p class="p">Mandatory for Outbound.</p>

                            <p class="p">If the <em class="ph i">Connection Type</em> is <var class="keyword varname">Inbound</var>, then
                                nothing is entered in this field.</p>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Request Timeout (ms)</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify the time to wait for a response in milliseconds.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">The value must be 0 or between 50 ms and 60000 ms. </td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional </td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d4726e65 d4726e71 d4726e77 d4726e83 ">Click <span class="ph uicontrol">+Additional
                                IP</span> and enter the IP to add an additional IP address. For
                            SCTP, multiple IP addresses can be entered.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Peer Connection Profile</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify a peer connection profile to apply to the peer.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 "> Select the name of a profile from the drop-down list.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Downstream Overload Profile</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify a downstream overload profile to apply to the peer.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 ">Select the name of a profile from the drop-down list.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Ingress Throttling Profile</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify an ingress throttling profile to apply to the peer.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 "> Select the name of a profile from the drop-down list.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional</td>

                    </tr>

                    <tr class="row">
                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e65 ">Egress Throttling Profile</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e71 ">Specify an egress throttling profile to apply to the peer.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e77 "> Select the name of a profile from the drop-down list.</td>

                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d4726e83 ">Optional</td>

                    </tr>

                </tbody>
</table>

        <div class="section" id="diameter_peers__section_c3p_25p_1nb"><h2 class="title sectiontitle">Allowed list for connection</h2>
            
            <p class="p">At the top of the <strong class="ph b">Diameter Peers</strong> configuration page for inbound requests,
                there is a toggle button for <strong class="ph b">Disallow requests from all other clients</strong>.</p>

            <ul class="ul" id="diameter_peers__ul_dgs_fqr_qxb">
                <li class="li">If it is enabled, only the Diameter peers configured to connect with NCC are
                    allowed for connection. </li>

                <li class="li">If it is disabled, then any Diameter peer can connect to NCC. Adding to the
                    allowed list accepts or rejects incoming connection requests. </li>

            </ul>

            <p class="p">The Diameter peer allowed list enables to specify the list of peers permitted to
                connect with NCC. Requests from all other clients are rejected when the allowed list
                is enabled.</p>

            <p class="p">NCC allows you to efficiently allow listed peers that have one identity (FQDN or IP
                address) or multiple virtual identities within the same IP address. A peer host with
                the <em class="ph i">Connection Type</em> as <var class="keyword varname">Inbound</var> supports using the wildcard
                “*”, such that a single FQDN can be specified to satisfy a range of virtual Diameter
                identities for a peer. That is, you can use the “*” in any FQDN string to allow an
                incoming connection to match, at most, one (the first matched) inbound Diameter peer
                entry. The wildcard is not supported for <var class="keyword varname">Outbound</var> connection
                types.</p>

            <p class="p">The wildcard “*” allows peer connection to be accepted for multiple connections from
                the same IP address. The wildcard is supported at any position within the string
                provided there is either a non-wildcard character immediately following it or an
                empty space. For example, the peer host could be “*base.gx” and that would match any
                string ending with “base.gx”. Used in the middle of a string like “toronto*mobile”
                would match any string that starts with “toronto” “(contains some characters)” and
                ends with “mobile”. Used at the end of a string like “ottawa*” would match any
                string that starts with “ottawa”. Multiple wildcards can also be used within the
                same string as long as they meet the same criteria as described above, for example:
                *toronto*base.*. Two or more wildcards immediately following each other (virt**.com)
                is not supported.</p>

            <p class="p">Allowed listing only accepts or rejects incoming connection requests; nothing is
                disconnected by allowed listing. Allow listing is only applicable to inbound peer
                connection requests and allowed list updates do not impact existing peer
                connections. A log is generated when a peer is either accepted or rejected due to
                allowed list capabilities.</p>

        </div>

    </div>
<div class="footer"><hr /><p>Diameter/HTTP Configuration Guide • P556766-DN1000054969-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>