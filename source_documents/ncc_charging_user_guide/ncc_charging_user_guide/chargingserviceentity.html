<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Charging logic (Charging Service)" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="id9yz-09126-ug01-pczza-sp1-chargingserviceentity" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Charging logic (Charging Service)</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Charging logic (Charging Service)</h1>
<div class="body conbody">
  <div class="note notice" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_s1b_r2f_jsb"><div class="noticetitle"><img src="../../web/css/../images/notice.svg" title="notice-icon" class="noteicon" />Notice:</div> When a charging logic is published to ME, it takes a
   few seconds until it's effective on the ME side. The correct procedure is to publish the charging
   logic immediately at a future date (for example, midnight 00:00:00 of the next day). For testing,
   the charging logic is published with effective date = current time (in this case, + 30 seconds
   until it is effective).  </div>
  <p class="p">A charging logic (charging service) is a collection of resources, such as buckets and counters,
   and charges or rates. It is the fundamental unit of service offered to subscribers. It defines
   the method and amount used to charge for a service consumed by the subscribers.</p>

  <p class="p">For example, a charging logic (charging service) is defined for a subscriber to apply a rate
   plan based on the subscriber location and time of day.</p>

  <p class="p">The given relations are associated with the sub-components of the charging logic (charging
   service):</p>

  <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_ltr_jmn_gqb">
   <li class="li">
    <p class="p">A charging logic (charging service) can contain multiple tariff definitions or
     references.</p>

   </li>

   <li class="li">
    <p class="p">A charging logic (charging service) can contain zero or more bucket definitions.</p>

   </li>

   <li class="li">
    <p class="p">A charging logic (charging service) can contain zero or more counter definitions.</p>

   </li>

  </ul>

  <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> It is not recommended to change bucket name or counter name in the charging service when a
   subscription is attached with a device or group using the charging service. The non-admin users
   cannot see the withdraw option to withdraw a charging logic or a service.</div>

  <div class="section" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__section_xzx_p5x_hqb"><h2 class="title sectiontitle">Charging logics versus Charging Services</h2><p class="p">A
    Charging Service (CS) is maintained on SM and is provisioned to ME, to define a charging
    configuration.</p>
<p class="p">A Charging Logic (CL) is a super-set of a Charging Service, to support the
    design-mode of the GUI. The Charging Logic is maintained on the SM only. A Charging Service is
    derived from the Charging Logic for provisioning to ME.</p>
A CS or CL can be created or updated
   using the REST API to SM. The corresponding entity is automatically created or updated. In case
   of CS, the CL generated uses <em class="ph i">code mode</em> which re-packages the tariff rules. Note that the
   design mode is available only for CLs created using GUI.</div>

<div class="section"><h2 class="title sectiontitle">Sorting mechanism for charging services</h2>
<p class="p">For charging a call, all charging logics (charging services) accessible to a device are sorted
    based on following criteria:</p>
<ol class="ol">
<li class="li">
<p class="p">Logic categories (category consumption order)</p>

</li>

<li class="li">
<p class="p">Subscription index: This can be either set to <var class="keyword varname">Device_First</var> or <var class="keyword varname">Group_First</var>.</p>

<p class="p">If a device is attached to multiple groups, for example, Group 1, Group 2, Group 3, then order of
      groups is considered based on their association with the device. If the association order of
      groups is Group 2, Group 3, Group 1, then this order is followed while sorting charging logic
      (charging services).</p>

</li>

<li class="li">
<p class="p">Hierarchy order defined: This can be either set to <var class="keyword varname">Top-Down</var> or <var class="keyword varname">Bottom-Up</var>.</p>

<p class="p">The hierarchy order of the top-most group in the hierarchy is considered.</p>

</li>

<li class="li">
<p class="p">Charging logic (charging service) priority: Lower the number, higher the priority. If two
      charging logics (charging services) have same priority, then the next priority criterion is
      selected, such as creation date or expiry date.</p>

</li>

<li class="li">
<p class="p">Charging logic (charging service) instance creation or expiry date. If the same service (bundle)
      is purchased twice, then the service (bundle) is selected based on the next priority
      criterion.</p>

<p class="p">The charging logic (charging service) instance selection criteria can be one of the following
      criteria based on your requirement:</p>
<ul class="ul">
<li class="li">
<p class="p">Charging logic (charging service) instance creation date: Implies that the service (bundle)
        created or purchased first is consumed first.</p>

</li>

<li class="li">
<p class="p">Charging logic (charging service) instance expiry date: Implies that the service (bundle) with
        earliest expiry date is consumed first.</p>

<p class="p">- If both end time (for periodic lifecycle) and validity time (for entity lifecycle) are available for the subscription, then the minimum of both values is considered.</p>

<p class="p">- If the subscription has an end time but no validity time, then the subscription end time is considered.</p>

<p class="p">- If the subscription has a validity time but no end time, then the subscription validity time is considered.</p>

<p class="p">- If the subscription does not have an end time, then the account end time is considered.</p>

<p class="p">- If the subscription does not have an end time and validity time, and also account does not have an end time, then the <span class="ph uicontrol">subscEndTime</span> parameter in the subscription entity is set to <var class="keyword varname">Null</var>. While sorting, if the <span class="ph uicontrol">subscEndTime</span> is set as <var class="keyword varname">Null</var>, then that subscription is used at the end.</p>

</li>

</ul>

</li>

</ol>

<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If the values of all the listed criteria are same, then the criteria that comes first is used
    for sorting the charging logics (charging services).</div>

<div class="sectiondiv">
<p class="p"><strong class="ph b">Configuration to sort CS based on creation or expiry date</strong></p>

<div class="p">Configure the required value for the following ME application preference:<div class="note" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_fpr_jfw_ptb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For details on configuring the ME application preferences, see
       <em class="ph i">Managed Elements</em> section in <em class="ph i">Global Configuration Guide</em>.)</div>
<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col style="width:36.496350364963504%" /><col style="width:63.503649635036496%" /></colgroup><thead class="thead" style="text-align:left;">
        <tr class="row">
         <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e210">
          <p class="p">Application preference</p>

         </th>

         <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e216">
          <p class="p">Description</p>

         </th>

        </tr>

       </thead>
<tbody class="tbody">
        <tr class="row">
         <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e210 ">CS Selection Order</td>

         <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e216 ">
          <p class="p">This parameter allows you to sort the charging service based on creation time of
           subscription or end time of a subscription or account when both charging services have
           same priority (considering all charging service sorting mechanisms are same for both the
           charging services).</p>

          <p class="p">Following are the supported values for this parameter:</p>

          <ul class="ul">
           <li class="li">
            <p class="p">
             <var class="keyword varname">ON_CREATION_TIME</var>: If you select this value, then the charging
             service is sorted based on the creation time.</p>

           </li>

           <li class="li">
            <p class="p">
             <var class="keyword varname">ON_END_TIME</var>: If you select this value, then the charging service is
             sorted based on end time or validity time of subscription or end time of account,
             whichever is applicable.</p>

           </li>

          </ul>

          <p class="p">Default value is <var class="keyword varname">ON_CREATION_TIME</var>.</p>

         </td>

        </tr>

       </tbody>
</table>
</div>

</div>
</div>

  <div class="section" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__section_r3f_wyn_wsb"><h2 class="title sectiontitle">Fair usage policy override </h2>
   
   <p class="p">NCC allows operators to override the Fair Usage Policy (FUP) properties while creating a
    charging logic. To override the values in create/update/provision Charging Logic APIs, the field
     <strong class="ph b">fairUsagePolicies</strong> can be used. For each FUP in the charging logic that the user wishes
    to provide overridden values, an item should be added to this list. However, if the user is
    using the values from the FUP definition, then you should not add an item.</p>

   <p class="p">FUP is a counter with a threshold. With every FUP definition, there is an internal threshold
    with the same name. It is hidden in the GUI, as it is intended to be used exclusively with its
    FUP.</p>

   <p class="p">When you override the FUP in the charging logic, a new internal threshold is created and is
    used only in association with this charging logic. The ID for this threshold is generated
    concatenating the following parts: <em class="ph i">FUP name, special delimiter "+F+", Charging logic ID.
    </em>For example, "Fup1+F+CL1". These are hidden in the GUI too.</p>

  </div>

<div class="section" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__FUP_config"><h2 class="title sectiontitle">Configuration</h2>
   
   <p class="p">This section describes the parameters to define a rate charged against a call.</p>

   <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> A charging service can have zero or more counter objects in it and the list is optional. If
    a counter is included in the list, then all the other counter object parameters except the
    threshold and category consumption list, such as unit type, scope, type become mandatory.</div>

   <p class="p">Log into the new GUI, navigate to <span class="ph uicontrol">Charging → ☰ → Charging Management → Charging
     Logics</span>. To define a new charging logic (charging service), click 
    <img class="image" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__image_h3r_nbx_2qb" src="../images/hybrid_gui/new_button.png" height="54" width="104" />and select whether you want to create a Data, Messaging, or Voice and configure
    the parameters given in the following table:</p>

   <table cellpadding="4" cellspacing="0" summary="" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__table_kt3_qsw_fqb" class="table" width="100%" frame="border" border="1" rules="all"><caption><span class="tablecap"><span class="table--title-label">Table: </span>Parameters for charging logic</span></caption><colgroup><col style="width:22.51023192360164%" /><col style="width:47.203274215552526%" /><col style="width:13.642564802182811%" /><col style="width:16.64392905866303%" /></colgroup><thead class="thead" style="text-align:left;">
      <tr class="row">
       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e332">Parameter</th>

       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e335">Description</th>

       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e338">Value type</th>

       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e341">Mandatory/Optional</th>

      </tr>

     </thead>
<tbody class="tbody">
      <tr class="row">
       <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d47411e332 d47411e335 d47411e338 d47411e341 "><strong class="ph b">APPLICABILITY RULE</strong>: Limit service availability and
        applicability with conditions. You can filter applicability with network, session,
        subscriber and date and time criteria.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Conditions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 "><span class="ph uicontrol">Charging condition</span>: <p class="p">This parameter indicates a rule
         condition expression evaluated to determine whether the charging logic is
         applicable.</p>
<p class="p">The type of charging service can be identified by <em class="ph i">KindOfUnit</em>
         provisioned in the applicability condition.</p>
<p class="p">Since the charging service entity does
         not have any attribute <em class="ph i">Unit-Type</em>, the call common context attribute
          <em class="ph i">KindOfUnit</em> should be configured to identify the same.</p>
<p class="p">For example:
          <em class="ph i">KindOfUnit</em> can either be TIME, VOLUME, MONEY, or UNIT. Though applicability
         condition is not a mandatory parameter,however, to provide the charging service as a unit
         type, <em class="ph i">KindOfUnit</em> should be used.</p>
<div class="note caution" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_y2j_v4s_ysb"><div class="cautiontitle"><img src="../../web/css/../images/caution.svg" title="caution-icon" class="noteicon" />CAUTION:</div> Keep
         condition name same as the charging logic name. This ensures appropriate (and
         uninterrupted) functioning of charging logic creation and applicability.</div>
<div class="p">
         <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> The given example is only for reference.</div>

        </div>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d47411e332 d47411e335 d47411e338 d47411e341 "><strong class="ph b">CHARGING RULES</strong>: Use rules to define charging and
        conditional actions for the service. Service rules are evaluated in priority order.
         <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> You can select the <strong class="ph b">Use Advanced Mode</strong> or <strong class="ph b">Design mode</strong> to configure
         rules.</div>
</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Rule</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter indicates the rule name.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Secondary charging</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">
        <p class="p">This check box splits the charging rule into primary and secondary paths. </p>

        <p class="p">All the components are allowed for the primary path but only Rate, zero-rate, custom
         counter, and Allowance Limit are allowed for the secondary path. </p>

        <p class="p">Metering Limit, and Fair Usage Policy are not supported in the secondary path.</p>

        <p class="p">Components added on the secondary path have a next prefix on the injection rule.</p>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Toggle key</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Conditions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 "><span class="ph uicontrol">Charging condition</span>: This parameter indicates a rule condition
        expression evaluated to determine whether the charging logic is applicable.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Charging</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter provides the following charging components. You can drag and drop these
        components into the <strong class="ph b">Charging</strong> pane. Once the component is available in the Charging
        pane, click it and a box appears on the right side of the page, where you can configure the
        details for the component. <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_vnp_pgd_qqb">
         <li class="li"><strong class="ph b">Charging</strong>: It has the following components. <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_x3m_f4s_tvb">
           <li class="li"><strong class="ph b">Allowance Limit</strong>: Select an allowance limit from the available ones. The
            following tabs appear:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_qyy_yqs_tvb">
             <li class="li"><strong class="ph b">Details</strong>: Configure the available fields.</li>

             <li class="li"><strong class="ph b">Granularity</strong>: Select <strong class="ph b">Apply granularity from a rate</strong>. The <strong class="ph b">Global
               rate</strong> and <strong class="ph b">Local rate</strong> tabs appear. Select a rate from these two tabs to
              apply granularity.</li>

            </ul>
<p class="p">Click <strong class="ph b">APPLY</strong>.</p>
</li>

           <li class="li"><strong class="ph b">Tiered Allowance</strong>: Select a Tiered Allowance from the available ones. The
            following tabs appear:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_fp1_vrs_tvb">
             <li class="li"><strong class="ph b">Details</strong>: Configure the available fields.</li>

             <li class="li"><strong class="ph b">Granularity</strong>: Select <strong class="ph b">Apply granularity from a rate</strong>. The <strong class="ph b">Global
               rate</strong> and <strong class="ph b">Local rate</strong> tabs appear. Select a rate from these two tabs to
              apply granularity.</li>

            </ul>
<p class="p">Click <strong class="ph b">APPLY</strong>.</p>
</li>

           <li class="li"><strong class="ph b">Fair Usage Policy</strong>: Select an Fair Usage Policy from the available ones.
            Configure the available fields for Fair Usage Policy and Quality of Service. <p class="p">Click
              <strong class="ph b">APPLY</strong>.</p>
</li>

           <li class="li"><strong class="ph b">No charge</strong>: A block to apply <em class="ph i">RATING.No-Charge</em> rule.</li>

          </ul>
</li>

         <li class="li"><strong class="ph b">Rating</strong>: It has the following components:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_h2v_2sm_qwb">
           <li class="li"><strong class="ph b">Rate</strong>: Select a Rate from the available ones. The following tabs appear:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_kwz_trs_tvb">
             <li class="li"><strong class="ph b">Details</strong>: Displays the details.</li>

             <li class="li"><strong class="ph b">Rounding</strong>: Provide an integer value in the <strong class="ph b">Rounding factor</strong> field. The
              rate cost is rounded up to the next decimal place with this configuration. <p class="p">Click
                <strong class="ph b">APPLY</strong>.</p>
</li>

            </ul>
</li>

           <li class="li"><strong class="ph b">Tiered Rate</strong>: Select a tiered rate from the available ones.</li>

           <li class="li"><strong class="ph b">Discount</strong>: In the <strong class="ph b">Amount</strong> field, configure a number between 0 and 100.
            This indicates the percentage of discount. <p class="p">Click <strong class="ph b">APPLY</strong>.</p>
</li>

          </ul>
</li>

         <li class="li"><strong class="ph b">Metering</strong>: It has the following components:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_og4_3sm_qwb">
           <li class="li"><strong class="ph b">Metering Limit</strong>: Select a metering limit from the available ones or create a
            new one. <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_knw_gys_tvb">
             <li class="li"><strong class="ph b">Details</strong>: Configure the available fields.</li>

             <li class="li"><strong class="ph b">Select rate</strong>: Click <strong class="ph b">Select rate on metering threshold</strong> and select a
               <strong class="ph b">Unit</strong> from the drop-down list. Configure the available fields.</li>

            </ul>
</li>

           <li class="li"><strong class="ph b">Custom Counter</strong>: Select a custom counter from the available ones. </li>

          </ul>
</li>

        </ul>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 "> </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Actions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This displays the actions that are available for use. You can drag and drop to use
        it.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d47411e332 d47411e335 d47411e338 d47411e341 "><strong class="ph b">FALLBACK RULES</strong>: Fallbacks are secondary charging
        rules applied after all charging rules from all subscriptions have been evaluated in
        priority order.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">PASSES</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter indicates the passes and each pass contains a single tariff.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Rule</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter indicates the rule name.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Secondary charging</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">
        <p class="p">This check box splits the charging rule into primary and secondary paths. </p>

        <p class="p">All the components are allowed for the primary path but only Rate, zero-rate, custom
         counter, and Allowance Limit are allowed for the secondary path. </p>

        <p class="p">Metering Limit, and Fair Usage Policy are not supported in the secondary path.</p>

        <p class="p">Components added on the secondary path have a next prefix on the injection rule.</p>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Toggle key</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Conditions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 "><span class="ph uicontrol">Charging condition</span>: This parameter indicates a rule condition
        expression evaluated to determine whether the charging logic is applicable.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Charging</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This field has the same parameters as the Charging field for <strong class="ph b">Charging</strong>. </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 "> </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 "> </td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Actions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This displays the actions that are available for use. You can drag and drop to use
        it.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 "> </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 "> </td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d47411e332 d47411e335 d47411e338 d47411e341 "><strong class="ph b">LOGIC DETAILS</strong></td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Name</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter indicates the name of the charging logic.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Description</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This parameter indicates the description of the charging logic.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">String</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Category</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">
        <p class="p">This parameter indicates the category associated with the charging logic.</p>

        <p class="p">The default value is <var class="keyword varname">DefaultCategory</var>.</p>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Select the required category from the predefined categories in the drop-down
        list.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Priority</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">
        <p class="p">This parameter indicates the priority of the charging logic. Higher the number, lower is
         the priority of the charging logic. Multiple charging logics can have same priority.</p>

        <div class="p">
         <div class="note" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_zfg_qww_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Ensure that the value of this parameter is greater than
          zero.</div>

        </div>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">
        <p class="p">Integer</p>

        <p class="p">Valid range: 1 to 2147483647</p>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">clTranslationFlag</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This flag indicates whether to create a charging logic entity when creating a charging
        service. Setting this to true has following impact:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_i2k_qsl_jqb">
         <li class="li">
          <p class="p">You can only view/edit charging logics in GUI, not charging services.</p>

         </li>

         <li class="li">
          <p class="p">If buckets/counters are created as part of charging service, they are created as global
           (allowed to be referenced by other charging services).</p>

         </li>

        </ul>
<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> This parameter is not visible on GUI and can be set using API only.
        </div>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Boolean, input only, used in create API</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional (default is false - do not create Charging Logic). This is for full backward
        compatibility but it is recommended to set this flag to true.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" colspan="4" style="vertical-align:top;" headers="d47411e332 d47411e335 d47411e338 d47411e341 "><strong class="ph b">Publish Version</strong></td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Publish To</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">This provides a list. Operators can publish to All subscribers and so on.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Enum</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Activation Time</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">The supported values are as follows:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_yf1_h1h_ysb">
         <li class="li"><strong class="ph b">Activate Now</strong>: If this is selected, then the charging logic is activated
          immediately.</li>

         <li class="li"><strong class="ph b">Schedule Activation</strong>: Operators can schedule activation to a future time using
          this option.</li>

        </ul>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Enum</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Validity Start</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 "><p class="p">This field appears only if <strong class="ph b">Activation Time</strong> = <var class="keyword varname">Schedule
          Activation</var>.</p>
The new version of the entity becomes active at the selected
        date-time.</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Date-time</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Time zone for publish</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">
        <p class="p">This field appears only if <strong class="ph b">Activation Time</strong> = <var class="keyword varname">Schedule
          Activation</var>.</p>

        <ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_tnq_hby_pwb">
         <li class="li">Always use UTC: The new version of the entity becomes active for all accounts at the
          same UTC time.</li>

         <li class="li">Based on account time zone: The new version of the entity becomes active for each
          account at its respective timezone. A time before 26 hours from last active version cannot
          be selected.</li>

        </ul>

       </td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Radio button</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Publish Type</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">The supported values are as follows:<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_ud4_yxg_ysb">
         <li class="li"><strong class="ph b">Normal</strong>: If this is selected, then no action is taken and the processing happens
          as per the defined logic.</li>

         <li class="li"><strong class="ph b">Retroactive update</strong>: If this is selected, then the <strong class="ph b">forcedVersioning</strong>
          attribute is set in the API and the update is immediately applied.</li>

        </ul>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Enum</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Mandatory</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e332 ">Delete all prior draft versions</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e335 ">If you select this option, it deletes any draft versions with the same major number,
        excluding the contributing draft version. The deletion takes place only if the
        provisioning/publish is successful. For failure, the drafts are not deleted. <p class="p">If not
         selected, the draft versions remain in the system after provisioning/publish.</p>
<p class="p">Example
         (if selected): </p>
<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_qnp_v5w_pwb">
         <li class="li">Before: 1.1 Draft → 1.2 Draft → 1.3 Draft → 2.0.0 Withdrawn → <strong class="ph b">2.1 Draft → 2.2
           Draft</strong> → 2.3 Draft</li>

         <li class="li">After publishing: 1.1 Draft → 1.2 Draft → 1.3 Draft → 2.0.0 Withdrawn → 2.3 Draft →
          3.0.0 Active</li>

        </ul>
<p class="p">In this example, versions <strong class="ph b">2.1 Draft</strong> and <strong class="ph b">2.2 Draft</strong> are deleted, but
          <strong class="ph b">2.3 Draft</strong> is not deleted as it is the contributing draft version. </p>
</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e338 ">Radio button</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e341 ">Optional</td>

      </tr>

     </tbody>
</table>

  </div>

  <div class="section" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__section_sj1_qqw_sqb"><h2 class="title sectiontitle">Configuring rates based on counter's
    threshold</h2><p class="p">NCC provides design mode in the GUI for operators to configure the rates
    based on counter's threshold. Operators can perform the following steps for
    configuration:</p>
<ol class="ol" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ol_khn_qrw_sqb">
    <li class="li">Create a custom counter.</li>

    <li class="li">Create a charging-logic as follows:<ol class="ol" type="a" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ol_ag5_srw_sqb">
      <li class="li">Drag and drop a custom counter or metering limit component onto canvas.</li>

      <li class="li">Select the created counter definition.</li>

      <li class="li">Select the Rate selection from side panel.</li>

      <li class="li">Add the threshold values and associated Rate IDs.</li>

     </ol>

    </li>

   </ol>
On submitting the preceding configuration, the SM server manages the creation or update of
   Threshold Profile Group (TPG) with the given thresholds and association of TPG to the counter. On
   publishing, the entities are published automatically that can be referenced by the provisioned
    charging-logic.<p class="p">If an operator selects split charging, then the charging section of the canvas
    splits into primary and secondary columns, and components can be dropped into the secondary
    column. The same set of thresholds apply to both primary and secondary columns, but the rates
    are selected separately. The rate selection side panel provides input fields for primary and
    secondary rates.</p>
<div class="p">The following actions can be performed for the components added into the
     canvas:<div class="note" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_sl4_wbt_ysb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> To perform these actions, click <img class="image" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__image_nhm_1ct_ysb" src="../images/component_canvas_action.PNG" height="18" width="8" /> icon
     available in the components added into the canvas.</div>
<ul class="ul" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__ul_msy_mbt_ysb">
     <li class="li"><span class="ph uicontrol">Duplicate</span>: It duplicates the selected component.</li>

     <li class="li"><span class="ph uicontrol">Reset</span>: It resets the component to its initial state.</li>

     <li class="li"><span class="ph uicontrol">Remove</span>: It removes the selected component from the canvas.</li>

    </ul>
</div>
<div class="p">The components that are dropped into the canvas can be cleared by clicking clear
    canvas (<img class="image" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__image_fjx_zvs_ysb" src="../images/clear_canvas.PNG" height="29" width="20" />) icon.<div class="note" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__note_o3b_5vs_ysb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Upon clicking clear canvas icon, a confirmation
     dialog box appears as shown in the following image:<img class="image break" id="id9yz-09126-ug01-pczza-sp1-chargingserviceentity__image_b4w_jws_ysb" height="96" src="../images/clear_canvas_dialog_box.PNG" width="192" /></div>
</div>
</div>

<div class="section"><h2 class="title sectiontitle">Actions associated with a charging logic (charging service)</h2>The Charging
   logic create API is: <kbd class="ph userinput">/services/ServiceManager/create/ChargingService</kbd> and
   publish API is: <kbd class="ph userinput">/services/ServiceManager/provision/ChargingService</kbd>.<table cellpadding="4" cellspacing="0" summary="" class="table" width="100%" frame="border" border="1" rules="all"><colgroup><col /><col /></colgroup><thead class="thead" style="text-align:left;">
      <tr class="row">
       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e1187">Action</th>

       <th class="entry cellrowborder" style="vertical-align:top;" id="d47411e1190">Description</th>

      </tr>

     </thead>
<tbody class="tbody">
      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1187 ">Create</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1190 ">Creates a logic (charging service) entity in the database.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1187 ">Read</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1190 ">Displays a particular logic (charging service) entity as per the data retrieved from
        database.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1187 ">Update</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1190 ">Updates a particular logic (charging service) entity in database.</td>

      </tr>

      <tr class="row">
       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1187 ">Delete</td>

       <td class="entry cellrowborder" style="vertical-align:top;" headers="d47411e1190 ">Deletes a particular logic (charging service) entity from database.</td>

      </tr>

     </tbody>
</table>
<div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> These actions are valid for only for internal purposes and cannot be accessed using
    the SM GUI.</div>
</div>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>