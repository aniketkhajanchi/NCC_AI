<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Keystore configuration on Maestro VM" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="keystore_configuration_on_maestro_vm" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Keystore configuration on Maestro VM</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="keystore_configuration_on_maestro_vm">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Keystore configuration on Maestro VM</h1>
<div class="body conbody">
        <p class="p">Maestro VM can be used for creating a keystore for Performance tests. This keystore
            should contain required custom TLS certificates.</p>

        <p class="p"><strong class="ph b">To create and configure a keystore</strong></p>

        <ol class="ol" id="keystore_configuration_on_maestro_vm__ol_dvt_sl3_jpb">
            <li class="li">
                <p class="p">Create a keystore using <code class="ph codeph">keytool</code>.</p>

                <pre class="pre codeblock"><code>/bin/keytool  
Key and Certificate Management Tool

Commands:

-certreq            Generates a certificate request
-changealias        Changes an entry's alias
-delete             Deletes an entry
-exportcert         Exports certificate
-genkeypair         Generates a key pair
-genseckey          Generates a secret key
-gencert            Generates certificate from a certificate request
-importcert         Imports a certificate or a certificate chain
-importpass         Imports a password
-importkeystore     Imports one or all entries from another keystore
-keypasswd          Changes the key password of an entry
-list               Lists entries in a keystore
-printcert          Prints the content of a certificate
-printcertreq       Prints the content of a certificate request
-printcrl           Prints the content of a CRL file
-storepasswd        Changes the store password of a keystore

Use "keytool -command_name -help" for usage of command_name.
Use the -conf &lt;url&gt; option to specify a pre-configured options file.
</code></pre>
            </li>

            <li class="li">
                <p class="p">After the keystore is created, encode the keystore with base64 (the default Linux
                    Bash tool), for example:</p>

                <pre class="pre codeblock"><code>base64 custom_keystore                     
MIIElgIBAzCCBE8GCSqGSIb3DQEHAaCCBEAEggQ8MIIEODCCBDQGCSqGSIb3DQEHBqCCBCUwggQh
AgEAMIIEGgYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQUCvXYtbaDBtNQGynSQvKQ3dSIreYC
AwDDUICCA+CvC7pSEfTKaZqBrs2vxYGqcIaUWW3vPC+h3nxbUGf2yP7EME//NsGVhX4JqNLprTmp
UdFmqIq9tAVlsTx25fYVzi6eo7UfgmdyUAuoFiZ2d8qD5Q7RZhdpFdofGLADzuS5jgh4+s+Yuno8
MWccMEzBmsHsH29fQrYDebwV6Ug+fxVgsHeJlBVvEFQ2Nw5O1W/Se5oCFpgYwcbS/OdWL0hcjpZr
OGn6yIEZ/xTU+wBd9NJB+M6eTl8o/l/aWHkLqoLSxrjZKZIh551uHU5dZwwNvho6DWhM4LJDUkgu
UNxauWc8i598mTgTbKAa3Mh0WJSHBQ2TllO1jMnvU7TWIMGzwcb4t4ENUGKU7g+dJNe9ImVj4WYl
81KC827Yotyudgfb1Ma4oL3IRu2EaEOMPiMww3kPUcZgzI+h2lHbm6HMQeIXUbT+fBt4eJbbbhNu
ABRCvfhWGb8JP9XB+b0Sfv9HsAisj5B4keVgCGztjjHXtGOBOtPM9z/JkPnX0iYtJ5V5J33pV07U
pL4XcfeBQTowXxjLQh2WS4i7hz61mdrmvhNw7AaUFtwrwg+ZlWmMyq4ffWxllPZS1rQK4S5MxoX4
0HQWLes452WTNYqDsIRViywGq6nREdIoOmDOZ0vwVTwibTTi6tOstnNnDCg53YRG+Oqu/vqLus/1
/6f87l8bR4tpc0e0eXMOvQGOg9yb/CJpNG62leBYtSFaMmqtCVNdRMEDS0M8i285uCdItiLsXLBz
9KS6T6ct3ic9xp30/8IZFK+drQHEuuNDeKsRsLerB1V2dECYhbzzEas8yp41X+RHghooUza/JqeH
C48ikeLkXpcJSz+rhLjvH+01r9t7wRQ/feSEAEOrnG9g2BevJrwf2gkMuSb5UZ3K3OKWqd6B+WXp
f79gPeiOa57c/VvMox/XeFuMFiphJALqWh2R16mhd1er+9xnqFKIn3Aqu8e1FZS2i88jfGv4bHS9
IROt/UrOxfVq2JI7rTGpE7u0eOE06zOn/kO128dv4dTUq2fLz5hQdxRtLWFB7fLTA2+A1cFE4j6Q
/GznBZRabbE5kg4ZeE/UfYlkdcXSaG7bo7T2GHlpiL1nFTjDMol1LLyQkZlHlN8vGkEF5DVorS4b
Y3pCXcLiQOEHgi1DmKIwKKfd6octqAjri4k1MKDq/zVyHBWb2yCWRC0niQGH6pPc58fWaWw8OugA
XFuNPlvJzIPK5gUrv8hmVtJkDUatNgfzULvH2gUi5JY72aMatUf2ARIzEunP64a283/Vw/r8cm/+
tfGfDYBtz/OOrVpLVDYLdz9iD3ZNcUz4RtnVSAp+nTA+MCEwCQYFKw4DAhoFAAQUXdQkcAqWoDhy
B2nqU2/i/JrcZ7UEFFNj6EjVLT3qKhE27PTAqxsLq6R8AgMBhqA=
</code></pre>
            </li>

            <li class="li">
                <p class="p">Add this base64-encoded keystore under the <code class="ph codeph">mtls variables</code>
                    section in <code class="ph codeph">parameters.yaml</code>.</p>

                <div class="note"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> Add also a keystore password through a <code class="ph codeph">keystorePass</code>
                    variable.</div>

            </li>

            <li class="li">
                <p class="p">Maesto VM has default certificate files that are mainly used in internal testing
                    phase, but could be also used as such after the following configurations:</p>

                <ul class="ul" id="keystore_configuration_on_maestro_vm__ul_zqk_ry3_jpb">
                    <li class="li">Configure the ME configuration YAML file’s <code class="ph codeph">mtls</code> part to use
                        the files on the default certificate location of <code class="ph codeph">spstests</code>
                        on Maestro VM (<code class="ph codeph">/opt/sps/spstests/certs</code>).</li>

                    <li class="li">
                        <p class="p">Decode the keystore in the same folder with the following command:</p>

                        <pre class="pre codeblock"><code>base64 -d keystore.b64 &gt; example_keystore</code></pre>
                        <p class="p">where <code class="ph codeph">example_keystore</code> is the name of
                                <code class="ph codeph">keystoreFile</code> in the configuration.</p>

                    </li>

                </ul>

            </li>

        </ol>

    </div>
<div class="footer"><hr /><p>DevOps Guide • P556766-DN1000055058-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>