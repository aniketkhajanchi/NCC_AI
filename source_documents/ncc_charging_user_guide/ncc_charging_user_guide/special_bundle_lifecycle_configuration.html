<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Special period bundle lifecycle configuration" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="special_bundle_lifecycle_configuration" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Special period bundle lifecycle configuration</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="special_bundle_lifecycle_configuration">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Special period bundle lifecycle configuration</h1>
<div class="body conbody">
        <div class="p">Bundles can be configured based on time of the day, day of the week, or specific day of
            the year. Bundles can have the following special periods:<ul class="ul" id="special_bundle_lifecycle_configuration__ul_jfb_f3y_qvb">
                <li class="li">Birthday: Applicable on a specific day of the year. Birthday information is
                    provisioned using device custom data.</li>

                <li class="li">Weekend: Applicable from Saturday 00:00 to Monday 00:00.</li>

                <li class="li">Happy hour: Applicable on specific days of the week. For example: from time1
                    (Monday) to time2 (Friday).</li>

            </ul>
<div class="note" id="special_bundle_lifecycle_configuration__note_az4_tn1_rvb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> For details on special bundle, see <a class="xref" href="special_period_bundle_for_device.html">Special period bundle for device</a>.</div>
</div>

        <div class="section" id="special_bundle_lifecycle_configuration__section_ewr_b41_rvb"><h2 class="title sectiontitle">Lifecycle configuration</h2>
            
            <div class="p">Following is the subscription entity type lifecycle configuration for the special
                period bundle:<div class="fig fignone" id="special_bundle_lifecycle_configuration__fig_u2q_jm1_rvb">
                    <img class="image break" id="special_bundle_lifecycle_configuration__image_q4p_nm1_rvb" height="288" src="../images/special_bundle_lifecycle_config.PNG" width="480" />
                </div>
</div>

            <p class="p">The <em class="ph i">Start Cycle Event</em> in <var class="keyword varname">Pre-Active</var> state triggers the
                    <em class="ph i">Trigger Event Action</em> and <em class="ph i">Reset Special Period Action</em>.</p>

            <p class="p"><em class="ph i">Trigger Event Action</em> triggers the <em class="ph i">Start Cycle Event</em> to period
                lifecycle, and <em class="ph i">Reset Special Period Action</em> calculates the first transition
                time based on the bundle’s special period start and end time.</p>

            <p class="p">The state changes from <var class="keyword varname">Pre-Active</var> to
                <var class="keyword varname">Active</var>.</p>

            <p class="p">The <em class="ph i">Repeat Special Period Event</em> in <var class="keyword varname">Active</var> state triggers
                the <em class="ph i">Reset Special Period Action</em>. The <em class="ph i">Reset Special Period Action</em> in
                    <var class="keyword varname">Active</var> state calculates the next transition time based on the
                bundle’s special period start and end time. It also sends an SNR message with policy
                counter status based on whether current time is in the interval of the special
                period.</p>

            <p class="p">Upon receiving <em class="ph i">Entity Remove Event</em> trigger in <var class="keyword varname">Active</var> state,
                the state changes from <var class="keyword varname">Active</var> to <var class="keyword varname">Removed</var>
                state.</p>

            <div class="p">In <var class="keyword varname">Removed</var> state, after a second, the <em class="ph i">Delete Entity</em> action
                is trigged and the entity is deleted.<div class="note" id="special_bundle_lifecycle_configuration__note_k4s_1l1_rvb"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> One second timer
                    should be configured in the <em class="ph i">Repeat Special Period Event</em>. If the timer of
                    one second is configured, then the looping transition schedules the next timer
                    based on the current lifecycle framework. The timer value is calculated and
                    scheduled with <em class="ph i">Reset Special Period Action</em>.</div>
</div>

            <p class="p">While calculating the next transition time according to the bundle’s special period
                start time and end time, the <em class="ph i">VT-And-Time-Period-AF-Factor</em> and
                    <em class="ph i">In-Advance-Mode</em> attributes are considered. </p>

            <div class="p">For example:<ul class="ul" id="special_bundle_lifecycle_configuration__ul_d1g_1bb_svb">
                    <li class="li">
                        <p class="p"><em class="ph i">Week-Days</em> is set to <em class="ph i">“1;2;3;4;5”</em>, <em class="ph i">Start-End-Time</em> is
                            st to <em class="ph i">“08:00:00,12:00:00”</em>, and
                                <em class="ph i">VT-And-Time-Period-AF-Factor</em> is set to 600 seconds.</p>

                    </li>

                    <li class="li">
                        <p class="p">Bundle subscribes to a device on 2022/9/20 14:25 PM, and the randomized
                            value is 100 seconds. The state transition time is calculated using the
                            following formula:</p>

                        <p class="p">If <em class="ph i">In-Advance-Mode</em> is set to <var class="keyword varname">true</var>,</p>

                        <p class="p"><em class="ph i">timestamp = start time of special period - adjustment factor +
                                randomized value</em></p>

                        <p class="p">2022/09/21 8:00:00 - 600 seconds + 100 seconds = 2022/09/21 07:51:40 </p>

                        <p class="p">If <em class="ph i">In-Advance-Mode</em> is set to <var class="keyword varname">false</var>,</p>

                        <p class="p"><em class="ph i">timestamp = start time of special period + randomized value</em></p>

                        <p class="p">2022/09/21 8:00:00 + 100seconds = 2022/09/21 08:01:40 </p>

                    </li>

                    <li class="li">
                        <p class="p">The next state transition event is calculated using the following
                            formula. The randomized value is 200 seconds.</p>

                        <p class="p"><em class="ph i">timestamp = end time of special period + randomized value</em></p>

                        <p class="p">2022/09/21 12:00:00 + 200 seconds = 2022/09/21 12:03:20.</p>

                    </li>

                </ul>
</div>

        </div>

    </div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>