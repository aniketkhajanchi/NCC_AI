<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Examples" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="loan_example" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Examples</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="loan_example">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Examples</h1>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" id="concept_z53_jcc_ptb"><h2 class="title topictitle2" id="ariaid-title2">Example 1: Loan usage as main balance, low balance notifications on call, and loan
            usage notification</h2>
<div class="body conbody">
            <ol class="ol" id="concept_z53_jcc_ptb__ol_ux4_xqc_1tb">
                <li class="li">Configure the following ME application preferences:<ol class="ol" type="a" id="concept_z53_jcc_ptb__ol_ukg_qfd_1tb">
                        <li class="li">EDR Logging Enabled = true</li>

                        <li class="li">AutoGen SPR Ids = true</li>

                        <li class="li">EDR Generator Flag = true</li>

                    </ol>
</li>

                <li class="li">Configure the following rule in <var class="keyword varname">LOAN_PRE_PROCESSING</var> trigger.
                        <div class="fig fignone" id="concept_z53_jcc_ptb__fig_af2_h5c_1tb"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule to enable IOU grant if Account custom data is 'Eligible'</span>
                        
                        <a href="../images/loan2.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_dxz_q5c_1tb" src="../images/loan2.png" /></a>
                    </div>
<div class="fig fignone" id="concept_z53_jcc_ptb__fig_bqm_p5c_1tb"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule to reject loan if already in Opt-In state</span>
                        
                        <a href="../images/loan3.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_ksc_s5c_1tb" src="../images/loan3.png" /></a>
                    </div>
<div class="fig fignone" id="concept_z53_jcc_ptb__fig_phr_p5c_1tb"><span class="figcap"><span class="fig--title-label">Figure: </span>Rule to reject loan if already in Opt-Out state</span>
                        
                        <a href="../images/loan4.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_gly_s5c_1tb" src="../images/loan4.png" /></a>
                    </div>
</li>

                <li class="li">Configure rule in <var class="keyword varname">LOAN_POST_PROCESSING</var> trigger, to send the
                    notification based on the loan operation:<div class="fig fignone" id="concept_z53_jcc_ptb__fig_bkq_1wc_1tb">
                        <a href="../images/loan5.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_ahx_fwc_1tb" src="../images/loan5.png" /></a>
                    </div>
</li>

                <li class="li">The device purchases a subscription <var class="keyword varname">Bundle1</var>, with Account
                        <var class="keyword varname">A1</var>, and User is attached to the device.</li>

                <li class="li">Configure Account Balance with a Main Balance = £1.00 and with OverageLimit = 0,
                    and attach User to the Account.<div class="fig fignone" id="concept_z53_jcc_ptb__fig_qj4_51m_1tb">
                        <a href="../images/loan8.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_oxl_v1m_1tb" src="../images/loan8.png" /></a>
                    </div>
</li>

                <li class="li">Create a loan with the following configuration: <table cellpadding="4" cellspacing="0" summary="" id="concept_z53_jcc_ptb__table_fjb_rrc_1tb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:9.066183136899364%" /><col style="width:11.876699909338168%" /><col style="width:18.766999093381685%" /><col style="width:16.047144152311876%" /><col style="width:13.327289211242066%" /><col style="width:30.915684496826835%" /></colgroup><thead class="thead" style="text-align:left;">
                                <tr class="row">
                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e121">Name</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e124">Type</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e127">Loan amount</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e130">Activation fee</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e133">Service fee</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e137">Service fee paid only if loan used</th>

                                </tr>

                            </thead>
<tbody class="tbody">
                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e121 ">IOU</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e124 ">Recurrent</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e127 ">£3.00</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e130 ">0</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e133 ">£0.45</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e137 ">Selected (True)</td>

                                </tr>

                            </tbody>
</table>
</li>

                <li class="li">Account has a TPG with <var class="keyword varname">Absolute from zero</var> as Threshold for
                    Low Balance Set at £1 with Send Notification action based on the Account Loan
                    State. Following figure provides an example to have flexibility based on loan
                    instances (through rule conditions) to get different types of notification or to
                    get loan instance variables in notifications: <div class="fig fignone" id="concept_z53_jcc_ptb__fig_ukc_vjm_1tb">
                        <a href="../images/loan11.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_msh_3km_1tb" src="../images/loan11.png" /></a>
                    </div>
</li>

                <li class="li">To receive loan usage notification, apply a TPG with <var class="keyword varname">Loan Usage
                        flag=true</var> with Send Notification action as well with Account: <div class="fig fignone" id="concept_z53_jcc_ptb__fig_wwk_4gd_1tb"><span class="figcap"><span class="fig--title-label">Figure: </span>Account with TPG having loan usage enabled</span>
                        
                        <a href="../images/loan6.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_tf5_wgd_1tb" src="../images/loan6.png" /></a>
                    </div>
<div class="fig fignone" id="concept_z53_jcc_ptb__fig_s5k_ygd_1tb"><span class="figcap"><span class="fig--title-label">Figure: </span>Loan usage flag notification template</span>
                        
                        <a href="../images/loan7.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_vsb_zgd_1tb" src="../images/loan7.png" /></a>
                    </div>
</li>

                <li class="li">The following figure shows the account overview with two TPGs attached:<div class="fig fignone" id="concept_z53_jcc_ptb__fig_sqx_1gm_1tb">
                        <a href="../images/loan10.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_wk5_bgm_1tb" src="../images/loan10.png" /></a>
                    </div>
</li>

            </ol>

            <div class="p"><strong class="ph b">Execution</strong><ol class="ol" id="concept_z53_jcc_ptb__ol_lrs_tyl_1tb">
                    <li class="li">Opt-In using TMF API for Account with Custom data as In-Eligible. The
                        request is rejected as per the rule configured.</li>

                    <li class="li">Execute TMF request to change the Custom Data from Ineligible to Eligible. </li>

                    <li class="li">Execute Opt-in request using TMF API. <div class="p">Check that Opt-In is successful
                            with Loan as main Balance £ 4. Remaining Debt becomes £ 3.45.
                            notification of Loan Opt-In is generated. EDR is generated.<div class="fig fignone" id="concept_z53_jcc_ptb__fig_f2b_3zl_1tb">
                                <a href="../images/loan_step3.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_jgp_4fm_1tb" src="../images/loan_step3.png" /></a>
                            </div>
</div>
</li>

                    <li class="li">
                        <p class="p">Subscriber executes a call, resulting to consumption of £ 0.30. As a
                            result, the main balance of the account becomes £ 3.70.</p>

                        <div class="fig fignone" id="concept_z53_jcc_ptb__fig_z2r_l1m_1tb">
                            <a href="../images/loan_step4.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_eps_rdm_1tb" src="../images/loan_step4.png" /></a>
                        </div>

                    </li>

                    <li class="li">
                        <p class="p">Execute Opt-out request using TMF API. </p>

                        <p class="p">Main-Balance remaining = £0.70 (that is, £3.00 has been successfully paid
                            back). Subscriber account state is Opt-Out. EDR is generated. Opt-Out
                            Notification is generated.</p>

                        <div class="fig fignone" id="concept_z53_jcc_ptb__fig_kfl_vdm_1tb">
                            <a href="../images/loan_step5.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_qrf_wdm_1tb" src="../images/loan_step5.png" /></a>
                        </div>

                    </li>

                    <li class="li">
                        <p class="p">Execute Opt-in Request using TMF API.</p>

                        <p class="p">Opt-In is successful with loan as main Balance £ 3.7. Remaining Debt is £
                            3.45. Notification of loan Opt-In is generated. EDR is generated.</p>

                        <div class="fig fignone" id="concept_z53_jcc_ptb__fig_xyd_12m_1tb">
                            <a href="../images/loan_step6.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_kgl_b2m_1tb" src="../images/loan_step6.png" /></a>
                        </div>

                    </li>

                    <li class="li">
                        <div class="p">Subscriber executes a call, resulting in consumption of £3.2.
                            Subscriber's main balance becomes £0.5. Two notifications are generated.
                            As balance granted as loan has been used for the consumption of the
                            call, so (i) Loan Usage Notification is sent and the (ii) low balance
                            threshold notification is also triggered as the MainBalance is less that
                            £ 1.<div class="fig fignone" id="concept_z53_jcc_ptb__fig_wmp_n2m_1tb">
                                <a href="../images/loan_step7.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_gqp_q2m_1tb" src="../images/loan_step7.png" /></a>
                            </div>
</div>

                    </li>

                    <li class="li">
                        <p class="p">Execute RESET request using TMF API. Reset is successful and the
                            MainBalance remains as 0.5. Notification is triggered for RESET. EDR is
                            generated.</p>

                        <div class="fig fignone" id="concept_z53_jcc_ptb__fig_wqp_t2m_1tb">
                            <a href="../images/loan_step8.png" class="image"><img class="image break scalefit" id="concept_z53_jcc_ptb__image_lkj_52m_1tb" src="../images/loan_step8.png" /></a>
                        </div>

                    </li>

                </ol>
</div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title3" id="concept_mkw_lcc_ptb"><h2 class="title topictitle2" id="ariaid-title3">Example 2</h2>
<div class="body conbody">
            <div class="section" id="concept_mkw_lcc_ptb__section_itn_ncc_ptb"><h3 class="title sectiontitle">Common configuration</h3>
                
                <ol class="ol" id="concept_mkw_lcc_ptb__ol_x3b_ndc_ptb">
                    <li class="li">Configure the following ME application preferences:<ol class="ol" type="a" id="concept_mkw_lcc_ptb__ol_tng_rdc_ptb">
                            <li class="li">EDR Logging Enabled = true</li>

                            <li class="li">AutoGen SPR Ids = true</li>

                            <li class="li">EDR Generator Flag = true</li>

                        </ol>
</li>

                    <li class="li">Create custom data at Account for In-Eligible /Eligible:<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_o51_ydc_ptb">
                        <a href="../images/loanuc1.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_wbc_c2c_ptb" src="../images/loanuc1.png" /></a>
                        </div>
</li>

                    <li class="li">Configure the following rule in LOAN_PRE_PROCESSING trigger.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_osh_t2c_ptb">
                        <a href="../images/loanuc2.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_ts3_v2c_ptb" src="../images/loanuc2.png" /></a>
                        </div>
<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_fwm_t2c_ptb">
                            <a href="../images/loanuc3.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_vvg_w2c_ptb" src="../images/loanuc3.png" /></a>
                        </div>
<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_h4q_t2c_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span></span>
                            
                            <a href="../images/loanuc4.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_plc_x2c_ptb" src="../images/loanuc4.png" /></a>
                        </div>
</li>

                    <li class="li">Configure the following rule in LOAN_POST_PROCESSING trigger.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_ad5_nfc_ptb">
                        <a href="../images/loanuc5.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_bv5_qfc_ptb" src="../images/loanuc5.png" /></a>
                        </div>
</li>

                    <li class="li">Configure the following rule in POST_RECHARGE trigger in Recharge RSV.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_efh_4fc_ptb">
                        <a href="../images/loanuc6.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_yht_rfc_ptb" src="../images/loanuc6.png" /></a>
                        </div>
</li>

                    <li class="li">Configure Notification Templates for rules – Loan Pre/Post Processing.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_u1q_llc_ptb">
                        <a href="../images/loanuc7.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_grm_mlc_ptb" src="../images/loanuc7.png" /></a>
                        </div>
</li>

                    <li class="li">Configure Notification Template for Recharge:<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_sgt_nlc_ptb">
                        <a href="../images/loanuc8.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_tsb_plc_ptb" src="../images/loanuc8.png" /></a>
                        </div>
</li>

                    <li class="li">Set <var class="keyword varname">Account TPG Loan Usage Flag</var> as
                            <var class="keyword varname">true</var><div class="fig fignone" id="concept_mkw_lcc_ptb__fig_gpq_ymc_ptb">
                                <a href="../images/loanuc9.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_qnw_zmc_ptb" src="../images/loanuc9.png" /></a>
                        </div>
<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_svw_l2h_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>If operator wants to send EDR/notification only in Diameter
                                call</span>
                            
                            <a href="../images/loanuc31.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_bnm_dfh_ptb" src="../images/loanuc31.png" /></a>
                        </div>
</li>

                    <li class="li">Configure loan usage flag notification template:<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_hrh_cnc_ptb">
                        <a href="../images/loanuc10.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_qv2_dnc_ptb" src="../images/loanuc10.png" /></a>
                        </div>
</li>

                </ol>

            </div>

            <div class="section" id="concept_mkw_lcc_ptb__section_zht_qcc_ptb"><h3 class="title sectiontitle">Prepay Subscriber activates a £3 Loan service (via TMF API) with repayment -
                    Success</h3>
                
                <p class="p"><strong class="ph b">Configurations</strong></p>

                <ol class="ol" id="concept_mkw_lcc_ptb__ol_x1q_lnc_ptb">
                    <li class="li">Configure Device1 with E164 = 3507000011. Device purchases subscription with
                        any bundle with Account3507 and user is attached to the device.</li>

                    <li class="li">The Account Balance configured has a MainBalance = £1.00, and with
                        OverageLimit = 0 and the User is attached to the Account.</li>

                    <li class="li">Create a Loan Entity LoanIOU with following Configuration: <table cellpadding="4" cellspacing="0" summary="" id="concept_mkw_lcc_ptb__loan_example__table_fjb_rrc_1tb" class="table" frame="border" border="1" rules="all"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                                    <tr class="row">
                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e127" style="vertical-align:top;">Name</th>

                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e130" style="vertical-align:top;">Type</th>

                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e133" style="vertical-align:top;">Loan amount</th>

                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e136" style="vertical-align:top;">Activation fee</th>

                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e139" style="vertical-align:top;">Service fee</th>

                                        <th class="entry cellrowborder" id="concept_mkw_lcc_ptb__d137549e143" style="vertical-align:top;">Service fee paid only if loan
                                            used</th>

                                    </tr>

                                </thead>
<tbody class="tbody">
                                    <tr class="row">
                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e127 ">
                                            <p class="p">LoanIOU</p>

                                        </td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e130 ">Recurrent</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e133 ">£3.00</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e136 ">0</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e139 ">£0.45</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="concept_mkw_lcc_ptb__d137549e143 ">Selected (True)</td>

                                    </tr>

                                </tbody>
</table>
</li>

                    <li class="li">Account has a TPG, with Absolute from zero as Threshold for Low Balance Set
                        at £1 with Send Notification action based on the Account Loan State.</li>

                    <li class="li">Account also has a TPG with <var class="keyword varname">Loan Usage
                            flag</var>=<var class="keyword varname">true</var> with Send Notification
                        action.</li>

                    <li class="li">Subscriber Account is in Initial Loan State and subscriber doesn not have
                        loan.</li>

                    <li class="li">Subscriber Account custom Data for Loan is
                        <var class="keyword varname">InEligible</var>.</li>

                    <li class="li">Rule is configured in LOAN_PRE_PROCESSING tigger, that IOU loan should be
                        granted if Account Custom data is <var class="keyword varname">Eligible</var>.</li>

                    <li class="li">Rule is configured in LOAN_POST_PROCESSING trigger  to send the Notification
                        based on the Loan Operation.</li>

                </ol>

                <p class="p"><strong class="ph b">Execution</strong></p>

                <ol class="ol" id="concept_mkw_lcc_ptb__ol_gcw_1pc_ptb">
                    <li class="li">Opt-In using TMF API for Account with Custom data as In-Eligible. The
                        request is rejected.</li>

                    <li class="li">Execute TMF request to change the Custom Data from Ineligible to Eligible. </li>

                    <li class="li">Opt-In using TMF API. Check that Opt-In is successful with Loan as main
                        Balance £ 1. Remaining Debt becomes £ 3.45. Notification for of Loan Opt-In
                        are generated. EDR is generated.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_c1q_zrc_ptb">
                            <a href="../images/loanuc11.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_zx3_1sc_ptb" src="../images/loanuc11.png" /></a>
                        </div>
</li>

                    <li class="li">Subscriber executes a call, resulting to consumption of £ 1.18. As a result,
                        main balance of the account becomes £ 2.82. Loan usage notification and EDR
                        are generated.<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_fnr_nsc_ptb">
                            <a href="../images/loanuc12.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_azd_ssc_ptb" src="../images/loanuc12.png" /></a>
                        </div>
</li>

                </ol>

            </div>

            <div class="section" id="concept_mkw_lcc_ptb__section_nt2_scc_ptb"><h3 class="title sectiontitle">Lone type is one-time and loan is used</h3>
                
                <p class="p"><strong class="ph b">Configuration</strong></p>

                <ol class="ol" id="concept_mkw_lcc_ptb__ol_ngg_s5c_ptb">
                    <li class="li">Configure Device1 with E164 as Device3465, with Account as Account3465 for
                        BundleMB3404 and user is attached to the device.</li>

                    <li class="li">The Account Balance configured has a MainBalance of £ 4.35, with Overage
                        Limit at 0, and the User is attached to the Account.</li>

                    <li class="li">Create a Loan Entity with following Configuration: <table cellpadding="4" cellspacing="0" summary="" id="concept_mkw_lcc_ptb__table_bvh_dvc_ptb" class="table" frame="border" border="1" rules="all"><colgroup><col /><col /><col /><col /><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                                    <tr class="row">
                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e587">Name</th>

                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e590">Type</th>

                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e593">Loan amount</th>

                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e596">Activation fee</th>

                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e599">Service fee</th>

                                        <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e603">Service fee paid only if loan used</th>

                                    </tr>

                                </thead>
<tbody class="tbody">
                                    <tr class="row">
                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e587 ">
                                            <p class="p">ETS1</p>

                                        </td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e590 ">One-time</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e593 ">£5.00</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e596 ">0</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e599 ">£0.5</td>

                                        <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e603 ">Clear (False)</td>

                                    </tr>

                                </tbody>
</table>
</li>

                    <li class="li">Subscriber Account is in Initial Loan State and subscriber does not have a
                        loan.</li>

                    <li class="li">Subscriber Account custom Data for Loan is <var class="keyword varname">Eligible</var>.</li>

                    <li class="li">Rule is configured in LOAN_PRE_PROCESSIONG trigger and Rule is configured in
                        LOAN_POST_PROCESSIONG trigger, to send the notification based on the loan
                        operation.</li>

                </ol>

                <p class="p"><strong class="ph b">Execution</strong></p>

                <ol class="ol" id="concept_mkw_lcc_ptb__ol_tmy_xvc_ptb">
                    <li class="li">Execute Opt-in request using TMF API. Following is the account overview
                        after opt-in:<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_zjv_hwc_ptb">
                            <a href="../images/loanuc14.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_wvl_mwc_ptb" src="../images/loanuc14.png" /></a>
                        </div>
</li>

                    <li class="li">Subscriber executes a call, resulting to consumption of £ 4.88. Subscriber's
                        main balance becomes £ 4.47. Refer to the following account overview:<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_xqg_3wc_ptb">
                            <a href="../images/loanuc15.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_ebg_nwc_ptb" src="../images/loanuc15.png" /></a>
                        </div>
</li>

                    <li class="li">Execute a recharge request via rechargeRequest API with amount as £ 6.00 and
                        Remaining debt =£ 5.5.<ul class="ul" id="concept_mkw_lcc_ptb__ul_tdm_ywc_ptb">
                            <li class="li">Main balance remaining = £ 4.97</li>

                            <li class="li">Loan is used, remaining debt is cleared, and loan is NOT granted
                                again (as of one-time_.</li>

                            <li class="li">Remaining debt as £ 0, loan amount = 0.</li>

                            <li class="li">Subscriber account state is INITIAL.</li>

                            <li class="li">Recharge EDR is generated.</li>

                            <li class="li">Recharge notification is generated.</li>

                        </ul>
<div class="fig fignone" id="concept_mkw_lcc_ptb__fig_jsc_hxc_ptb">
                            <a href="../images/loanuc16.png" class="image"><img class="image break scalefit" id="concept_mkw_lcc_ptb__image_pj1_3xc_ptb" src="../images/loanuc16.png" /></a>
                        </div>
</li>

                </ol>

            </div>

            <div class="section" id="concept_mkw_lcc_ptb__section_rvj_tdx_ptb">
                
                
            </div>

            <div class="section" id="concept_mkw_lcc_ptb__section_mt4_tdx_ptb"><h3 class="title sectiontitle">Prepay subscriber repays the one-time loan (with Service fee paid only if
                    loan used = FALSE), loan used as main balance before repayment, but top-up
                    amount is less than loan amount</h3>
                
                <p class="p"><strong class="ph b">Configuration</strong></p>

                <ul class="ul" id="concept_mkw_lcc_ptb__ul_b1t_cfx_ptb">
                    <li class="li">Loan is used as main balance.</li>

                    <li class="li">Top-up amount &lt; loan amount</li>

                    <li class="li">Top-up amount &lt; service fee.</li>

                    <li class="li">Main balance before loan opt-in: 4.35</li>

                    <li class="li">Loan amount £5</li>

                    <li class="li">Service fee: £ .5</li>

                    <li class="li">Remaining debt: 5.5</li>

                    <li class="li">Loan type: one-time</li>

                    <li class="li">Service fee paid if Loan is Used: False</li>

                </ul>

                <p class="p"><strong class="ph b">Execution</strong></p>

                <ul class="ul" id="concept_mkw_lcc_ptb__ul_ltj_v2x_ptb">
                    <li class="li">After loan opt-in, main balance is £ 9.35 (includes loan amount £5)</li>

                    <li class="li">Call consumption is done and main balance after usage of loan balance is
                        £4.47</li>

                    <li class="li">Top-up of £ 0.45 is done on main balance (top-up amount ≤ service fee)</li>

                </ul>

                <p class="p"><strong class="ph b">Result</strong></p>

                <p class="p">Because the loan was used as main balance, the service fee is deducted at time of
                    repayment/recharge as part of remaining debt.</p>

                <ul class="ul" id="concept_mkw_lcc_ptb__ul_fhp_n2x_ptb">
                    <li class="li">Service fee is adjustment with top-up</li>

                    <li class="li">Remaining debt is updated and main balance remains the same</li>

                    <li class="li">Remaining debt = 5.5 - 0.45 = 5.05</li>

                    <li class="li">Main balance = 4.47</li>

                    <li class="li">Loan state: opt-in</li>

                </ul>

            </div>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title4" id="concept_kk1_nbf_ptb"><h2 class="title topictitle2" id="ariaid-title4">Example 3: Pre-call announcement for low balance and unable to fund</h2>
<div class="body conbody">
            <p class="p"><strong class="ph b">Configuration</strong></p>

            <ol class="ol" id="concept_kk1_nbf_ptb__ol_zc5_sbf_ptb">
                <li class="li">Configure the following ME application preferences:<ol class="ol" type="a" id="concept_kk1_nbf_ptb__ol_slr_3cf_ptb">
                        <li class="li">EDR Logging Enabled = true</li>

                        <li class="li">AutoGen SPR Ids = true</li>

                        <li class="li">EDR Generator Flag = true</li>

                    </ol>
</li>

                <li class="li">Configure rule in LOAN_PRE_PROCESSING trigger, to reject loan if Custom Data
                    Eligibility is not Eligible.<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_yrc_12f_ptb">
                        <a href="../images/loanuc17.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_kjy_12f_ptb" src="../images/loanuc17.png" /></a>
                    </div>
<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_alj_f2f_ptb">
                        <a href="../images/loanuc18.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_frf_g2f_ptb" src="../images/loanuc18.png" /></a>
                    </div>
<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_a54_g2f_ptb">
                        <a href="../images/loanuc19.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_n4z_32f_ptb" src="../images/loanuc19.png" /></a>
                    </div>
</li>

                <li class="li">Configure rule in LOAN_POST_PROCESSING trigger, to send the notification based
                    on the loan operation.<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_kqd_n2f_ptb">
                        <a href="../images/loanuc20.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_xf1_42f_ptb" src="../images/loanuc20.png" /></a>
                    </div>
</li>

                <li class="li">Configure rule in RATING_POST_PROCESSING trigger to send an Announcement when
                    the account has insufficient credit (Unable to Fund). <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_i5s_mff_ptb">
                        <a href="../images/loanuc21.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_kgn_nff_ptb" src="../images/loanuc21.png" /></a>
                    </div>
</li>

                <li class="li">Create Slicing Profile with Slice-Allocation-Factor=100 and Min-Slice-Size=
                        1.<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_t5v_pjf_ptb">
                        <a href="../images/loanuc24.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_dwn_qjf_ptb" src="../images/loanuc24.png" /></a>
                    </div>
</li>

                <li class="li">Create a Rate with 0.3 cost for 1 sec. Apply this rate in Charging Logic and
                    then in Bundle B1.</li>

                <li class="li">Configure Device1 with E164 = 123456890. The device purchases a subscription
                    Bundle1, with Account A1, and User is attached to the device.</li>

                <li class="li">The Account Balance configured has a Main Balance of £1.00, and with Overage
                    Limit at 0 and the User is attached to the Account.</li>

                <li class="li">Create a loan with the following configuration:<table cellpadding="4" cellspacing="0" summary="" id="concept_kk1_nbf_ptb__table_lrx_qcf_ptb" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:9.066183136899364%" /><col style="width:11.876699909338168%" /><col style="width:18.766999093381685%" /><col style="width:16.047144152311876%" /><col style="width:13.327289211242066%" /><col style="width:30.915684496826835%" /></colgroup><thead class="thead" style="text-align:left;">
                                <tr class="row">
                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e884">Name</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e887">Type</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e890">Loan amount</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e893">Activation fee</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e896">Service fee</th>

                                    <th class="entry cellrowborder" style="vertical-align:top;" id="d154905e900">Service fee paid only if loan used</th>

                                </tr>

                            </thead>
<tbody class="tbody">
                                <tr class="row">
                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e884 ">IOU</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e887 ">Recurrent</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e890 ">£3.00</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e893 ">0</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e896 ">£0.45</td>

                                    <td class="entry cellrowborder" style="vertical-align:top;" headers="d154905e900 ">Selected (True)</td>

                                </tr>

                            </tbody>
</table>
</li>

                <li class="li">Account has a TPG with <em class="ph i">Absolute from zero</em> as Threshold for Low Balance
                    Set at £1 with Announcement action based on the Account Loan State.<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_hfp_rgf_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>TPG for low balance at 1</span>
                        
                        <a href="../images/loanuc22.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_gdk_1hf_ptb" src="../images/loanuc22.png" /></a>
                    </div>
</li>

                <li class="li">Account also has a TPG with Loan Usage flag=true with Send Notification
                        action<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_r45_1hf_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>TPG for loan usage</span>
                        
                        <a href="../images/loanuc23.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_mjb_hhf_ptb" src="../images/loanuc23.png" /></a>
                    </div>
</li>

                <li class="li">Subscriber Account is in Initial Loan State and subscriber does not have
                    loan.</li>

            </ol>

            <p class="p"><strong class="ph b">Execution</strong></p>

            <ol class="ol" id="concept_kk1_nbf_ptb__ol_u15_2tf_ptb">
                <li class="li">Execute Opt-In request for Account. The request is successful with Loan as main
                    Balance £ 4.00. Notification of Loan Opt-In is sent. <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_qyj_4tf_ptb">
                        <a href="../images/loanuc25.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_wty_4tf_ptb" src="../images/loanuc25.png" /></a>
                    </div>
</li>

                <li class="li">Subscriber executes a call (Call-I; CCR-I: RSU = 10; CCR-U: USU=0; RSU=10 CCR-T;
                    USU=4). Call is successful.<p class="p">Since it is expected to have Loan Usage
                        Notification once Account Balance &lt; Loan Amount</p>
<p class="p">GSU which will be
                        granted will be 4 as Delta to be granted from loan Amount is 1, Operator
                        needs to configure Slice Allocation Factor : 100% and Minimum Slice : 1As
                        per NCC current Slice Reduction functionality GSU is granted with +1
                        addition such as to avoid trigger of additional CCR towards
                        NCC</p>
<p class="p">Notification is expected for account balance &lt; loan amount.Loan
                        Usage Threshold with Slice Allocation factor will grant additional 1 base
                        unit (byte/second/unit) when slice allocation factor is set as 100% in
                        slicing profile. This is to keep it inline with other threshold behaviour
                        which will be crossed when committed units are same as granted
                        units.</p>
<div class="fig fignone" id="concept_kk1_nbf_ptb__fig_qhm_cvf_ptb">
                        <a href="../images/loanuc26.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_mjl_dvf_ptb" src="../images/loanuc26.png" /></a>
                    </div>
</li>

                <li class="li">
                    <p class="p">Subscriber executes another call (Call-II; CCR-I: RSU = 6; CCR-U: USU=0,
                        RSU=6; CCR-T: USU=6). Call is executed successfully. Low Balance
                        notification is sent.</p>

                    <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_vy3_5vf_ptb">
                        <a href="../images/loanuc27.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_rb1_vvf_ptb" src="../images/loanuc27.png" /></a>
                    </div>

                </li>

                <li class="li">
                    <p class="p">Subscriber executes another call (Call-III; CCR-I: RSU = 1; CCR-U: USU=0;
                        RSU=1; CCR-T; USU=1). Call is executed successfully. Announcement is sent
                        corresponding to the Loan State at CCR-Initial.</p>

                    <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_t2q_xwf_ptb">
                        <a href="../images/loanuc30.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_z2q_lyf_ptb" src="../images/loanuc30.png" /></a>
                    </div>

                </li>

                <li class="li">
                    <p class="p">Subscriber executes another call (Call-IV; CCR-I: RSU = 2; CCR-U: USU=0;
                        RSU=2; CCR-T; USU=2). Call is executed successfully. Announcement is sent
                        corresponding to the Loan State at CCR-Initial.</p>

                    <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_pyl_bxf_ptb">
                        <a href="../images/loanuc29.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_axq_hxf_ptb" src="../images/loanuc29.png" /></a>
                    </div>

                </li>

                <li class="li">
                    <p class="p">Subscriber executes another call (Call-V; CCR-I: RSU = 2). Announcement is
                        sent for Insufficient Balance (Unable to Fund) as main balance is less than
                        minimum call charge.</p>

                    <div class="fig fignone" id="concept_kk1_nbf_ptb__fig_xfs_xxf_ptb">
                        <a href="../images/loanuc29.png" class="image"><img class="image break scalefit" id="concept_kk1_nbf_ptb__image_yfs_xxf_ptb" src="../images/loanuc29.png" /></a>
                    </div>

                </li>

            </ol>

        </div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title5" id="concept_xdd_m1h_ptb"><h2 class="title topictitle2" id="ariaid-title5">Example 4: Lifecycle action - Reset Loan Action</h2>
<div class="body conbody">
            <div class="p">
                <div class="div">
                    <p class="p">ResetLoanAction is applied to ONLY account PLC/ELC. This action is triggered
                        to reset the loan and clear the remaining debt. As a result, Account Loan
                        state is reset to Initial, that is, loan instance is cleared and main
                        balance remains the same. An EDR is generated for this action.</p>

                    <p class="p">If ResetAccountAction is applied Account main balance is reset to zero.</p>

                </div>
            </div>

            <div class="fig fignone" id="concept_xdd_m1h_ptb__fig_yly_bch_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>Initial Account overview</span>
                
                <a href="../images/loan16.png" class="image"><img class="image break scalefit" id="concept_xdd_m1h_ptb__image_w3q_cch_ptb" src="../images/loan16.png" /></a>
            </div>

            <div class="fig fignone" id="concept_xdd_m1h_ptb__fig_q21_nbh_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>Reset Loan Action configuration</span>
                
                <a href="../images/loan15.png" class="image"><img class="image break scalefit" id="concept_xdd_m1h_ptb__image_rxn_sbh_ptb" src="../images/loan15.png" /></a>
            </div>

            <div class="fig fignone" id="concept_xdd_m1h_ptb__fig_z3p_jch_ptb"><span class="figcap"><span class="fig--title-label">Figure: </span>Account overview after lifecycle reset event</span>
                
                <a href="../images/loan17.png" class="image"><img class="image break scalefit" id="concept_xdd_m1h_ptb__image_ivg_kch_ptb" src="../images/loan17.png" /></a>
            </div>

        </div>
</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>