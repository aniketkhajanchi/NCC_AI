<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Business logic stream" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="topicID4" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Business logic stream</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="topicID4">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Business logic stream</h1>
<div class="body conbody">
            <p class="p">Business logic stream handles the decoding and mapping of records. The stream
                consists of one standalone node, CG Mapper Node.</p>

            <p class="p">CG Mapper Node polls the database for batches of records ready to be processed. When
            a batch is available, the node reads every record in the batch and maps the input record
            into an output record, ready to be distributed to the target destinations. By default,
            no mapping of the CDR and EDR data is performed but the data coming in goes out in the
            same format.</p>

            <p class="p">When a record is taken into processing, it is locked using version property
                (optimistic locking) so that no other instance of CG Mapper Node can process the
                same record at the same time. The version is checked when the record data is saved
                back to the database. If CG Mapper Node goes down while processing a record, the
                session timeout will trigger mapping again.</p>

            <p class="p">CG Mapper Node also decides when to trigger output records and when to filter them
            out. Once an output record is triggered, CG Mapper Node writes the output record into
            the database, once for every output type configured. It collects a batch of ready output
            records for the corresponding output stream to collect, encode and distribute correctly
            (see <a class="xref" href="batching_of_records_busines_slogic_stream.html">Batching of output records</a>). For appropriate
            distribution, CG Mapper Node evaluates the distribution rules and adds information from
            the triggered rule into the metadata of the batch, which the output stream then can use
            for distribution purposes. It also sets a sequence number and a creation time for the
            batch.</p>

            
            
            
            
            
        </div>
<div class="footer"><hr /><p>Overview Guide • P556766-DN1000054925-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>