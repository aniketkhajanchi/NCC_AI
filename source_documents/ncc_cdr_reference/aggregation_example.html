<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Aggregation example: Complete fully successful session with one rating group" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="aggregation_example" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Aggregation example: Complete fully successful session with one rating group</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="aggregation_example">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Aggregation example: Complete fully successful session with one rating group</h1>
<div class="body conbody">
        <p class="p"><strong class="ph b">Initial:</strong></p>

        <pre class="pre codeblock"><code>{
    "OCSChargingRecord": {
        "serviceProvider": "MVNO1",
        "generationTimestamp": "16/06/2021 13:17:17",
        "sessionId": "1234;123456789",
        "serviceContextId": "32251@3gpp.org",
        "requestType": "INITIAL_REQUEST",
        "sessionSequenceNumber": "0",
        "sessionStartTime": "16/06/2021 13:17:17",
        "dayOfWeek": "Wednesday",
        "gGSNAddress": "[IPV4: 192.168.206.146]",
        "sGSNAddress": "[IPV4: 192.168.206.145]",
        "pduAddress": "[IPV4: 94.21.1.1]",
        "origUserLocationInfo": "FF30",
        "userLocationInformation": "FF30",
        "deviceId": "Device1234",
        "deviceState": "Active",
        "devicePartitionId": "1",
        "deviceSiteId": "4",
        "causeForRecClosing": "0",
        "resultCode": "2001",
        "recordOpeningTime": "16/06/2021 13:17:17",
        "recordClosureTime": "16/06/2021 13:17:17",
        "duration": "0",
        "recordSequenceNumber": "1",
        "meHostName": "naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr",
        "nccVersion": "SPS_21_6_R1",
        "RecordTimestamp": "16/06/2021 13:17:18",
        "listOfSubscriptionID": {
            "subscriptionId": [
                {
                    "subscriptionIdType": "1",
                    "subscriptionIdData": "1234123123"
                },
                {
                    "subscriptionIdType": "0",
                    "subscriptionIdData": "1234123123"
                }
            ]
        },
        "listOfMscc": {
            "mscc": {
                "ratingGroup": "8",
                "serviceIdentifier": "0",
                "chargingType": "ONLINE_CHARGING",
                "recordEventType": "PS",
                "firstDataStart": "16/06/2021 13:17:17",
                "grantedUnits": "20",
                "usageType": "TVOL",
                "validityTime": "10",
                "resultCode": "2001",
                "recordEventResult": "00",
                "localSequenceNumber": "1",
                "deviceInfo": {
                    "subscriptionInfo": {
                        "subscriptionId": "4765b1b4-c83b-477f-ad18-b76040b635a7",
                        "subscriptionState": "Active",
                        "bundleName": "Bundle-1234",
                        "bundleActivationType": "NORMAL",
                        "accountID": "Account000",
                        "subscriptionStartDateTime": "16/06/2021 13:04:49",
                        "subscriptionEndDateTime": "12/07/2021 21:30:00",
                        "counterInfo": {
                            "counterName": "Counter-1234",
                            "counterKey": "0605eb1a-3caf-4980-a517-a57a481686d4",
                            "counterType": "SUBSCRIPTION",
                            "counterUnitType": "Byte",
                            "counterKindOfUnit": "VOLUME",
                            "alignGranularity": "TRUE",
                            "counterValueBefore": "0",
                            "counterValueAfter": "0"
                        },
                        "chargingServiceInfo": {
                            "chargingServiceName": "CS-1234",
                            "chargingServiceType": "VOLUME",
                            "chargingServicePriority": "11234",
                            "chargingServiceCategory": "DefaultCategory",
                            "bucketInfo": {
                                "bucketName": "Bucket-1234",
                                "bucketUnitType": "Byte",
                                "bucketKindOfUnit": "VOLUME",
                                "bucketBalanceBefore": "100000",
                                "bucketBalanceAfter": "100000",
                                "carryOverBucket": "false",
                                "bucketCommitedUnits": "0",
                                "bucketReservedUnits": "20",
                                "tariffID": "CS-1234_Tariff11234"
                            }
                        }
                    }
                }
            }
        }
    }
}</code></pre>
        <p class="p"><strong class="ph b">Update request:</strong></p>

        <pre class="pre codeblock"><code>{
    "OCSChargingRecord": {
        "serviceProvider": "MVNO1",
        "generationTimestamp": "16/06/2021 13:17:18",
        "sessionId": "1234;123456789",
        "serviceContextId": "32251@3gpp.org",
        "requestType": "UPDATE_REQUEST",
        "sessionSequenceNumber": "1",
        "sessionStartTime": "16/06/2021 13:17:17",
        "dayOfWeek": "Wednesday",
        "gGSNAddress": "[IPV4: 192.168.206.146]",
        "sGSNAddress": "[IPV4: 192.168.206.145]",
        "pduAddress": "[IPV4: 94.21.1.1]",
        "deviceId": "Device1234",
        "deviceState": "Active",
        "devicePartitionId": "1",
        "deviceSiteId": "4",
        "causeForRecClosing": "0",
        "origUserLocationInfo": "FF30",
        "userLocationInformation": "FF30",
        "resultCode": "2001",
        "recordOpeningTime": "16/06/2021 13:17:17",
        "recordClosureTime": "16/06/2021 13:17:18",
        "duration": "1",
        "recordSequenceNumber": "2",
        "meHostName": "naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr",
        "nccVersion": "SPS_21_6_R1",
        "RecordTimestamp": "16/06/2021 13:17:18",
        "listOfSubscriptionID": {
            "subscriptionId": [
                {
                    "subscriptionIdType": "1",
                    "subscriptionIdData": "1234123123"
                },
                {
                    "subscriptionIdType": "0",
                    "subscriptionIdData": "1234123123"
                }
            ]
        },
        "listOfMscc": {
            "mscc": {
                "ratingGroup": "8",
                "serviceIdentifier": "0",
                "chargingType": "ONLINE_CHARGING",
                "recordEventType": "PS",
                "firstDataStart": "16/06/2021 13:17:17",
                "grantedUnits": "20",
                "usageType": "TVOL",
                "validityTime": "10",
                "resultCode": "2001",
                "recordEventResult": "00",
                "localSequenceNumber": "2",
                "totalVolumeConsumed": "20",
                "deviceInfo": {
                    "subscriptionInfo": {
                        "subscriptionId": "4765b1b4-c83b-477f-ad18-b76040b635a7",
                        "subscriptionState": "Active",
                        "bundleName": "Bundle-1234",
                        "bundleActivationType": "NORMAL",
                        "accountID": "Account000",
                        "subscriptionStartDateTime": "16/06/2021 13:04:49",
                        "subscriptionEndDateTime": "12/07/2021 21:30:00",
                        "counterInfo": {
                            "counterName": "Counter-1234",
                            "counterKey": "0605eb1a-3caf-4980-a517-a57a481686d4",
                            "counterType": "SUBSCRIPTION",
                            "counterUnitType": "Byte",
                            "counterKindOfUnit": "VOLUME",
                            "alignGranularity": "TRUE",
                            "counterValueBefore": "0",
                            "counterValueAfter": "20"
                        },
                        "chargingServiceInfo": {
                            "chargingServiceName": "CS-1234",
                            "chargingServiceType": "VOLUME",
                            "chargingServicePriority": "11234",
                            "chargingServiceCategory": "DefaultCategory",
                            "bucketInfo": {
                                "bucketName": "Bucket-1234",
                                "bucketUnitType": "Byte",
                                "bucketKindOfUnit": "VOLUME",
                                "bucketBalanceBefore": "100000",
                                "bucketBalanceAfter": "99980",
                                "carryOverBucket": "false",
                                "bucketCommitedUnits": "20",
                                "bucketReservedUnits": "20",
                                "tariffID": "CS-1234_Tariff11234",
                                "totalVolumeCharged": "20",
                                "roundedVolumeCharged": "20",
                                "deltaVolume": "0"
                            }
                        }
                    }
                }
            }
        }
    }
}</code></pre>
        <p class="p"><strong class="ph b">Termination request:</strong></p>

        <pre class="pre codeblock"><code>{
    "OCSChargingRecord": {
        "serviceProvider": "MVNO1",
        "generationTimestamp": "16/06/2021 13:17:19",
        "sessionId": "1234;123456789",
        "serviceContextId": "32251@3gpp.org",
        "requestType": "TERMINATION_REQUEST",
        "sessionSequenceNumber": "4",
        "sessionStartTime": "16/06/2021 13:17:17",
        "dayOfWeek": "Wednesday",
        "gGSNAddress": "[IPV4: 192.168.206.146]",
        "sGSNAddress": "[IPV4: 192.168.206.145]",
        "pduAddress": "[IPV4: 94.21.1.1]",
        "origUserLocationInfo": "FF30",
        "userLocationInformation": "FF30",
        "deviceId": "Device1234",
        "deviceState": "Active",
        "devicePartitionId": "1",
        "deviceSiteId": "4",
        "causeForRecClosing": "1",
        "sessionDuration": "1",
        "sessionStopTime": "16/06/2021 13:17:19",
        "resultCode": "2001",
        "recordOpeningTime": "16/06/2021 13:17:18",
        "recordClosureTime": "16/06/2021 13:17:19",
        "duration": "1",
        "recordSequenceNumber": "3",
        "meHostName": "naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr",
        "nccVersion": "SPS_21_6_R1",
        "RecordTimestamp": "16/06/2021 13:17:19",
        "listOfSubscriptionID": {
            "subscriptionId": [
                {
                    "subscriptionIdType": "1",
                    "subscriptionIdData": "1234123123"
                },
                {
                    "subscriptionIdType": "0",
                    "subscriptionIdData": "1234123123"
                }
            ]
        },
        "listOfMscc": {
            "mscc": {
                "ratingGroup": "8",
                "serviceIdentifier": "0",
                "chargingType": "ONLINE_CHARGING",
                "recordEventType": "PS",
                "firstDataStart": "16/06/2021 13:17:17",
                "lastDataUsage": "16/06/2021 13:17:19",
                "timeUsage": "2",
                "resultCode": "2001",
                "recordEventResult": "00",
                "localSequenceNumber": "3",
                "totalVolumeConsumed": "20",
                "deviceInfo": {
                    "subscriptionInfo": {
                        "subscriptionId": "4765b1b4-c83b-477f-ad18-b76040b635a7",
                        "subscriptionState": "Active",
                        "bundleName": "Bundle-1234",
                        "bundleActivationType": "NORMAL",
                        "accountID": "Account000",
                        "subscriptionStartDateTime": "16/06/2021 13:04:49",
                        "subscriptionEndDateTime": "12/07/2021 21:30:00",
                        "chargingServiceInfo": {
                            "chargingServiceName": "CS-1234",
                            "chargingServiceType": "VOLUME",
                            "chargingServicePriority": "11234",
                            "chargingServiceCategory": "DefaultCategory",
                            "bucketInfo": {
                                "bucketName": "Bucket-1234",
                                "bucketUnitType": "Byte",
                                "bucketKindOfUnit": "VOLUME",
                                "bucketBalanceBefore": "99980",
                                "bucketBalanceAfter": "99960",
                                "carryOverBucket": "false",
                                "bucketCommitedUnits": "20",
                                "bucketReservedUnits": "0",
                                "tariffID": "CS-1234_Tariff11234",
                                "totalVolumeCharged": "20",
                                "roundedVolumeCharged": "20",
                                "deltaVolume": "0"
                            }
                        },
                        "counterInfo": {
                            "counterName": "Counter-1234",
                            "counterKey": "0605eb1a-3caf-4980-a517-a57a481686d4",
                            "counterType": "SUBSCRIPTION",
                            "counterUnitType": "Byte",
                            "counterKindOfUnit": "VOLUME",
                            "alignGranularity": "TRUE",
                            "counterValueBefore": "20",
                            "counterValueAfter": "40"
                        }
                    }
                }
            }
        }
    }
}</code></pre>
        <p class="p"><strong class="ph b">Aggregated output:</strong></p>

        <pre class="pre codeblock"><code>record1:
  payload:
    genericRecord:
      recordType: OCSChargingRecord
      recordElements:
      - varName: serviceProvider
        varValue: 'MVNO1'
      - varName: causeForRecClosing
        varValue: '1'
      - varName: RecordTimestamp
        varValue: 16/06/2021 13:17:18
      - varName: recordOpeningTime
        varValue: 16/06/2021 13:17:17
      - varName: duration
        varValue: '2'
      - varName: generationTimestamp
        varValue: 16/06/2021 13:17:19
      - varName: sessionId
        varValue: 1234;123456789
      - varName: serviceContextId
        varValue: 32251@3gpp.org
      - varName: meHostName
        varValue: naperil95vzwcchf-y-nk-ig-000-ig-charging-7cbf4fdd78-j6ccr
      - varName: nccVersion
        varValue: SPS_21_6_R1
      - varName: sessionStartTime
        varValue: 16/06/2021 13:17:17
      - varName: recordClosureTime
        varValue: 16/06/2021 13:17:19
      - varName: origUserLocationInfo
        varValue: FF30
      - varName: userLocationInformation
        varValue: FF30
      - varName: resultCode
        varValue: '2001'
      - varName: pduAddress
        varValue: '[IPV4: 94.21.1.1]'
      - varName: gGSNAddress
        varValue: '[IPV4: 192.168.206.146]'
      - varName: sGSNAddress
        varValue: '[IPV4: 192.168.206.145]'
      - varName: dayOfWeek
        varValue: Wednesday
      - varName: deviceId
        varValue: Device1234
      - varName: deviceState
        varValue: Active
      - varName: devicePartitionId
        varValue: '1'
      - varName: deviceSiteId
        varValue: '4'
      - varName: sessionDuration
        varValue: '1'
      recordExtensions:
      - recordProperty: listOfSubscriptionID
        recordSubExtensions:
        - recordProperty: subscriptionId
          recordElements:
          - varName: subscriptionIdType
            varValue: '1'
          - varName: subscriptionIdData
            varValue: '1234123123'
        - recordProperty: subscriptionId
          recordElements:
          - varName: subscriptionIdType
            varValue: '0'
          - varName: subscriptionIdData
            varValue: '1234123123'
      - recordProperty: listOfMscc
        recordSubExtensions:
        - recordProperty: mscc
          recordElements:
          - varName: ratingGroup
            varValue: '8'
          - varName: serviceIdentifier
            varValue: '0'
          - varName: chargingType
            varValue: ONLINE_CHARGING
          - varName: recordEventType
            varValue: PS
          - varName: firstDataStart
            varValue: 16/06/2021 13:17:17
          - varName: grantedUnits
            varValue: '20'
          - varName: usageType
            varValue: TVOL
          - varName: validityTime
            varValue: '10'
          - varName: resultCode
            varValue: '2001'
          - varName: recordEventResult
            varValue: '00'
          - varName: totalVolumeConsumed
            varValue: '40'
          - varName: lastDataUsage
            varValue: 16/06/2021 13:17:19
          - varName: timeUsage
            varValue: '2'
          recordSubExtensions:
          - recordProperty: deviceInfo
            recordSubExtensions:
            - recordProperty: subscriptionInfo
              recordSubExtensions:
              - recordProperty: SubscriptionInfo
                recordElements:
                - varName: subscriptionId
                  varValue: 4765b1b4-c83b-477f-ad18-b76040b635a7
                - varName: subscriptionState
                  varValue: Active
                - varName: bundleName
                  varValue: Bundle-1234
                - varName: bundleActivationType
                  varValue: NORMAL
                - varName: accountID
                  varValue: Account000
                - varName: subscriptionStartDateTime
                  varValue: 16/06/2021 13:04:49
                - varName: subscriptionEndDateTime
                  varValue: 12/07/2021 21:30:00
                recordSubExtensions:
                - recordProperty: counterInfo
                  recordSubExtensions:
                  - recordProperty: CounterInfo
                    recordElements:
                    - varName: counterName
                      varValue: Counter-1234
                    - varName: counterKey
                      varValue: 0605eb1a-3caf-4980-a517-a57a481686d4
                    - varName: counterType
                      varValue: SUBSCRIPTION
                    - varName: counterUnitType
                      varValue: Byte
                    - varName: counterKindOfUnit
                      varValue: VOLUME
                    - varName: alignGranularity
                      varValue: 'TRUE'
                    - varName: counterValueBefore
                      varValue: '0'
                    - varName: counterValueAfter
                      varValue: '40'
                - recordProperty: chargingServiceInfo
                  recordSubExtensions:
                  - recordProperty: ChargingServiceInfo
                    recordElements:
                    - varName: chargingServiceName
                      varValue: CS-1234
                    - varName: chargingServiceType
                      varValue: VOLUME
                    - varName: chargingServicePriority
                      varValue: '11234'
                    - varName: chargingServiceCategory
                      varValue: DefaultCategory
                    recordSubExtensions:
                    - recordProperty: bucketInfo
                      recordSubExtensions:
                      - recordProperty: BucketInfo
                        recordElements:
                        - varName: bucketName
                          varValue: Bucket-1234
                        - varName: bucketUnitType
                          varValue: Byte
                        - varName: bucketKindOfUnit
                          varValue: VOLUME
                        - varName: bucketBalanceBefore
                          varValue: '100000'
                        - varName: bucketBalanceAfter
                          varValue: '99960'
                        - varName: carryOverBucket
                          varValue: 'false'
                        - varName: bucketCommitedUnits
                          varValue: '40'
                        - varName: bucketReservedUnits
                          varValue: '40'
                        - varName: tariffID
                          varValue: CS-1234_Tariff11234
                        - varName: totalVolumeCharged
                          varValue: '40'
                        - varName: roundedVolumeCharged
                          varValue: '40'
                        - varName: deltaVolume
                          varValue: '0'</code></pre>
    </div>
<div class="footer"><hr /><p>CDR/EDR Reference • P556766-DN1000055014-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>