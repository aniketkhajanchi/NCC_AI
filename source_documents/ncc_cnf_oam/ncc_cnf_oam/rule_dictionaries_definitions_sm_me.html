<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="concept" />
<meta name="DC.title" content="Rule dictionaries and definitions across SM and ME subsystems" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="rule_dictionaries_definitions_sm_me" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Rule dictionaries and definitions across SM and ME subsystems</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="rule_dictionaries_definitions_sm_me">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Rule dictionaries and definitions across SM and ME subsystems</h1>
<div class="body conbody">
        <div class="section" id="rule_dictionaries_definitions_sm_me__section_spx_jfp_plb"><h2 class="title sectiontitle">Overview</h2>
            
            <p class="p">The custom rule dictionary, along with the attribute definition, and custom vendor
                definition files must be copied to all SM and ME subsystems. This includes custom
                rule dictionaries for Charging and SM.</p>

            <div class="p">The admin must perform both of these procedures, one after the other:<ul class="ul" id="rule_dictionaries_definitions_sm_me__ul_l2w_mfp_plb">
                    <li class="li">Installing the custom rule dictionary.</li>

                    <li class="li">To install, copy, and distribute the attribute definition and custom vendor
                        definition files.</li>

                </ul>
</div>

            <p class="p">NCC also supports the use of an unlimited number of Vendor Specific Attribute (VSA)
                dictionary files and the attribute definition dictionaries. The VSA files can be
                used across all Diameter interfaces. Each dictionary defines the list of valid
                attributes that are supported by the vendor and are available for <span class="ph">NCC</span> management. The dictionaries must be on the <span class="ph">NCC</span> workstation to be loaded. A VSA is added to a
                vendor dictionary in order to add the VSA to <span class="ph">NCC</span>. To
                display the VSA in the GUI or to use it in rules, the VSA must also be added to the
                VsaToContextMapping.xml file in the respective contexts.</p>

        </div>

        <div class="section" id="rule_dictionaries_definitions_sm_me__section_awf_qfp_plb"><h2 class="title sectiontitle">Adding VSAs</h2>
            
            <div class="p">The workflow to create or modify a dictionary is as follows:<ul class="ul" id="rule_dictionaries_definitions_sm_me__ul_ark_rfp_plb">
                    <li class="li">create an entry in the CustomVendorDefinition.xml for the vendor.</li>

                    <li class="li">create a dictionary by name and specify all of the VSAs in the
                        VsaToContextMapping.xml file.</li>

                    <li class="li">reload all of the VSA dictionaries to load the changes.</li>

                    <li class="li">distribute the files to all of the nodes.</li>

                </ul>
</div>

            <div class="p">To add or modify attributes, a dictionary must be created, and the attributes must be
                added or modified (see "To add to the attribute definition and custom vendor
                definition files") in the dictionary in the opt/tpa/conf/sac/diameter directory. A
                VSA dictionary file may be added to <span class="ph">NCC</span> at any time. The format of the file
                is:<pre class="pre codeblock"><code>/opt/tpa/schemas/DiameterDefinition.xsd</code></pre></div>

            <p class="p">To display the VSA in the <span class="ph">NCC</span> rule engine, the GUI, or
                to be able to use the VSA in rules, the VSA must also be added to the
                VsaToContextMapping.xml in the respective files and contexts. That is, a VSA entry
                must be present in a dictionary and a source and/or result context mapping must be
                in the VSA mapping file.</p>

            <p class="p">To use a VSA on specific interfaces only, the VsaRuleSourceContext and
                VsaRuleResultContext must be mapped to the VSA. When the context is mapped to the
                VSA, the VSA is only available as a criteria or an action along with the configured
                contexts.</p>

            <p class="p">To configure VSA entries in a dictionary, use the VsaToContextMapping.xml file. The
                VsaToContextMapping.xml file provides an xml document that can be modified to
                include the individual VSA definitions.</p>
           
            <div class="p">The VsaToContextMapping.xml file for Charging is located
                in:<pre class="pre codeblock"><code>/opt/tpa/conf/sac/diameter/rule/ChargingVsaToContextMapping.xml</code></pre></div>

            <div class="p">Copy the contents of the VSA mapping file and enter the required values for the VSAs
                being added, as
                follows:<pre class="pre codeblock"><code>&lt;diameterToRuleContextMap xmlns="diameterRuleContextMap"&gt;
&lt;vsaToContext&gt;
&lt;vsaToRuleSourceContexts&gt;
&lt;vsaRuleSourceContext&gt;
&lt;context type="CONTEXT"/&gt;
&lt;vendorInfo&gt;
&lt;name&gt;vendorname&lt;/name&gt;
&lt;includeAttribute name="attribute-VSA"/&gt;
&lt;includeAttribute name="attribute-VSA2" maxOccurs="unbounded"
additive="true"/&gt;
&lt;includeAttribute name="attribute-VSA3" valueType=
"EnumValueType" valueTypeClassName="com.alcatel.tpapps.diameter.par.
EventTrigger"/&gt;
&lt;includeAttribute name="attribute-VSA4.attribute-VSA5"
includeGroupIndexArgs="true"/&gt;
&lt;/vendorInfo&gt;
&lt;/vsaRuleSourceContext&gt;
&lt;/vsaToRuleSourceContexts&gt;
&lt;vsaToRuleResultContexts&gt;
&lt;vsaRuleResultContext&gt;
&lt;context type="CONTEXT"/&gt;
&lt;vendorInfo&gt;
&lt;name&gt;vendorname&lt;/name&gt;
&lt;includeAttribute name="attribute-VSA"/&gt;
&lt;includeAttribute name="attribute-VSA2" maxOccurs="unbounded"
additive="true"/&gt;
&lt;includeAttribute name="attribute-VSA3" valueType=
"EnumValueType" valueTypeClassName="com.alcatel.tpapps.diameter.par.
EventTrigger"/&gt;
&lt;includeAttribute name="attribute-VSA4.attribute-VSA5"
includeGroupIndexArgs="true"/&gt;
&lt;/vendorInfo&gt;
&lt;/vsaRuleResultContext&gt;
&lt;/vsaToRuleResultContext&gt;
&lt;/vsaToContext&gt;
&lt;/diameterToRuleContextMap&gt;</code></pre></div>

            <p class="p">Save and add the file back to the respective directory.</p>

        </div>

    </div>
<div class="footer"><hr /><p>Operations, Administration, and Maintenance Guide • P556766-DN1000055092-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>