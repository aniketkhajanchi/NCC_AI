<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Examples" />
<meta name="prodname" content="Nokia Converged Charging" />
<meta name="version" content="Release 23.8" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="counter_entity_examples" />
<link rel="stylesheet" type="text/css" href="../../web/css/commonltr.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/styles.min.css" />
<link rel="stylesheet" type="text/css" href="../../web/css/common-extended.css" /><title>Examples</title>
<script src="../web/js/nswtc.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
<script src="../../web/css/../js/script.min.js" language="javascript" type="text/javascript">/*(◎_◎;)*/</script>
</head>
<body id="counter_entity_examples">
<div class="header"><div id="feedback-link-placeholder" class="feedback-link"></div><hr /></div><h1 class="title topictitle1" id="ariaid-title1">Examples</h1>
<div class="body">
<p class="p">The following examples help to understand the generic functionality of counters:</p>

    <p class="p"><strong class="ph b">Example 1: Counter reservation</strong></p>

    <p class="p">
      <strong class="ph b">Preconditions:</strong>
    </p>

    <ul class="ul" id="counter_entity_examples__ul_sxk_q42_tpb">
      <li class="li">
        <p class="p">A subscriber has an iPhone, which is associated with a data counter and the iPhone is
          subscribed to a device subscription.</p>

      </li>

      <li class="li">
        <p class="p">The device subscription is further associated with another data counter and a data
          bucket.</p>

      </li>

    </ul>

    <p class="p">
      <strong class="ph b">Post-conditions:</strong>
    </p>

    <ul class="ul" id="counter_entity_examples__ul_mf1_r42_tpb">
      <li class="li">
        <p class="p">When the iPhone initiates a data call with Requested Service Unit (RSU) of 40 MB, then
          the amount required to complete the call is reserved from the data bucket associated with
          the device subscription.</p>

        <div class="p">
          <div class="note" id="counter_entity_examples__note_ik5_yww_p5b"><div class="notetitle"><img src="../../web/css/../images/note.svg" title="note-icon" class="noteicon" />Note:</div> If a subscription is removed from the device or group in
            between a reservation and commit, then it is recommended to move the device or group
            subscription to barred state. Therefore, no reservation of units is available from that
            device or group subscription.</div>

        </div>

      </li>

      <li class="li">
        <p class="p">Both the counters, individual data counter associated with the iPhone and data counter
          associated with the device subscription, are applicable for the call charges. The current
          value of the counters remain unchanged while the total reserved value is updated with the
          value of 40 MB. The counter mapping is updated with session id and reserved values.</p>

      </li>

      <li class="li">
        <p class="p">In the update request, the iPhone has an RSU of 40 MB and Used Service Unit (USU) of 40
          MB. In this request, only 40 MB is committed and 40 MB is reserved for the next request.
          The current value of counters is updated with the committed value while the new attribute
          is incremented with a value of 40 MB. The counter mapping is also updated with the session
          id and reserved values.</p>

      </li>

    </ul>

    <p class="p"><strong class="ph b">Example 2: Unsubscribing a device or group subscription in between a reservation and
        commit</strong></p>

    <p class="p">
      <strong class="ph b">Preconditions:</strong>
    </p>

    <ul class="ul" id="counter_entity_examples__ul_if3_t42_tpb">
      <li class="li">
        <p class="p">A subscriber owns an iPhone subscribed with a device subscription.</p>

      </li>

      <li class="li">
        <p class="p">The device subscription is associated with a data bucket of 500 bytes.</p>

      </li>

    </ul>

    <p class="p">
      <strong class="ph b">Post-conditions:</strong>
    </p>

    <ul class="ul" id="counter_entity_examples__ul_hdd_542_tpb">
      <li class="li">
        <p class="p">When iPhone initiates a call with an RSU of 10 bytes, the units required to complete the
          call is reserved from the data bucket.</p>

      </li>

      <li class="li">
        <p class="p">The device subscription is removed from the iPhone. During an update request, an error is
          received stating that no subscription is attached with the device. An alarm is generated
          containing the device ID and bucket ID without club ID, and
            <samp class="ph systemoutput">SUBSCRIPTION_UNSUBSCRIBE</samp> rating error code is received that
          maps to <samp class="ph systemoutput">5031- Diameter error code</samp>.</p>

      </li>

    </ul>

</div>
<div class="footer"><hr /><p>Charging User Guide • P556766-DN1000054947-R23.8 • 1 • <a href="../home.html">Cover</a> • ©2023 Nokia. Nokia Confidential Information • Use subject to agreed restrictions on disclosure and use.</p></div></body>
</html>